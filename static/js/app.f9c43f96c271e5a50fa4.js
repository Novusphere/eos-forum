webpackJsonp([1],{0:function(t,e){},"05Ij":function(t,e){t.exports={secp128r1:{p:"fffffffdffffffffffffffffffffffff",a:"fffffffdfffffffffffffffffffffffc",b:"e87579c11079f43dd824993c2cee5ed3",n:"fffffffe0000000075a30d1b9038a115",h:"01",Gx:"161ff7528b899b2d0c28607ca52c5b86",Gy:"cf5ac8395bafeb13c02da292dded7a83"},secp160k1:{p:"fffffffffffffffffffffffffffffffeffffac73",a:"00",b:"07",n:"0100000000000000000001b8fa16dfab9aca16b6b3",h:"01",Gx:"3b4c382ce37aa192a4019e763036f4f5dd4d7ebb",Gy:"938cf935318fdced6bc28286531733c3f03c4fee"},secp160r1:{p:"ffffffffffffffffffffffffffffffff7fffffff",a:"ffffffffffffffffffffffffffffffff7ffffffc",b:"1c97befc54bd7a8b65acf89f81d4d4adc565fa45",n:"0100000000000000000001f4c8f927aed3ca752257",h:"01",Gx:"4a96b5688ef573284664698968c38bb913cbfc82",Gy:"23a628553168947d59dcc912042351377ac5fb32"},secp192k1:{p:"fffffffffffffffffffffffffffffffffffffffeffffee37",a:"00",b:"03",n:"fffffffffffffffffffffffe26f2fc170f69466a74defd8d",h:"01",Gx:"db4ff10ec057e9ae26b07d0280b7f4341da5d1b1eae06c7d",Gy:"9b2f2f6d9c5628a7844163d015be86344082aa88d95e2f9d"},secp192r1:{p:"fffffffffffffffffffffffffffffffeffffffffffffffff",a:"fffffffffffffffffffffffffffffffefffffffffffffffc",b:"64210519e59c80e70fa7e9ab72243049feb8deecc146b9b1",n:"ffffffffffffffffffffffff99def836146bc9b1b4d22831",h:"01",Gx:"188da80eb03090f67cbf20eb43a18800f4ff0afd82ff1012",Gy:"07192b95ffc8da78631011ed6b24cdd573f977a11e794811"},secp256k1:{p:"fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f",a:"00",b:"07",n:"fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",h:"01",Gx:"79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798",Gy:"483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"},secp256r1:{p:"ffffffff00000001000000000000000000000000ffffffffffffffffffffffff",a:"ffffffff00000001000000000000000000000000fffffffffffffffffffffffc",b:"5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b",n:"ffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551",h:"01",Gx:"6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296",Gy:"4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"}}},1:function(t,e){},"1/oy":function(t,e){},"1QQ/":function(t,e){t.exports={_from:"bigi@^1.4.2",_id:"bigi@1.4.2",_inBundle:!1,_integrity:"sha1-nGZalfiLiwj8Bc/XMfVhhZ1yWCU=",_location:"/bigi",_phantomChildren:{},_requested:{type:"range",registry:!0,raw:"bigi@^1.4.2",name:"bigi",escapedName:"bigi",rawSpec:"^1.4.2",saveSpec:null,fetchSpec:"^1.4.2"},_requiredBy:["/ecurve","/eosjs-ecc"],_resolved:"https://registry.npmjs.org/bigi/-/bigi-1.4.2.tgz",_shasum:"9c665a95f88b8b08fc05cfd731f561859d725825",_spec:"bigi@^1.4.2",_where:"C:\\Users\\root\\Desktop\\Work\\Github\\novusphere-eos\\node_modules\\eosjs-ecc",bugs:{url:"https://github.com/cryptocoinjs/bigi/issues"},bundleDependencies:!1,dependencies:{},deprecated:!1,description:"Big integers.",devDependencies:{coveralls:"^2.11.2",istanbul:"^0.3.5",jshint:"^2.5.1",mocha:"^2.1.0",mochify:"^2.1.0"},homepage:"https://github.com/cryptocoinjs/bigi#readme",keywords:["cryptography","math","bitcoin","arbitrary","precision","arithmetic","big","integer","int","number","biginteger","bigint","bignumber","decimal","float"],main:"./lib/index.js",name:"bigi",repository:{url:"git+https://github.com/cryptocoinjs/bigi.git",type:"git"},scripts:{"browser-test":"mochify --wd -R spec",coverage:"istanbul cover ./node_modules/.bin/_mocha -- --reporter list test/*.js",coveralls:"npm run-script coverage && node ./node_modules/.bin/coveralls < coverage/lcov.info",jshint:"jshint --config jshint.json lib/*.js ; true",test:"_mocha -- test/*.js",unit:"mocha"},testling:{files:"test/*.js",harness:"mocha",browsers:["ie/9..latest","firefox/latest","chrome/latest","safari/6.0..latest","iphone/6.0..latest","android-browser/4.2..latest"]},version:"1.4.2"}},2:function(t,e){},3:function(t,e){},"6ZSt":function(t,e){t.exports={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}}},"9M+g":function(t,e){},GfHa:function(t,e){},Hujw:function(t,e){t.exports={get_actions:{params:{account_name:"account_name",pos:"int32?",offset:"int32?"},results:{actions:"ordered_action_result[]",last_irreversible_block:"uint32",time_limit_exceeded_error:"bool?"},structs:[{name:"ordered_action_result",fields:{global_action_seq:"uint64",account_action_seq:"int32",block_num:"uint32",block_time:"block_timestamp_type",action_trace:"variant"}}]},get_controlled_accounts:{params:{controlling_account:"account_name"},results:{controlled_accounts:"account_name[]"}},get_key_accounts:{params:{public_key:"public_key_type"},results:{account_names:"account_name[]"}},get_transaction:{brief:"Retrieve a transaction from the blockchain.",params:{id:"transaction_id_type"},results:{id:"transaction_id_type",trx:"variant",block_time:"block_timestamp_type",block_num:"uint32",last_irreversible_block:"uint32",traces:"variant[]"}}}},Id91:function(t,e){},Jmt5:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,s=a("7+uW"),r=a("e6fC"),o=a("7t+N"),i=a.n(o),c=a("U0v6"),u=a("C/JF"),l=a("fhbW"),p=a("Yu89"),d=a("DfMW"),f=(a("Jmt5"),a("K3J8"),a("9M+g"),a("Xxa5")),m=a.n(f),_=a("exGp"),h=a.n(_),v={name:"ErrorModal",mounted:function(){var t=this;return h()(m.a.mark(function e(){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t,window._alert=window.alert,window.alert=function(t,e){a.text=t,a.title=e&&e.title?e.title:"Error",a.text_class=e&&e.text_class?e.text_class:"text-alert",i()("#errorModal").modal(e)};case 3:case"end":return e.stop()}},e,t)}))()},methods:{},data:function(){return{text_class:"",title:"",text:""}}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{tabindex:"-1",role:"dialog",id:"errorModal"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v(t._s(t.title))]),t._v(" "),t._m(0)]),t._v(" "),a("div",{staticClass:"modal-body",staticStyle:{"word-wrap":"break-word"}},[a("div",{class:t.text_class+" text-center"},[t._v("\n              "+t._s(t.text)+"\n          ")])]),t._v(" "),t._m(1)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button","data-dismiss":"modal"}},[this._v("close")])])}]},y=a("VU/8")(v,b,!1,null,null,null).exports,g=a("//Fk"),k=a.n(g),w={name:"ConfirmModal",mounted:function(){var t=this;return h()(m.a.mark(function e(){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t,window.confirm=function(){var t=h()(m.a.mark(function t(e,n,s){var r,o;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n&&n(a.setStatus),!0,a.text=e,(o=i()(".modal.show")).modal("hide"),i()("#confirmModal").modal({backdrop:"static",keyboard:!1});case 6:return t.next=8,new k.a(function(t){a.resolve=t});case 8:if(!(r=t.sent)||!s){t.next=17;break}return t.next=12,s();case 12:if(!t.sent){t.next=15;break}return t.abrupt("break",20);case 15:t.next=18;break;case 17:return t.abrupt("break",20);case 18:t.next=6;break;case 20:return i()("#confirmModal").modal("hide"),o.modal(),n&&n(null),t.abrupt("return",r);case 24:case"end":return t.stop()}},t,this)}));return function(e,a,n){return t.apply(this,arguments)}}();case 2:case"end":return e.stop()}},e,t)}))()},methods:{setStatus:function(t){this.text=t}},data:function(){return{resolve:null,text:""}}},x={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{tabindex:"-1",role:"dialog",id:"confirmModal"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"text-center"},[t._v("\n              "+t._s(t.text)+"\n          ")])]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-outline-success",attrs:{type:"button"},on:{click:function(e){t.resolve(!0)}}},[t._v("ok")]),t._v(" "),a("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(e){t.resolve(!1)}}},[t._v("cancel")])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title"},[this._v("Confirm")]),this._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])}]},C=a("VU/8")(w,x,!1,null,null,null).exports,$=a("mvHQ"),S=a.n($),A=a("Zrlr"),q=a.n(A),j=a("wxAW"),T=a.n(j),P=function(t,e){return new k.a(function(a,n){i.a.post(t,e,function(t){a(t)}).fail(function(t){n(t)})})},E=function(t,e){return new k.a(function(a,n){i.a.get(t,e,function(t){a(t)}).fail(function(t){n(t)})})},M=function(t){return new k.a(function(e){return setTimeout(e,t)})},N={postParent:function(){return{from:Q().config.collection_forum,localField:"data.reply_to_post_uuid",foreignField:"data.post_uuid",as:"parent"}},postState:function(){return{from:Q().config.collection_post_state,localField:"transaction",foreignField:"txid",as:"state"}},threadReplies:function(t){var e=Q();return t?{from:e.config.collection_forum,let:{post_uuid:{$concat:[{$literal:"ref-"},"$transaction"]}},pipeline:[{$project:{test:{$eq:["$$post_uuid","$data.reply_to_post_uuid"]}}},{$match:{test:!0}}],as:"replies"}:{from:e.config.collection_forum,localField:"data.post_uuid",foreignField:"data.reply_to_post_uuid",as:"replies"}},postReplies:function(){return{from:Q().config.collection_forum,localField:"data.post_uuid",foreignField:"data.json_metadata.parent_uuid",as:"replies"}},postMyVote:function(t){return{from:Q().config.collection_post_vote,let:{transaction:"$transaction"},pipeline:[{$match:{account:t}},{$project:{account:"$account",txid:"$txid",test:{$eq:["$$transaction","$txid"]}}},{$match:{test:!0}}],as:"my_vote"}}},B={notifications:function(t,e){return e||(e=15391e5),{createdAt:{$gt:e},"data.json_metadata.sub":{$exists:!0,$ne:""},"data.poster":{$ne:t},$or:[{"data.reply_to_poster":t},{"data.json_metadata.parent_poster":t}]}},threadById:function(t){return Array.isArray(t)?{transaction:{$in:t}}:64==t.length?{transaction:t}:{id:parseInt(t)}},threadReplies:function(t){return{"data.reply_to_post_uuid":t}},threadsBySub:function(t,e){var a={"data.json_metadata.sub":t,"data.reply_to_post_uuid":"",createdAt:{$gte:1531434299}};return"all"==t?a["data.json_metadata.sub"]={$exists:!0,$ne:""}:"anon"==t?a["data.json_metadata.sub"]={$regex:"(^anon$|^anon-)",$options:"i"}:Array.isArray(t)&&(a["data.json_metadata.sub"]={$in:t}),e&&e.length>0&&(a["data.poster"]={$nin:e}),a},threadsByAccount:function(t){return{"data.json_metadata.edit":!1,"data.json_metadata.sub":{$exists:!0,$ne:""},"data.reply_to_post_uuid":"","data.poster":t,createdAt:{$gte:1531434299}}},postsByTag:function(t){Array.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++)t[e]=t[e].toLowerCase();return{"data.json_metadata.edit":!1,tags:{$in:t},createdAt:{$gte:1531434299}}},postEdits:function(t,e){return{"data.poster":t,"data.json_metadata.parent_uuid":e,"data.json_metadata.edit":!0}},postsByAccount:function(t,e){var a=this.threadsByAccount(t);return e?a["data.reply_to_post_uuid"]={$ne:""}:delete a["data.reply_to_post_uuid"],a},validParent:function(){return{$or:[{parent:null},{"parent.data.json_metadata":{$ne:null}}]}}},R=a("woOf"),F=a.n(R),I=a("fZjL"),U=a.n(I),O=a("Dfrr"),z=a.n(O),D=(n=h()(m.a.mark(function t(){var e;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=window.localStorage.getItem("eosforum");try{H(JSON.parse(e))||(console.log("Failed to import/migrate storage"),console.log(e)),J()}catch(t){console.log("Failed to load storage"),console.log(t)}case 2:case"end":return t.stop()}},t,this)})),function(){return n.apply(this,arguments)}),V=1e3,L={version:15,eos_referendum:!0,subscribed_subs:["all","novusphere","eos","anon","anon-r-eos","anon-pol-econ","music","anon-bounties"],new_posts:{},last_notification:0,moderation:{hide_spam_threads:!0,mods:[],accounts:[],transactions:[]},anon_id:{name:"",key:""},settings:{atmos_upvotes:!0,scatter_timeout:1500,theme:"https://eos-forum.org/static/css/theme/day.css",novusphere_api:"https://db.novusphere.io",eos_api:{host:"eos.greymass.com",port:"443",protocol:"https"}}};if(window.__PRESETS__=window.localStorage.getItem("presets"),window.__PRESETS__){console.log("Found presets");try{window.__PRESETS__=JSON.parse(window.__PRESETS__),console.log("Loaded presets")}catch(t){window.__PRESETS__=null,console.log("Failed to load presets"),console.log(t)}window.__PRESETS__.storage&&(L=i.a.extend(!0,L,window.__PRESETS__.storage),window.__PRESETS__.storage.subscribed_subs&&(L.subscribed_subs=window.__PRESETS__.storage.subscribed_subs))}var G=i.a.extend(!0,{},L);function H(t){for(;t.version<G.version;)t.version<5?t.subscribed_subs=G.subscribed_subs:t.version<7?t.settings=G.settings:t.version<8?t.settings.atmos_upvotes=G.settings.atmos_upvotes:t.version<9?t.settings.scatter_timeout=G.settings.scatter_timeout:t.version<11?t.settings.theme=G.settings.theme:t.version<12?t.eos_referendum=G.eos_referendum:t.version<13?t.moderation=G.moderation:t.version<14?t.moderation.hide_spam_threads=G.moderation.hide_spam_threads:t.version<15&&(t.anon_id=G.anon_id),t.version++;return t.version>=G.version?(G=t,console.log("Loaded storage version "+G.version),!0):(console.log("Loaded storage failed"),!1)}function J(){var t=U()(G.new_posts);if(t.length>V)for(var e=V-t.length,a=0;a<e;a++)delete G.new_posts[t[a]];window.localStorage.setItem("eosforum",S()(G))}window.__getStorage=function(){return G},window.__saveStorage=function(){J()},window.__forgetStorage=function(){window.localStorage.setItem("eosforum",""),window.location.reload()},window.__forgetSettings=function(){G.settings=L.settings,J(),window.location.reload()};var W={lookup:N,match:B,project:{post:function(t){var e,a,n={id:"$id",name:"$name",transaction:"$transaction",createdAt:"$createdAt",data:"$data",tags:"$tags",expired:"$expired",replies:(t=F()({normalize_up:!1,normalize_parent:!1,normalize_my_vote:!1,recent_edit:!1,total_replies:!1,score:!0},t)).total_replies?[]:"$replies",up:t.normalize_up?{$ifNull:[{$arrayElemAt:["$state.up",0]},0]}:"$up",up_atmos:t.normalize_up?{$ifNull:[{$arrayElemAt:["$state.up_atmos",0]},0]}:"$up_atmos",parent:t.normalize_parent?{$arrayElemAt:["$parent",0]}:"$parent",score:"$score",my_vote:t.normalize_my_vote?{$arrayElemAt:["$my_vote",0]}:"$my_vote",recent_edit:"$recent_edit"};return t.score&&(n.score=(e=(new Date).getTime()/1e3,a=[1,{$ifNull:[{$arrayElemAt:["$state.up",0]},0]}],G.settings.atmos_upvotes&&(a=[{$add:a},{$ifNull:[{$arrayElemAt:["$state.up_atmos",0]},0]}]),{$divide:[{$add:a},{$pow:[{$add:[{$divide:[{$subtract:[e,"$createdAt"]},3600]},2]},1.5]}]})),t.recent_edit&&(n.recent_edit={$arrayElemAt:[{$filter:{input:"$replies",as:"reply",cond:{$and:[{$eq:["$$reply.data.json_metadata.edit",!0]},{$eq:["$$reply.data.json_metadata.parent_uuid","$data.post_uuid"]},{$eq:["$$reply.data.poster","$data.poster"]}]}}},-1]}),t.total_replies&&(n.total_replies={$size:{$filter:{input:"$replies",as:"reply",cond:{$ne:["$$reply.data.json_metadata.edit",!0]}}}}),n}},skip:{page:function(t,e){return(t-1)*e}},sort:{score:function(t){return{score:t?1:-1}},time:function(t){return{createdAt:t?1:-1}}}},Y=function(){function t(e){q()(this,t),this.config=e,this.query=W}return T()(t,[{key:"api",value:function(){var t=h()(m.a.mark(function t(e){var a;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P(this.config.url+"/api",S()(e));case 2:if(!(a=t.sent).error){t.next=6;break}throw console.log(a),a;case 6:return t.abrupt("return",a);case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"cors",value:function(){var t=h()(m.a.mark(function t(e){var a,n;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=this.config.url+"/service/cors/?"+e,t.next=3,E(a);case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"anonymousPost",value:function(){var t=h()(m.a.mark(function t(e){var a,n,s;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,void 0!=this._anonymous_post){t.next=6;break}return t.next=4,E(this.config.url+"/service/anon/");case 4:a=t.sent,this._anonymous_post=a.enabled;case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),this._anonymous_post=!1;case 11:return n=this._anonymous_post?this.config.url+"/service/anon/post":"https://db.novusphere.io/service/anon/post",t.next=14,P(n,e);case 14:return s=t.sent,t.abrupt("return",s);case 16:case"end":return t.stop()}},t,this,[[0,8]])}));return function(e){return t.apply(this,arguments)}}()},{key:"wait",value:function(){var t=h()(m.a.mark(function t(e,a){var n;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.api(a);case 2:if(n=t.sent,!(n.cursor.firstBatch.length>0)){t.next=6;break}return t.abrupt("return",n);case 6:return t.next=8,M(e);case 8:t.next=0;break;case 10:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}()},{key:"waitTx",value:function(){var t=h()(m.a.mark(function t(e,a,n,s){var r;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n||(n=1e3),s||(s=this.config.collection_forum),t.next=4,this.wait(a,{find:s,maxTimeMS:n,filter:{transaction:e}});case 4:return r=t.sent,t.abrupt("return",r);case 6:case"end":return t.stop()}},t,this)}));return function(e,a,n,s){return t.apply(this,arguments)}}()}]),t}(),K={url:"https://db.novusphere.io",collection_forum:"eosforum",collection_nsdb:"ns",collection_post_state:"ns_post_state",collection_post_vote:"ns_post_vote"};function Q(){return K.url=G.settings.novusphere_api,new Y(K)}var Z=a("rViV"),X=a.n(Z),tt=a("JNUY"),et=a.n(tt),at=function(){function t(e){q()(this,t);for(var a=new Uint8Array(e.length/2),n=0;n<a.length;n++)a[n]=parseInt(e.substr(2*n,2),16);this.bytes=a,this.offset=0}return T()(t,[{key:"readByte",value:function(){return this.bytes[this.offset++]}},{key:"readBytes",value:function(t){for(var e=new Uint8Array(t),a=0;a<t;a++)e[a]=this.readByte();return e}},{key:"readInt32",value:function(){return this.readByte()|this.readByte()<<8|this.readByte()<<16|this.readByte()<<24}},{key:"readVarInt",value:function(){for(var t=0,e=0,a=0;a<8;a++){var n=this.readByte();if(t+=e<28?(127&n)<<e:(127&n)*(0|Math.pow(2,e)),e+=7,n<128)break}return t}},{key:"readString",value:function(){var t=this.readVarInt(),e=this.readBytes(t);return String.fromCharCode.apply(null,e)}},{key:"readName",value:function(){for(var t=this.readBytes(8),e="",a=0;a<t.length;a++)e+=(t[a]<=15?"0":"")+t[a].toString(16);return et.a.decodeNameHex(e)}}]),t}(),nt=a("JRkP"),st=a.n(nt),rt=a("hu3b"),ot=a.n(rt);st.a.plugins(new ot.a);var it,ct,ut,lt=G.settings.scatter_timeout,pt={blockchain:"eos",host:"eos.greymass.com",port:"443",chainId:"aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906"},dt={broadcast:!0,sign:!0,chainId:"aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906"},ft=function(){function t(e,a){q()(this,t),this.scatter=e,this.identity=a}return T()(t,null,[{key:"detect",value:function(){var e=h()(m.a.mark(function e(a){var n,s;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,window.scatter&&(s=window.scatter,window.scatter=null,console.log("Scatter loaded (plugin)"),n=new t(s,a)),!(lt<1e4)){e.next=8;break}return console.log("Trying to connect to scatter with timeout "+lt+"ms..."),e.next=6,st.a.scatter.connect("eos-forum",{initTimeout:lt});case 6:e.sent?(console.log("Scatter loaded (desktop)"),n=new t(st.a.scatter,a)):lt=Math.min(1e4,lt+1500);case 8:if(!n||!n.scatter.identity){e.next=11;break}return e.next=11,n.setIdentity();case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),T()(t,[{key:"setIdentity",value:function(){var t=h()(m.a.mark(function t(){var e,a;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.scatter,t.next=3,e.getIdentity({accounts:[{chainId:pt.chainId,blockchain:pt.blockchain}]});case 3:return a=t.sent,this.identity.account=a.accounts[0].name,this.identity.auth=a.accounts[0].authority,this.identity.atmos="0.000",this.identity.token="0.000",this.identity.notifications=0,t.next=11,this.identity.update(!0);case 11:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"forgetIdentity",value:function(){var t=h()(m.a.mark(function t(){return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.scatter.forgetIdentity(),this.identity.setDefault();case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"eos",value:function(){var t=this.scatter;return pt.host=G.settings.eos_api.host,pt.port=G.settings.eos_api.port,t.eos(pt,X.a,dt,G.settings.eos_api.protocol)}},{key:"executeActions",value:function(){var t=h()(m.a.mark(function t(e,a){var n,s;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.eos(),t.next=3,n.transaction(a.map(function(t){return t.contract}),function(t){for(var n=0;n<a.length;n++){var s=a[n];t[s.contract.replace(/\./g,"_")][s.name](s.data,e)}});case 3:return s=t.sent,t.abrupt("return",s.transaction_id);case 5:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}()}]),t}(),mt=function(){function t(e,a){q()(this,t),this.lynx=e,this.identity=a}return T()(t,null,[{key:"detect",value:function(){var e=h()(m.a.mark(function e(a){var n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.lynxMobile){e.next=4;break}return n=window.lynxMobile,console.log("Lynx Mobile loaded"),e.abrupt("return",new t(n,a));case 4:return e.abrupt("return",null);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),T()(t,[{key:"setIdentity",value:function(){var t=h()(m.a.mark(function t(e){var a,n;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=this.lynx,t.next=3,a.requestSetAccountName();case 3:return n=t.sent,this.identity.account=n,this.identity.auth="active",this.identity.atmos="0.000",this.identity.token="0.000",this.identity.notifications=0,t.next=11,this.identity.update(!0);case 11:_alert("lynx 4");case 12:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"forgetIdentity",value:function(){var t=h()(m.a.mark(function t(){return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.identity.setDefault();case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"executeActions",value:function(){var t=h()(m.a.mark(function t(e,a){var n,s,r;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.lynx,s=a.map(function(t){return{account:t.contract,name:t.name,data:t.data,authorization:e.authorization}}),t.prev=2,t.next=5,n.transact(s);case 5:return null==(r=t.sent)?_alert("eostx is null"):r.transaction_id||_alert("eostx.transaction_id is not set"),t.abrupt("return",r.transaction_id);case 10:throw t.prev=10,t.t0=t.catch(2),_alert("An error occured from transact()"),_alert(t.t0),t.t0;case 15:case"end":return t.stop()}},t,this,[[2,10]])}));return function(e,a){return t.apply(this,arguments)}}()}]),t}(),_t=function(){function t(){q()(this,t),this.setDefault()}return T()(t,[{key:"setDefault",value:function(){this.account="",this.auth="",this.atmos="0.000",this.token="0.000",this.notifications=0,this._updater&&clearInterval(this.updater),window.dispatchEvent(new Event("identity"))}},{key:"update",value:function(){var t=h()(m.a.mark(function t(e){var a=this;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.account&&(window.dispatchEvent(new Event("identityUpdate")),this._updater||(this._updater=setInterval(function(){return a.update()},5e3))),e&&window.dispatchEvent(new Event("identity"));case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}]),t}(),ht=function(){var t=h()(m.a.mark(function t(){var e,a;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=0;case 1:if(!(e<gt.length)){t.next=11;break}return t.next=4,gt[e].detect(wt);case 4:if(!(a=t.sent)){t.next=8;break}return kt=a,t.abrupt("break",11);case 8:e++,t.next=1;break;case 11:kt||setTimeout(ht,2500);case 12:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),vt=(it=h()(m.a.mark(function t(e){return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(wt.account||!e){t.next=4;break}if(!kt){t.next=4;break}return t.next=4,kt.setIdentity(wt);case 4:return t.abrupt("return",wt);case 5:case"end":return t.stop()}},t,this)})),function(t){return it.apply(this,arguments)}),bt=(ct=h()(m.a.mark(function t(){return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return kt.forgetIdentity(),t.abrupt("return",wt);case 2:case"end":return t.stop()}},t,this)})),function(){return ct.apply(this,arguments)}),yt=(ut=h()(m.a.mark(function t(e){var a,n;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Array.isArray(e)||(e=[e]),t.next=3,vt();case 3:return a=t.sent,n={authorization:[{actor:a.account,permission:a.auth}]},t.next=7,kt.executeActions(n,e);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}},t,this)})),function(t){return ut.apply(this,arguments)});D();var gt=[ft,mt],kt=null,wt=new _t;function xt(){if(kt&&kt.eos)return kt.eos();var t=G.settings.eos_api;return X()({httpEndpoint:t.protocol+"://"+t.host,chainId:"aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906",keyProvider:[]})}ht();var Ct=a("dXij"),$t=a.n(Ct),St=a("c/Tr"),At=a.n(St),qt=a("lHA8"),jt=a.n(qt),Tt=new(function(){function t(){q()(this,t),this.resetCache()}return T()(t,[{key:"resetCache",value:function(){this.cache={}}},{key:"resolve",value:function(){var t=h()(m.a.mark(function t(e,a){var n,s;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("197001"!=a){t.next=2;break}return t.abrupt("return",null);case 2:if(0!=(n=e).indexOf("https:")&&0!=n.indexOf("http:")){t.next=6;break}t.next=11;break;case 6:if(!(n.indexOf("/")>-1)){t.next=10;break}n="https://raw.githubusercontent.com/"+n+"/master",t.next=11;break;case 10:return t.abrupt("return",null);case 11:return t.prev=11,n=n+"/"+a+".json",t.t0=JSON,t.next=16,E(n);case 16:return t.t1=t.sent,s=t.t0.parse.call(t.t0,t.t1),t.abrupt("return",s);case 21:return t.prev=21,t.t2=t.catch(11),t.abrupt("return",null);case 24:case"end":return t.stop()}},t,this,[[11,21]])}));return function(e,a){return t.apply(this,arguments)}}()},{key:"dateToKey",value:function(t){return 100*t.getUTCFullYear()+(t.getUTCMonth()+1)}},{key:"getCacheSet",value:function(){var t=h()(m.a.mark(function t(e){var a,n,s,r,o,i,c,u,l,p,d,f,_;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=(new Date).getTime(),n=new Date(1e3*e),s=this.dateToKey(n);case 3:if(0!=(r=this.cache[s])){t.next=9;break}return t.next=7,M(5);case 7:t.next=10;break;case 9:return t.abrupt("break",12);case 10:t.next=3;break;case 12:if(!(null==r||a-r.last_updated>=6e5)){t.next=37;break}o=function(t,e){if(e)for(var a=0;a<e.length;a++)t.add(e[a])},this.cache[s]=0,r={last_updated:a,accounts:[],transactions:[],nsfw:[],pinned:[]},i=new jt.a,c=new jt.a,u=new jt.a,l={},p=0;case 21:if(!(p<G.moderation.mods.length)){t.next=31;break}return t.next=24,this.resolve(G.moderation.mods[p],s);case 24:if(null!=(d=t.sent)){t.next=27;break}return t.abrupt("continue",28);case 27:try{if(o(i,d.account),o(c,d.transactions),o(u,d.nsfw),d.pinned)for(f in d.pinned)(_=l[f])||(_=new jt.a,l[f]=_),o(_,d.pinned[f])}catch(t){console.log("error with moderator "+G.moderation.mods[p]+" for "+s)}case 28:p++,t.next=21;break;case 31:for(f in l)l[f]=At()(l[f]);r.account=At()(i),r.transactions=At()(c),r.nsfw=At()(u),r.pinned=l,this.cache[s]=r;case 37:return t.abrupt("return",r);case 38:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getCurrentSet",value:function(){var t=h()(m.a.mark(function t(){var e,a;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new Date,t.next=3,this.getCacheSet(e.getTime()/1e3);case 3:return a=t.sent,t.abrupt("return",a);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"getBlockedAccounts",value:function(){var t=h()(m.a.mark(function t(){var e,a,n,s,r;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new Date,t.next=3,this.getCurrentSet();case 3:return a=t.sent,t.next=6,this.getCacheSet((e.getTime()-26784e5)/1e3);case 6:for(n=t.sent,s=new jt.a,r=0;r<a.accounts.length;r++)s.add(a.accounts[r]);for(r=0;r<n.accounts.length;r++)s.add(n.accounts[r]);for(r=0;r<G.moderation.accounts.length;r++)s.add(G.moderation.accounts[r]);return t.abrupt("return",At()(s));case 12:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"getPinned",value:function(){var t=h()(m.a.mark(function t(e){var a,n,s,r,o;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getCurrentSet();case 2:return a=t.sent,n=[],(s=a.pinned.all)&&(n=$t()(n,s)),0==e.indexOf("anon-")&&(r=a.pinned.anon)&&(n=$t()(n,r)),(o=a.pinned[e])&&(n=$t()(n,o)),t.abrupt("return",n);case 10:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"isNsfw",value:function(){var t=h()(m.a.mark(function t(e,a){var n;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getCacheSet(e);case 2:return n=t.sent,t.abrupt("return",n.nsfw.includes(a));case 4:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}()},{key:"isBlocked",value:function(){var t=h()(m.a.mark(function t(e,a,n){var s;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n||!G.moderation.accounts.includes(n)){t.next=2;break}return t.abrupt("return",!0);case 2:if(!a||!G.moderation.transactions.includes(a)){t.next=4;break}return t.abrupt("return",!0);case 4:if(e){t.next=6;break}return t.abrupt("return",!1);case 6:return t.next=8,this.getCacheSet(e);case 8:return s=t.sent,t.abrupt("return",n&&s.accounts.includes(n)||a&&s.transactions.includes(a));case 10:case"end":return t.stop()}},t,this)}));return function(e,a,n){return t.apply(this,arguments)}}()}]),t}()),Pt=function(){var t=h()(m.a.mark(function t(e){var a,n,s;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=Q(),n=null,t.prev=2,t.t0=JSON,t.next=6,a.cors(e);case 6:t.t1=t.sent,n=t.t0.parse.call(t.t0,t.t1),t.next=13;break;case 10:return t.prev=10,t.t2=t.catch(2),t.abrupt("return",null);case 13:if(!(s=n.html.match(/src=\".+\"/))){t.next=18;break}return s=(s=s[0].substring(5)).substring(0,s.indexOf('"')),t.abrupt("return",{src:s,thumbnail:n.thumbnail_url,width:n.width,height:n.height});case 18:return t.abrupt("return",null);case 19:case"end":return t.stop()}},t,this,[[2,10]])}));return function(e){return t.apply(this,arguments)}}();function Et(t){if(0==t.indexOf("magnet:"))return"magnet link";var e=document.createElement("a");return e.href=t,e.host.toLowerCase()}var Mt=function(){function t(e){q()(this,t),this.value="",this.type="",this.display="",this.width=0,this.height=0,e&&e.value&&e.type&&e.display&&(this.value=e.value,this.type=e.type,this.display=e.display,this.width=e.width?e.width:0,this.height=e.height?e.height:0)}return T()(t,[{key:"hasAttachment",value:function(t){return this.display==t}},{key:"isIframe",value:function(){return this.hasAttachment("iframe")}},{key:"isImg",value:function(){return this.hasAttachment("img")}},{key:"isMp4",value:function(){return this.hasAttachment("mp4")}},{key:"isMp3",value:function(){return this.hasAttachment("mp3")}},{key:"isLink",value:function(){return this.hasAttachment("link")}},{key:"normalize",value:function(){var t=h()(m.a.mark(function t(){var e,a,n,s,r,o;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=null,!(e=this)||!e.value){t.next=30;break}if("ipfs"!=e.type){t.next=8;break}e.type="url",e.value="https://gateway.ipfs.io/ipfs/"+e.value,t.next=28;break;case 8:if("url"!=e.type){t.next=28;break}if("youtu.be"==(n=Et(e.value))&&(s=e.value.split("/"),e.value="https://www.youtube.com/watch?v="+s[s.length-1],n="youtube.com"),"youtube.com"!=n&&"www.youtube.com"!=n){t.next=15;break}return t.next=14,Pt("https://www.youtube.com/oembed?format=json&url="+e.value);case 14:a=t.sent;case 15:if("i.imgur.com"==n&&(e.display="img"),"i.redd.it"==n&&(e.display="img"),"twitter.com"==n&&(e.value="https://twitframe.com/show?url="+e.value,e.width=560,e.height=400,e.display="iframe"),"d.tube"!=n){t.next=23;break}return r=e.value.replace("/#!/","/"),t.next=22,Pt("https://api.d.tube/oembed?url="+r);case 22:a=t.sent;case 23:if("soundcloud.com"!=n){t.next=27;break}return t.next=26,Pt("https://soundcloud.com/oembed?format=json&url="+e.value);case 26:a=t.sent;case 27:"bitchute.com"!=n&&"www.bitchute.com"!=n||(o=e.value.match(/video\/[a-zA-Z0-9]+/))&&o.length>0&&(e.width=560,e.height=315,e.value="https://www.bitchute.com/embed/"+o[0].substring(6),e.display="iframe");case 28:"link"==e.display&&(e.value.endsWith(".png")||e.value.endsWith(".jpg")||e.value.endsWith(".jpeg")||e.value.endsWith(".gif"))&&(e.display="img"),"iframe"==e.display&&(0==e.value.indexOf("http:")&&(e.value="https:"+e.value.substring(5)),e.width||e.height||(e.width=560,e.height=315));case 30:a&&(e.thumbnail=a.thumbnail,e.width=a.width,e.height=a.height,e.value=a.src,e.display="iframe"),"img"!=e.display||e.thumbnail||(e.thumbnail=e.value);case 32:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),t}(),Nt=function(){function t(e){q()(this,t),e=F()({name:"",pub:"",sig:""},e),this.name=e.name?e.name:"",this.pub=e.pub?e.pub:"",this.sig=e.sig?e.sig:"",this.verified=!1}return T()(t,[{key:"verify",value:function(t){this.sig&&this.pub&&(this.verified=z.a.verify(this.sig,t,this.pub,"utf8"))}}]),t}(),Bt=function t(e){if(q()(this,t),"string"==typeof e)try{e=JSON.parse(e)}catch(t){}e=F()({title:"",sub:"",parent_uuid:"",parent_poster:"",edit:!1,attachment:null,reddit:null,anon_id:null},e),this.type=e.type,this.title=e.title,this.sub=e.sub,this.parent_uuid=e.parent_uuid,this.parent_poster=e.parent_poster,this.edit=!!e.edit,this.attachment=new Mt(e.attachment),this.reddit=new function t(e){q()(this,t),this.author="",this.permalink="",e&&e.author&&e.permalink&&(this.author=e.author,this.permalink=e.permalink)}(e.reddit),this.anon_id=new Nt(e.anon_id)},Rt=function t(e,a){q()(this,t),e=F()({poster:"",post_uuid:"",content:"",reply_to_poster:"",reply_to_post_uuid:"",certify:0,json_metadata:null,tags:[]},e),this.poster=e.poster,this.post_uuid=e.post_uuid,this.content=e.content,this.reply_to_poster=e.reply_to_poster,this.reply_to_post_uuid=e.reply_to_post_uuid,this.certify=e.certify,this.json_metadata=new Bt(e.json_metadata),this.json_metadata.anon_id.verify(this.content)},Ft=function(){var t=h()(m.a.mark(function t(){var e,a;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=(new Date).getTime(),!(null==Dt||e-Dt.last>=6e4)){t.next=8;break}return t.t0=JSON,t.next=5,E("https://s3.amazonaws.com/api.eosvotes.io/eosvotes/tallies/latest.json");case 5:t.t1=t.sent,a=t.t0.parse.call(t.t0,t.t1),Dt={last:e,active:a};case 8:return t.abrupt("return",Dt);case 9:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),It=function(){var t=h()(m.a.mark(function t(e,a){var n,s,r,o,i;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",null);case 2:if(!(a&&a.content||"post"!=a.name)){t.next=4;break}return t.abrupt("return",a);case 4:return n=xt(),t.next=7,n.getTransaction(e);case 7:s=t.sent,r=s.trx.trx.actions[0].data,o=new at(r),i={poster:o.readName(),post_uuid:o.readString(),content:o.readString(),reply_to_poster:o.readName(),reply_to_post_uuid:o.readString(),certify:o.readVarInt(),json_metadata:o.readString()};try{i.json_metadata=JSON.parse(i.json_metadata)}catch(t){}return t.abrupt("return",i);case 13:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),Ut=["referendum-v1","poll-yn-v1","poll-yna-v1","options-v1","multi-select-v1"],Ot=["no","yes"],zt=["no","yes","abstain"],Dt=null,Vt=function(){function t(e){if(q()(this,t),e&&"propose"==e.name){var a=e.data;e.referendum={type:e.data.proposal_json.type||Ut[0],name:e.data.proposal_name,expired:Array.isArray(e.expired)?e.expired.length>0:e.expired,expires_at:a.expires_at,options:[],details:null},Ut.some(function(t){return t==e.referendum.type})||(e.referendum.type=Ut[0]),e.referendum.type==Ut[0]||e.referendum.type==Ut[1]?e.referendum.options=Ot:e.referendum.type==Ut[2]?e.referendum.options=zt:e.referendum.type==Ut[3]?e.referendum.options=(e.data.proposal_json.options||Ot).slice(0,255):e.referendum.type==Ut[4]&&(e.referendum.options=(e.data.proposal_json.options||Ot).slice(0,8)),e.data={poster:a.proposer,post_uuid:"ref-"+e.transaction,content:a.proposal_json.content?a.proposal_json.content:"",reply_to_poster:"",reply_to_post_uuid:"",certify:0,json_metadata:{title:a.title,type:"novusphere-forum",sub:"referendum",parent_uuid:"",parent_poster:"",edit:!1,attachment:{value:"",type:"",display:""}}}}e=F()({score:0,createdAt:0,transaction:"",name:"post",id:0,data:null,up:0,up_atmos:0,total_replies:0,recent_edit:null,parent:null,my_vote:null,referendum:null,tags:[]},e),this._post=e,this.score=e.score,this.parent=null,this.depth=0,this.is_pinned=!1,this.new_replies=0,this.children=[],this.createdAt=e.createdAt,this.transaction=e.transaction,this.id=e.id,this.up=e.up,this.total_replies=e.total_replies,this.my_vote=e.my_vote,this.referendum=e.referendum,this.tags=e.tags,G.settings.atmos_upvotes&&(this.up=Math.floor(this.up+(e.up_atmos?e.up_atmos:0))),this.data=new Rt(null,this.createdAt),this.o_transaction=this.transaction,this.o_id=this.id,this.o_attachment=new Mt(this.data.json_metadata.attachment)}return T()(t,null,[{key:"fromArray",value:function(){var e=h()(m.a.mark(function e(a){var n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.map(function(e){return e instanceof t?e:new t(e)}),e.next=3,k.a.all(n.map(function(t){return t.normalize()}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"threadify",value:function(){var e=h()(m.a.mark(function e(a,n){var s,r,o,i,c,u;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.splice(0,0,a),e.next=3,t.fromArray(n);case 3:n=e.sent,s={},r=0,o=0;case 7:if(!(o<n.length)){e.next=26;break}if(i=n[o],s[i.data.post_uuid]=i,!(o>0)){e.next=23;break}if(i.parent=a,c=(c=i.data.json_metadata.parent_uuid)||a.data.post_uuid,u=s[c],!i.data.json_metadata.edit){e.next=21;break}if(!(i.data.poster==u.data.poster&&i.createdAt>u.createdAt)){e.next=19;break}return e.next=19,u.applyEdit(i);case 19:e.next=23;break;case 21:r++,u.addChild(i);case 23:o++,e.next=7;break;case 26:for(o=0;o<n.length;o++)n[o].children.sort(function(t,e){return e.score-t.score});return e.abrupt("return",r);case 28:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()}]),T()(t,[{key:"normalize",value:function(){var e=h()(m.a.mark(function e(){var a,n,s,r,o,i,c,u,l,p,d;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._post){e.next=2;break}return e.abrupt("return");case 2:return a=this._post,this._post=null,e.next=6,It(a.transaction,a.data);case 6:if(a.data=e.sent,this.data=new Rt(a.data,this.createdAt),this.o_attachment=new Mt(this.data.json_metadata.attachment),!a.recent_edit){e.next=12;break}return e.next=12,this.applyEdit(a.recent_edit);case 12:if(!a.parent){e.next=17;break}return this.parent=new t(a.parent),e.next=16,this.parent.normalize();case 16:this.data.json_metadata.title=this.parent.data.json_metadata.title;case 17:if(!a.referendum){e.next=42;break}return isNaN(a.referendum.expires_at)&&(a.referendum.expires_at=new Date(a.referendum.expires_at).getTime()/1e3),a.referendum.expires_at<=(new Date).getTime()/1e3&&(a.referendum.expired=!0),e.next=22,Ft();case 22:for(n=e.sent,s=n.active,r=s[this.referendum.name],o={},i=0;i<a.referendum.options.length;i++)o[i]={value:0,percent:0};if(!r){e.next=41;break}c=r.stats.staked.total,a.referendum.type==Ut[4]&&(c=0),e.t0=m.a.keys(r.stats.staked);case 31:if((e.t1=e.t0()).done){e.next=40;break}if("total"!=(u=e.t1.value)){e.next=35;break}return e.abrupt("continue",31);case 35:if(l=r.stats.staked[u],l=(isNaN(l)?0:parseInt(l))/1e4,a.referendum.type==Ut[4])for(i=0;i<a.referendum.options.length;i++)0!=(u&1<<i)&&(i in o?o[i].value+=l:o[i]={value:l,percent:0},c+=1e4*l);else u in o&&(o[u].value=l);e.next=31;break;case 40:for(u in o)p=o[u].value,d=c>0?100*p/(c/1e4):0,o[u].percent=d.toFixed(1);case 41:this.referendum.details={votes:o,total_participants:r?r.stats.votes.total:0,total_eos:(r?r.stats.staked.total:0)/1e4};case 42:if(this.data.json_metadata.attachment.value){e.next=45;break}return e.next=45,this.detectAttachment();case 45:return e.next=47,this.data.json_metadata.attachment.normalize();case 47:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"detectAttachment",value:function(){var t=h()(m.a.mark(function t(){var e,a,n,s,r,o;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=this.data.json_metadata.attachment,a=function(t,a,n){e.value=t,e.type=a,e.display=n},n=[{match:/https:\/\/youtu.be\/[a-zA-Z0-9-_]+/,handle:function(t){return a(t[0],"url","iframe")}},{match:/https:\/\/www.youtube.com\/watch\?v=[a-zA-Z0-9-_]+/,handle:function(t){return a(t[0],"url","iframe")}}],s=0;case 4:if(!(s<n.length)){t.next=13;break}if(r=n[s],!((o=this.data.content.match(r.match))&&o.length>0)){t.next=10;break}return r.handle(o),t.abrupt("break",13);case 10:s++,t.next=4;break;case 13:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"applyEdit",value:function(){var t=h()(m.a.mark(function t(e){return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,It(e.transaction,e.data);case 2:e.data=t.sent,this.createdAt=e.createdAt,this.transaction=e.transaction,this.id=e.id,this.data.content=e.data.content,this.data.json_metadata.edit=!0,e.data.json_metadata.title&&(this.data.json_metadata.title=e.data.json_metadata.title),e.data.json_metadata.attachment&&(this.data.json_metadata.attachment=new Mt(e.data.json_metadata.attachment));case 10:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getTitle",value:function(){var t=this.data.json_metadata.title;return!t&&this.parent&&this.parent.data.json_metadata.title&&(t=this.parent.data.json_metadata.title),t||(t="untitled"),t}},{key:"getUrlTitle",value:function(){var t=this.getTitle();return t=t.replace(/ /g,"_")}},{key:"addChild",value:function(t){t.depth=this.depth+1,this.children.push(t)}}]),t}(),Lt=10,Gt=["Did you know you in your **settings** you can toggle between a day and night theme?","Did you know you in your **settings** you can set delegated moderators to help filter spam?","Did you know you can block users who post spam by clicking their name to visit their profile and then clicking block?","Did you know you can post without an account in any of the **anon-** subs?"];window.__PRESETS__&&window.__PRESETS__.default_sub&&window.__PRESETS__.default_sub;var Ht={novusphere:{title:"A decentralized forum",logo:"https://cdn.novusphere.io/static/atmos.svg",icon:"https://cdn.novusphere.io/static/atmos2.png",banner:"",token_symbol:"ATMOS",token_contract:"novusphereio"},eoscafe:{title:"A decentralized coffee lover's forum",logo:"https://cdn.discordapp.com/attachments/522320367293825036/522320438161047552/icon-1.png",icon:"https://cdn.discordapp.com/attachments/522320367293825036/522320438161047552/icon-1.png",banner:"https://cdn.discordapp.com/attachments/522320367293825036/523167806607589386/image0.jpg",token_symbol:"EOS",token_contract:"eosio.token"},eos:{title:"EOS Community",logo:"https://cdn.novusphere.io/static/eos3.svg",icon:"https://cdn.novusphere.io/static/eos3.png",banner:"",token_symbol:"EOS",token_contract:"eosio.token"}},Jt=F()({},Ht.novusphere);if(window.__PRESETS__){var Wt=window.__PRESETS__;Wt.header_texts&&(Gt=Wt.header_texts),Wt.default_sub&&Wt.default_sub,Wt.brand&&(Jt=Wt.brand)}var Yt=function(){var t=h()(m.a.mark(function t(e,a){var n,s,r,o,i,c,u,l,p;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=parseInt(e||1),n=Q(),s={name:"propose",createdAt:{$gte:1537221139}},r={from:"eosforum",let:{proposal_name:"$data.proposal_name",createdAt:"$createdAt"},pipeline:[{$match:{name:"clnproposal"}},{$project:{txid:"$transaction",test:{$and:[{$eq:["$data.proposal_name","$$proposal_name"]},{$gte:["$createdAt","$$createdAt"]}]}}},{$match:{test:!0}}],as:"expired"},(new Date).getTime()/1e3,o={"expired.0":{$exists:"old"==a}},t.next=8,n.api({aggregate:"eosforum",maxTimeMS:5e3,cursor:{},pipeline:[{$match:s},{$lookup:r},{$match:o},{$count:"n"}]});case 8:return i=t.sent.cursor.firstBatch[0].n,c=Math.ceil(i/25),t.next=12,n.api({aggregate:"eosforum",maxTimeMS:5e3,cursor:{},pipeline:[{$match:s},{$lookup:r},{$match:o},{$sort:n.query.sort.time()},{$skip:n.query.skip.page(e,25)},{$limit:25},{$lookup:n.query.lookup.threadReplies(!0)},{$project:n.query.project.post({total_replies:!0})}]});case 12:u=t.sent.cursor.firstBatch,new Date,l=0;case 15:if(!(l<u.length)){t.next=23;break}return p=new Vt(u[l]),t.next=19,p.normalize();case 19:u[l]=p;case 20:l++,t.next=15;break;case 23:return t.abrupt("return",{sub:"referendum",posts:u,pages:c,current_page:e});case 24:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),Kt=function(){var t=h()(m.a.mark(function t(e,a,n){var s,r,o,i,c,u,l,p,d,f;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!a||"referendum"!=a.toLowerCase()){t.next=2;break}return t.abrupt("return",Yt(e,n));case 2:if(e=parseInt(e||1),a||(a=G.subscribed_subs),s=Q(),!G.moderation.hide_spam_threads){t.next=11;break}return t.next=8,Tt.getBlockedAccounts();case 8:t.t0=t.sent,t.next=12;break;case 11:t.t0=[];case 12:return r=t.t0,t.next=15,s.api({count:s.config.collection_forum,maxTimeMS:1e3,query:s.query.match.threadsBySub(a,r)});case 15:return o=t.sent.n,i=Math.ceil(o/25),t.next=19,vt();case 19:return c=t.sent,t.next=22,s.api({aggregate:s.config.collection_forum,maxTimeMS:1e3,cursor:{},pipeline:[{$match:s.query.match.threadsBySub(a,r)},{$lookup:s.query.lookup.postState()},{$project:s.query.project.post({normalize_up:!0,normalize_parent:!0,score:!0})},{$sort:n},{$skip:s.query.skip.page(e,25)},{$limit:25},{$lookup:s.query.lookup.threadReplies()},{$lookup:s.query.lookup.postMyVote(c.account)},{$project:s.query.project.post({normalize_my_vote:!0,recent_edit:!0,total_replies:!0,score:!1})}]});case 22:return u=t.sent.cursor.firstBatch,console.log(n),t.t1=s,t.t2=s.config.collection_forum,t.t3={},t.t4=s.query.match,t.next=30,Tt.getPinned(a);case 30:return t.t5=t.sent,t.t6=t.t4.threadById.call(t.t4,t.t5),t.t7={$match:t.t6},t.t8={$lookup:s.query.lookup.postState()},t.t9={$project:s.query.project.post({normalize_up:!0,normalize_parent:!0})},t.t10={$lookup:s.query.lookup.threadReplies()},t.t11={$lookup:s.query.lookup.postMyVote(c.account)},t.t12={$project:s.query.project.post({normalize_my_vote:!0,recent_edit:!0,total_replies:!0})},t.t13=[t.t7,t.t8,t.t9,t.t10,t.t11,t.t12],t.t14={aggregate:t.t2,maxTimeMS:1e3,cursor:t.t3,pipeline:t.t13},t.next=42,t.t1.api.call(t.t1,t.t14);case 42:return l=t.sent.cursor.firstBatch,t.next=45,Vt.fromArray($t()(l,u.filter(function(t){return!l.find(function(e){return e.id==t.id})})));case 45:for(u=t.sent,p=0;p<u.length;p++)d=u[p],p<l.length&&(d.is_pinned=!0),(f=G.new_posts[d.data.post_uuid])&&isNaN(f)&&(f=f.replies),d.new_replies=void 0==f?d.total_replies+1:d.total_replies-f,d.new_replies=Math.max(d.new_replies,0);return t.abrupt("return",{is_subscribed:G.subscribed_subs.includes(a),posts:u,pages:i,current_page:e,sub:Array.isArray(a)?"":a});case 48:case"end":return t.stop()}},t,this)}));return function(e,a,n){return t.apply(this,arguments)}}(),Qt=function(){var t=h()(m.a.mark(function t(e,a,n){var s,r,o,i,c;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=parseInt(e||1),a=a.toLowerCase(),s=Q(),t.next=5,s.api({count:s.config.collection_forum,maxTimeMS:1e3,query:s.query.match.postsByTag(a)});case 5:return r=t.sent.n,o=Math.ceil(r/25),t.next=9,vt();case 9:return i=t.sent,t.next=12,s.api({aggregate:s.config.collection_forum,maxTimeMS:1e3,cursor:{},pipeline:[{$match:s.query.match.postsByTag(a)},{$lookup:s.query.lookup.postState()},{$lookup:s.query.lookup.postParent()},{$project:s.query.project.post({normalize_up:!0,normalize_parent:!0,score:!0})},{$sort:n},{$skip:s.query.skip.page(e,25)},{$limit:25},{$lookup:s.query.lookup.postReplies()},{$lookup:s.query.lookup.postMyVote(i.account)},{$project:s.query.project.post({normalize_my_vote:!0,recent_edit:!0})},{$match:s.query.match.validParent()}]});case 12:return c=t.sent.cursor.firstBatch,t.next=15,Vt.fromArray(c);case 15:return c=t.sent,t.abrupt("return",{posts:c,pages:o,current_page:e,tag:a});case 17:case"end":return t.stop()}},t,this)}));return function(e,a,n){return t.apply(this,arguments)}}(),Zt=function(){var t=h()(m.a.mark(function t(e){var a,n,s,r,o,i;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=Q(),t.next=3,vt();case 3:return n=t.sent,t.next=6,a.api({aggregate:a.config.collection_forum,maxTimeMS:1e3,cursor:{},pipeline:[{$match:{transaction:e}},{$lookup:a.query.lookup.postState()},{$lookup:a.query.lookup.postMyVote(n.account)},{$project:a.query.project.post({normalize_up:!0,normalize_my_vote:!0})}]});case 6:return s=t.sent.cursor.firstBatch[0],s=new Vt(s),t.next=10,s.normalize();case 10:return t.next=12,a.api({find:a.config.collection_forum,maxTimeMS:1e3,filter:a.query.match.postEdits(s.data.poster,s.data.post_uuid),sort:a.query.sort.time(!0)});case 12:return r=t.sent.cursor.firstBatch,t.next=15,Vt.fromArray(r);case 15:for(r=t.sent,o=0;o<r.length;o++)(i=r[o]).up=s.up,i.my_vote=s.my_vote,s.addChild(i);return t.abrupt("return",{main_post:s});case 18:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),Xt=function(){var t=h()(m.a.mark(function t(e,a){var n,s,r,o,i,c,u,l,p,d,f,_,h;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=Q(),t.next=3,vt();case 3:return s=t.sent,t.next=6,n.api({aggregate:n.config.collection_forum,maxTimeMS:1e3,cursor:{},pipeline:[{$match:n.query.match.threadById(e)},{$lookup:n.query.lookup.postState()},{$lookup:n.query.lookup.postMyVote(s.account)},{$project:n.query.project.post({normalize_up:!0,normalize_my_vote:!0})}]});case 6:return r=t.sent.cursor.firstBatch[0],r=new Vt(r),t.next=10,r.normalize();case 10:if(10239!=r.data.content.length){t.next=15;break}return t.next=13,n.api({aggregate:n.config.collection_nsdb,maxTimeMS:1e3,cursor:{},pipeline:[{$match:{"data.account":r.data.poster,"data.json.method":"content_ext","data.json.data.post_uuid":r.data.post_uuid}}]});case 13:(o=t.sent.cursor.firstBatch[0])&&(r.data.content+=o.data.json.data.content);case 15:i=G.new_posts[r.data.post_uuid],r.__seen=i?i.seen:(new Date).getTime()/1e3,c=[],u=0;case 19:return t.next=21,n.api({aggregate:n.config.collection_forum,maxTimeMS:1e3,cursor:{},pipeline:[{$match:n.query.match.threadReplies(r.data.post_uuid)},{$lookup:n.query.lookup.postState()},{$lookup:n.query.lookup.postMyVote(s.account)},{$project:n.query.project.post({normalize_up:!0,normalize_my_vote:!0})},{$skip:u}]});case 21:for(l=t.sent.cursor.firstBatch,u+=l.length,p=0;p<l.length;p++)c.push(l[p]);if(l&&0!=l.length&&!(l.length<100)){t.next=26;break}return t.abrupt("break",28);case 26:t.next=19;break;case 28:return t.next=30,Vt.threadify(r,c);case 30:return d=t.sent,c.splice(0,0,r),t.next=34,Vt.fromArray(c);case 34:return c=t.sent,G.new_posts[r.data.post_uuid]={title:r.data.json_metadata.title,sub:r.data.json_metadata.sub,id:r.o_id,replies:d,seen:parseInt((new Date).getTime()/1e3)},J(),f=r,a&&(_=function t(e){for(var a=0;a<e.children.length;a++){var n=e.children[a];n.depth=e.depth+1,t(n)}return e},64==a.length?h=c.find(function(t){return t.transaction==a}):(a=parseInt(a),h=c.find(function(t){return t.o_id==a})),h.parent=r,h.depth=0,h.data.json_metadata.title=r.data.json_metadata.title,r=_(h)),t.abrupt("return",{opening_post:f,main_post:r});case 40:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),te=function(){var t=h()(m.a.mark(function t(e){var a,n,s,r,o;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=parseInt(e||1),a=Q(),t.next=4,vt();case 4:if((n=t.sent).account){t.next=7;break}return t.abrupt("return",{current_page:1,pages:0,posts:[]});case 7:return t.next=9,a.api({count:a.config.collection_forum,maxTimeMS:1e3,query:a.query.match.notifications(n.account)});case 9:return s=t.sent.n,r=Math.ceil(s/25),t.next=13,a.api({aggregate:a.config.collection_forum,maxTimeMS:5e3,cursor:{},pipeline:[{$match:a.query.match.notifications(n.account)},{$lookup:a.query.lookup.postState()},{$lookup:a.query.lookup.postParent()},{$project:a.query.project.post({normalize_up:!0,normalize_parent:!0})},{$sort:a.query.sort.time()},{$skip:a.query.skip.page(e,25)},{$limit:25},{$lookup:a.query.lookup.postReplies()},{$lookup:a.query.lookup.postMyVote(n.account)},{$project:a.query.project.post({normalize_my_vote:!0,recent_edit:!0})},{$match:a.query.match.validParent()}]});case 13:return o=t.sent.cursor.firstBatch,t.next=16,Vt.fromArray(o);case 16:return o=t.sent,t.abrupt("return",{current_page:e,pages:r,posts:o});case 18:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),ee=function(){var t=h()(m.a.mark(function t(e,a,n){var s,r,o,i,c,u,l,p,d,f;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=parseInt(e||1),t.next=3,Tt.isBlocked(0,null,a);case 3:return s=t.sent,r=xt(),o=Q(),t.t0=parseFloat,t.next=9,r.getCurrencyBalance("novusphereio",a,"ATMOS");case 9:return t.t1=t.sent[0],i=(0,t.t0)(t.t1),i=(isNaN(i)?0:i).toFixed(3),t.next=14,o.api({count:o.config.collection_forum,maxTimeMS:1e4,query:o.query.match.postsByAccount(a,!0)});case 14:return c=t.sent.n,t.next=17,o.api({count:o.config.collection_forum,maxTimeMS:1e4,query:o.query.match.threadsByAccount(a)});case 17:return u=t.sent.n,l=Math.ceil((c+u)/25),t.next=21,vt();case 21:return p=t.sent,t.next=24,o.api({aggregate:o.config.collection_forum,maxTimeMS:1e4,cursor:{},pipeline:[{$match:o.query.match.postsByAccount(a,!1)},{$lookup:o.query.lookup.postState()},{$lookup:o.query.lookup.postParent()},{$project:o.query.project.post({normalize_up:!0,normalize_parent:!0,score:!0})},{$sort:n},{$skip:o.query.skip.page(e,25)},{$limit:25},{$lookup:o.query.lookup.postReplies()},{$lookup:o.query.lookup.postMyVote(p.account)},{$project:o.query.project.post({normalize_my_vote:!0,recent_edit:!0})},{$match:o.query.match.validParent()}]});case 24:return d=t.sent.cursor.firstBatch,t.next=27,Vt.fromArray(d);case 27:return d=t.sent,f=d.length>0?new Date(1e3*d[0].createdAt).toLocaleString():"N/A",t.abrupt("return",{current_page:e,account:a,is_blocked:s,balance_atmos:i,n_comments:c,n_threads:u,last_activity:f,posts:d,pages:l});case 30:case"end":return t.stop()}},t,this)}));return function(e,a,n){return t.apply(this,arguments)}}(),ae=function(){var t=h()(m.a.mark(function t(){var e,a;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=Q(),t.next=3,e.api({aggregate:e.config.collection_forum,maxTimeMS:1e3,cursor:{},pipeline:[{$match:{"data.json_metadata.sub":{$exists:!0,$ne:""},"data.json_metadata.edit":!1}},{$group:{_id:"$data.json_metadata.sub",count:{$sum:1}}},{$sort:{count:-1}}]});case 3:return a=t.sent.cursor.firstBatch,t.abrupt("return",{subs:a});case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),ne=function(){var t=h()(m.a.mark(function t(e){return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("anon-r-eos"!=e){t.next=3;break}throw"You cannot make new threads in this sub from eos-forum";case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),se=function(){var t=h()(m.a.mark(function t(e,a){var n;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=8;break}if(!G.subscribed_subs.includes(a)){t.next=3;break}return t.abrupt("return");case 3:return G.subscribed_subs.push(a),J(),t.abrupt("return",!0);case 8:if(!((n=G.subscribed_subs.indexOf(a))<0)){t.next=11;break}return t.abrupt("break",14);case 11:G.subscribed_subs.splice(n,1);case 12:t.next=8;break;case 14:return J(),t.abrupt("return",!1);case 16:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),re=function(){var t=h()(m.a.mark(function t(){return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,vt();case 2:t.sent.notifications=0,G.last_notification=(new Date).getTime()/1e3,J();case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),oe=function(){var t=h()(m.a.mark(function t(e,a){var n;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a?(n=G.moderation.accounts.indexOf(e))>-1&&G.moderation.accounts.splice(n,1):G.moderation.accounts.push(e),J();case 2:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),ie=function(){var t=h()(m.a.mark(function t(e,a){var n,s,r,o,i;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=parseFloat(a),!(isNaN(a)||a<=0)){t.next=3;break}throw"Invalid quantity of atmos";case 3:return t.next=5,vt();case 5:return n=t.sent,xt(),[{actor:n.account,permission:n.auth}],s="upvote for "+e.o_transaction,r=(a/(n.account==e.data.poster?1:2)).toFixed(3)+" ATMOS",t.prev=10,o=[],n.account!=e.data.poster&&o.push({contract:"novusphereio",name:"transfer",data:{from:n.account,to:e.data.poster,quantity:r,memo:s}}),o.push({contract:"novusphereio",name:"transfer",data:{from:n.account,to:"novuspheredb",quantity:r,memo:s}}),t.next=16,yt(o);case 16:t.sent,t.next=23;break;case 19:throw t.prev=19,t.t0=t.catch(10),console.log(t.t0),"Error: upvote transaction failed!";case 23:return i=Math.floor(a/Lt),t.abrupt("return",parseInt(e.up)+i);case 25:case"end":return t.stop()}},t,this,[[10,19]])}));return function(e,a){return t.apply(this,arguments)}}(),ce=function(){var t=h()(m.a.mark(function t(e){var a,n;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,vt();case 2:if((a=t.sent).account){t.next=5;break}throw"You must be logged in to upvote comments!";case 5:return n={contract:"novuspheredb",name:"push",data:{account:a.account,json:S()({protocol:"novusphere",method:"forum_vote",data:{txid:e.o_transaction}})}},t.next=8,yt(n);case 8:return t.sent,e.my_vote||(e.my_vote={account:a.account,txid:e.o_transaction}),t.abrupt("return",(e.up?e.up:0)+1);case 11:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),ue=function(){var t=h()(m.a.mark(function t(){var e;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=JSON,t.next=3,E("https://raw.githubusercontent.com/Novusphere/eos-forum-mod-list/master/list.json");case 3:return t.t1=t.sent,e=t.t0.parse.call(t.t0,t.t1),t.abrupt("return",e.list);case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),le=function(){var t=h()(m.a.mark(function t(e,a,n,s,r,o){var i,c,u,l,p,d,f,_,h,v,b,y,g,k,w,x,C,$,A,q;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",!1);case 2:return r||(r=function(){}),i=Q(),t.next=6,vt();case 6:if(c=t.sent,e.poster=n?e.poster:c.account,t.prev=8,!n){t.next=26;break}if(!s){t.next=16;break}return t.next=13,confirm("Are you sure you want to post this anonymously?");case 13:if(t.sent){t.next=16;break}return r("Error: post canceled"),t.abrupt("return",!1);case 16:return t.next=18,i.anonymousPost(e);case 18:if(!(l=t.sent).error){t.next=23;break}return r(l.error),console.log(l.error),t.abrupt("return",!1);case 23:u=l.transaction_id,t.next=61;break;case 26:if(p=xt(),d=JSON.parse(e.json_metadata),f=e.content.match(/\#tip [0-9\.]+ [A-Z]+/gi),_=[{contract:"eosforumrcpp",name:"post",data:e}],!(f&&f.length>0&&!d.edit&&a)){t.next=56;break}return t.t0=JSON,t.next=34,E("https://raw.githubusercontent.com/eoscafe/eos-airdrops/master/tokens.json");case 34:t.t1=t.sent,h=t.t0.parse.call(t.t0,t.t1),h=[{name:"EOS",logo:"",logo_lg:"",symbol:"EOS",account:"eosio.token"},{name:"CRASH",logo:"",logo_lg:"",symbol:"CRASH",account:"eoscrashplay"}].concat(h),v=d.parent_poster,b=0;case 40:if(!(b<f.length)){t.next=56;break}if(y=f[b].split(" "),g=h.find(function(t){return t.symbol==y[2]})){t.next=46;break}return r("Error: could not find contract for tip symbol "+y[2]),t.abrupt("return",!1);case 46:return t.next=48,p.getCurrencyStats(g.account,g.symbol);case 48:k=t.sent,w=k[g.symbol].max_supply.split(" ")[0].split(".")[1].length,x=parseFloat(y[1]).toFixed(w),C={contract:g.account,name:"transfer",data:{from:c.account,to:v,quantity:x+" "+g.symbol,memo:"tip for "+a}},_.push(C);case 53:b++,t.next=40;break;case 56:return $=10240,e.content.length>=$&&(A=e.content.substring($-1),q=e.content.substring(0,$-1),e.content=q,_.push({contract:"novuspheredb",name:"push",data:{account:c.account,json:S()({protocol:"novusphere",method:"content_ext",data:{post_uuid:e.post_uuid,content:A}})}})),t.next=60,yt(_);case 60:u=t.sent;case 61:t.next=70;break;case 63:return t.prev=63,t.t2=t.catch(8),r("Creating tx and broadcasting to EOS... Failed!"),t.t2.pnp="pnp",alert(t.t2),console.log(t.t2),t.abrupt("return",!1);case 70:if(o){t.next=74;break}return r("Waiting for Novusphere to index..."),t.next=74,i.waitTx(u,500,1e3);case 74:return r(""),t.abrupt("return",u);case 76:case"end":return t.stop()}},t,this,[[8,63]])}));return function(e,a,n,s,r,o){return t.apply(this,arguments)}}(),pe=a("EKx1"),de=a.n(pe),fe={GetProposal:function(t){var e=this;return h()(m.a.mark(function a(){var n,s;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Q(),e.next=3,n.api({find:"eosforum",maxTimeMS:5e3,filter:{name:"propose",transaction:t}});case 3:return s=e.sent.cursor.firstBatch[0],e.abrupt("return",s);case 5:case"end":return e.stop()}},a,e)}))()},GetVotes:function(t){var e=this;return h()(m.a.mark(function a(){var n,s,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Q(),e.next=3,n.api({find:"eosforum",maxTimeMS:1e3,filter:{name:"vote","data.proposal_name":t.data.proposal_name,createdAt:{$gte:t.createdAt}},sort:n.query.sort.time()});case 3:return s=e.sent.cursor.firstBatch,e.next=6,n.api({find:"eosforum",maxTimeMS:1e3,filter:{name:"unvote","data.proposal_name":t.data.proposal_name,createdAt:{$gte:t.createdAt}},sort:n.query.sort.time()});case 6:return r=e.sent.cursor.firstBatch,e.abrupt("return",{votes:s,unvotes:r});case 8:case"end":return e.stop()}},a,e)}))()},Status:function(t){var e=this;return h()(m.a.mark(function a(){var n,s,r,o,i;return m.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return xt(),a.next=3,e.GetProposal(t);case 3:return n=a.sent,a.t0=JSON,a.next=7,E("https://s3.amazonaws.com/api.eosvotes.io/eosvotes/tallies/latest.json");case 7:return a.t1=a.sent,s=a.t0.parse.call(a.t0,a.t1),r=s[n.data.proposal_name],o=0,i=0,r&&(o=r.stats.staked[1],i=r.stats.staked[0],o=(isNaN(o)?0:parseInt(o))/1e4,i=(isNaN(i)?0:parseInt(i))/1e4),a.abrupt("return",{title:n.data.title,for:o,against:i,approval:o/Math.max(o+i,1),voters:r?r.stats.votes.total:-1});case 13:case"end":return a.stop()}},a,e)}))()},PushNewProposal:function(t){var e=this;return h()(m.a.mark(function a(){var n,s,r,o,i;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=function(t,e){for(var a=de()(t+e),n="",s=0;s<12;s++){var r=a.charCodeAt(s);n+=r>=48&&r<=57?String.fromCharCode(122-(r-48)):String.fromCharCode(r)}return n},!(t.title.length>1024)){e.next=3;break}throw"Title is too long, over limit by "+(1024-t.title.length)+" characters";case 3:if(!(t.content.length>3e4)){e.next=5;break}throw"Post is too long, over limit by "+(3e4-t.content.length)+" characters";case 5:return e.next=7,vt();case 7:return s=e.sent,r={proposer:s.account,proposal_name:n(s.account,t.content),title:t.title,proposal_json:S()({type:t.type,content:t.content,options:t.options}),expires_at:new Date(t.expires_at).getTime()/1e3},e.prev=9,e.next=12,yt({contract:"eosforumrcpp",name:"propose",data:r});case 12:o=e.sent,e.next=19;break;case 15:throw e.prev=15,e.t0=e.catch(9),console.log(e.t0),"Error: Failed to submit proposal!";case 19:return i=Q(),e.next=22,i.waitTx(o,500,1e3,"eosforum");case 22:return e.abrupt("return",o);case 23:case"end":return e.stop()}},a,e,[[9,15]])}))()},CleanProposal:function(t){var e=this;return h()(m.a.mark(function a(){var n,s,r;return m.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.GetProposal(t);case 2:return n=a.sent,s={contract:"eosforumrcpp",name:"clnproposal",data:{proposal_name:n.data.proposal_name,max_count:4294967295}},a.next=6,yt(s);case 6:return r=a.sent,a.abrupt("return",r);case 8:case"end":return a.stop()}},a,e)}))()},Expire:function(t){var e=this;return h()(m.a.mark(function a(){var n,s,r,o;return m.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.GetProposal(t);case 2:return n=a.sent,s={contract:"eosforumrcpp",name:"expire",data:{proposal_name:n.data.proposal_name}},a.next=6,yt(s);case 6:return r=a.sent,o=Q(),a.next=10,o.waitTx(r,500,1e3,"eosforum");case 10:case"end":return a.stop()}},a,e)}))()},Vote:function(t,e){var a=this;return h()(m.a.mark(function n(){var s,r,o,i;return m.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,vt();case 2:return s=n.sent,n.next=5,a.GetProposal(t);case 5:return r=n.sent,o={contract:"eosforumrcpp",name:"vote",data:{voter:s.account,proposal_name:r.data.proposal_name,vote:e,vote_json:""}},n.next=9,yt(o);case 9:return i=n.sent,n.abrupt("return",i);case 11:case"end":return n.stop()}},n,a)}))()}},me=a("DlMc"),_e=a("HKE2"),he=a.n(_e),ve=["A","B","BLOCKQUOTE","CODE","DEL","DD","DL","EM","H1","H2","H3","H4","I","IMG","KBD","LI","OL","P","PRE","S","SUP","SUB","STRONG","STRIKE","UL","BR","HR","#text"],be=new RegExp("javascript","i"),ye=new RegExp("vbscript","i"),ge=new RegExp("data","i"),ke=function(){function t(e,a){q()(this,t),this.text=(e||"").replace(/&#x200B;/g,""),this.html="",this.attachments=[],(void 0==a||a>=1538136731)&&(this.useTwitter=!0),this._generateHtml(),this._postProcess()}return T()(t,[{key:"_generateHtml",value:function(){var t,e,a=[];this.useTwitter&&a.push((t=function(t){return'<a href="\\#/u/'+t.trim().substring(1)+'">'+t+"</a>"},e=function(t){return'<a href="\\#/tag/'+t+'">#'+t+"</a>"},function(){return[{type:"lang",regex:"\\s([@][\\w_-]+)",replace:function(e,a,n){return"\\"===a?e:t(e)}},{type:"lang",regex:"\\B(\\\\)?#([a-zA-Z0-9_]+)\\b",replace:function(t,a,n){return"\\"===a?t:e(n)}},{type:"lang",regex:"\\\\@",replace:"@"}]}));var n=new he.a.Converter({extensions:a,simplifiedAutoLink:!0,requireSpaceBeforeHeadingText:!!this.useTwitter});this.html=n.makeHtml(this.text)}},{key:"_postProcess",value:function(){for(var t=i.a.parseHTML(this.html),e="",a=0;a<t.length;a++)e+=this._strip(t[a]);this.html=e}},{key:"_safeAttribute",value:function(t){return!t||0!=t.search(be)&&0!=t.search(ye)&&0!=t.search(ge)?t:"javascript:void(0)"}},{key:"_strip",value:function(t){if(t.children)for(var e=0;e<t.children.length;e++)this._strip(t.children[e]);if("SCRIPT"==t.nodeName)t.innerHTML="";else if(-1==ve.indexOf(t.nodeName)){"IFRAME"==t.nodeName&&this.attachments.push({value:this._safeAttribute(t.getAttribute("src")),width:this._safeAttribute(t.getAttribute("width")),height:this._safeAttribute(t.getAttribute("height")),display:"iframe",type:"url"});for(e=0;e<t.attributes.length;e++)t.attributes[e].value="";t.innerHTML="",t.style="display: none;"}if(t.attributes)for(e=0;e<t.attributes.length;e++)t.attributes[e].value=this._safeAttribute(t.attributes[e].value);return t.outerHTML?t.outerHTML:""}}]),t}();var we={GetRandomHeaderText:function(){return Gt[Math.floor(Math.random()*Gt.length)]},GenerateAnonData:function(){var t=h()(m.a.mark(function t(e){var a;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a={name:G.anon_id.name,pub:"",sig:""},G.anon_id.key){t.next=6;break}return t.next=4,z.a.randomKey();case 4:G.anon_id.key=t.sent,J();case 6:return G.anon_id.key&&z.a.isValidPrivate(G.anon_id.key)&&(a.pub=z.a.privateToPublic(G.anon_id.key),a.sig=z.a.sign(e,G.anon_id.key,"utf8")),t.abrupt("return",a);case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),PlaceholderPost:function(){return new Vt},UpvotesToAtmos:function(t){return t*Lt},AtmosToUpvotes:function(t){return t/Lt},IsAnonSub:function(t){return"anon"==t||0==t.indexOf("anon-")},GeneratePostUuid:function(){return Object(me.v4)()},ParseMarkdown:function(t,e){return new ke(t,e)},GetHost:function(t){if(0==t.indexOf("magnet:"))return"magnet link";var e=document.createElement("a");return e.href=t,e.host.toLowerCase()},Route:function(t,e){var a=F()({},t.query),n=F()({},t.params),s=t.name;return e.query&&(a=F()(a,e.query)),e.params&&(n=F()(n,e.params)),{name:s,query:a,params:n}},UpdateBrand:function(t){t&&(t=t.toLowerCase());var e=t&&t in Ht?Ht[t]:Ht.novusphere;F()(Jt,e)}};window.addEventListener("identityUpdate",h()(m.a.mark(function t(){var e,a,n,s,r,o;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=xt(),t.next=3,vt();case 3:return a=t.sent,t.t0=parseFloat,t.next=7,e.getCurrencyBalance("novusphereio",a.account,"ATMOS");case 7:if(t.t1=t.sent[0],n=(0,t.t0)(t.t1),s=n,"novusphereio"==Jt.token_contract&&"ATMOS"==Jt.token_symbol){t.next=16;break}return t.t2=parseFloat,t.next=14,e.getCurrencyBalance(Jt.token_contract,a.account,Jt.token_symbol);case 14:t.t3=t.sent[0],s=(0,t.t2)(t.t3);case 16:return r=Q(),t.next=19,r.api({aggregate:r.config.collection_forum,maxTimeMS:1e3,cursor:{},pipeline:[{$match:r.query.match.notifications(a.account,G.last_notification)},{$count:"n"}]});case 19:o=t.sent.cursor.firstBatch,a.atmos=(isNaN(n)?0:n).toFixed(3),a.token=(isNaN(s)?0:s).toFixed(3),a.notifications=o.length>0?o[0].n:0;case 23:case"end":return t.stop()}},t,this)})));var xe={views:{Home:Kt,Tag:Qt,Thread:Xt,UserNotifications:te,UserProfile:ee,PostHistory:Zt,Search:ae,Referendum:Yt},actions:{CheckCreateThread:ne,Subscribe:se,MarkNotificationsAsRead:re,BlockUser:oe,UpvotePaid:ie,UpvoteFree:ce,GetReccomendedModList:ue,PushNewPost:le,Referendum:fe},helpers:we},Ce={name:"UpvoteModal",mounted:function(){var t=this;return h()(m.a.mark(function e(){return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},e,t)}))()},computed:{upvotes:function(){return xe.helpers.AtmosToUpvotes(this.atmos)}},methods:{upvote:function(){var t=this;return h()(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,xe.actions.UpvotePaid(t.post,t.atmos);case 3:t.post.up=e.sent,i()("#upvoteModal").modal("hide"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t.error=e.t0;case 10:case"end":return e.stop()}},e,t,[[0,7]])}))()},modal:function(t){this.post=t,this.atmos=xe.helpers.UpvotesToAtmos(1),this.error="",i()("#upvoteModal").modal()}},data:function(){return{error:"",atmos:10,post:xe.helpers.PlaceholderPost()}}},$e={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{tabindex:"-1",role:"dialog",id:"upvoteModal"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v("Upvote post by "+t._s(t.post.data.poster))]),t._v(" "),t._m(0)]),t._v(" "),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"text-center"},[t._v("\n              You have already used your free up vote on this post, however, you can use your ATMOS to up vote it further.\n              Half of the ATMOS used to up vote this post will go to the poster and\n              the other half is send to novuspheredb account as a DAO fund.\n              If you are up voting your own post, the entire amount will be sent to the DAO fund.\n              Enter the amount of ATMOS you would like to use below.\n          ")]),t._v(" "),a("form",{staticClass:"mt-3"},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-2 col-form-label"},[t._v("ATMOS")]),t._v(" "),a("div",{staticClass:"col-sm-10"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.atmos,expression:"atmos"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.atmos},on:{input:function(e){e.target.composing||(t.atmos=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-2 col-form-label"},[t._v("Upvotes")]),t._v(" "),a("label",{staticClass:"col-sm-10 col-form-label"},[t._v(t._s(t.upvotes))])])]),t._v(" "),t.error?a("div",{staticClass:"text-center text-danger mt-3"},[a("p",[t._v(t._s(t.error))])]):t._e()]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button"},on:{click:function(e){t.upvote()}}},[t._v("upvote")]),t._v(" "),a("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button","data-dismiss":"modal"}},[t._v("close")])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])}]},Se={name:"App",components:{ErrorModal:y,ConfirmModal:C,UpvoteModal:a("VU/8")(Ce,$e,!1,null,null,null).exports},mounted:function(){window._VueApp=this},methods:{},computed:{},data:function(){return{}}},Ae={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("ErrorModal"),this._v(" "),e("ConfirmModal"),this._v(" "),e("UpvoteModal",{ref:"upvote"}),this._v(" "),e("router-view")],1)},staticRenderFns:[]},qe=a("VU/8")(Se,Ae,!1,null,null,null).exports,je=a("/ocq"),Te={name:"Test",mounted:function(){var t=this;return h()(m.a.mark(function e(){return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},e,t)}))()},methods:{},data:function(){return{}}},Pe={render:function(){var t=this.$createElement;return(this._self._c||t)("div")},staticRenderFns:[]},Ee=a("VU/8")(Te,Pe,!1,null,null,null).exports,Me={name:"Pager",props:{current_page:{type:Number,required:!0},pages:{type:Number,required:!0}},methods:{page:function(t){var e=xe.helpers.Route(this.$route,{query:{page:this.current_page+t}});this.$router.push(e)}},data:function(){return{}}},Ne={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.current_page>1?a("button",{staticClass:"btn btn-sm btn-outline-primary",on:{click:function(e){t.page(-1)}}},[a("font-awesome-icon",{attrs:{icon:["fas","arrow-left"]}}),t._v(" prev\n    ")],1):t._e(),t._v(" "),t.current_page<t.pages?a("button",{staticClass:"btn btn-sm btn-outline-primary",on:{click:function(e){t.page(1)}}},[t._v("\n        next "),a("font-awesome-icon",{attrs:{icon:["fas","arrow-right"]}})],1):t._e()])},staticRenderFns:[]},Be=a("VU/8")(Me,Ne,!1,null,null,null).exports,Re={name:"PostSorter",props:{change:{type:Function,required:!1,default:null},options:{type:Array,required:!1,default:function(){return["popular","time"]}},default_by:{type:String,required:!1,default:"popular"}},mounted:function(){var t=this;return h()(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.load();case 1:case"end":return e.stop()}},e,t)}))()},watch:{default_by:function(){this.load(),this.change&&this.change(this.by)},"$route.query.sort":function(){this.load(),this.change&&this.change(this.by)}},methods:{load:function(){var t=this.$route.query.sort;this.by=t&&this.options.includes(t)?t:this.default_by},setBy:function(t){var e=xe.helpers.Route(this.$route,{query:{sort:t}});this.$router.push(e)},getSorter:function(){var t=Q();return"popular"==this.by?t.query.sort.score():"time"==this.by?t.query.sort.time():this.by}},data:function(){return{by:"popular"}}},Fe={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dropdown d-inline-block"},[a("button",{staticClass:"btn btn-sm btn-outline-primary dropdown-toggle",attrs:{type:"button",id:"sortBy","data-toggle":"dropdown"}},[t._v("\n    "+t._s(t.by)+"\n  ")]),t._v(" "),a("div",{staticClass:"dropdown-menu"},t._l(t.options,function(e){return a("a",{key:e,staticClass:"dropdown-item",attrs:{href:"javascript:void(0)"},on:{click:function(a){t.setBy(e)}}},[t._v(t._s(e))])}))])},staticRenderFns:[]},Ie=a("VU/8")(Re,Fe,!1,null,null,null).exports,Ue=a("gRE1"),Oe=a.n(Ue),ze={name:"RecentlyVisited",mounted:function(){var t=this;return h()(m.a.mark(function e(){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=(a=Oe()(G.new_posts)).filter(function(t){return t.id}).sort(function(t,e){return e.seen-t.seen}).slice(0,5).map(function(t){return F()({},t)}),t.posts=a;case 3:case"end":return e.stop()}},e,t)}))()},methods:{},data:function(){return{posts:[]}}},De={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h3",[t._v("Recently Visited")]),t._v(" "),t._l(t.posts,function(e){return a("div",{key:e.id},[a("div",{staticClass:"divline"}),t._v(" "),a("div",{staticClass:"blocktxt"},[a("router-link",{attrs:{to:{name:"Thread",params:{id:e.id,sub:e.sub}}}},[t._v(t._s(e.title))])],1)])})],2)},staticRenderFns:[]},Ve=a("VU/8")(ze,De,!1,null,null,null).exports,Le={name:"PostAttachment",props:{attachment:{type:Object,required:!1,default:null},id:{type:String,required:!0},collapse:{type:Boolean,required:!0}},mounted:function(){var t=this;return h()(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.show_iframe=!t.collapse;case 1:case"end":return e.stop()}},e,t)}))()},computed:{iframe:function(){return this.hasAttachment("iframe")},img:function(){return this.hasAttachment("img")},mp4:function(){return this.hasAttachment("mp4")},mp3:function(){return this.hasAttachment("mp3")},link:function(){return this.hasAttachment("link")},any:function(){return this.attachment&&this.attachment.value&&this.attachment.display}},methods:{hasAttachment:function(t){return this.attachment.display==t}},data:function(){return{show_iframe:!1}}},Ge={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return this.attachment&&this.attachment.value?a("div",{class:this.collapse?"row collapse":"row",attrs:{id:this.id}},[a("div",{staticClass:"col-md-12"},[t.iframe?a("div",{staticClass:"text-center"},[a("iframe",{staticStyle:{"max-width":"100%"},attrs:{src:this.show_iframe?t.attachment.value:"",height:t.attachment.height,width:t.attachment.width,frameborder:"0",allow:"encrypted-media",allowfullscreen:""}})]):t._e(),t._v(" "),t.img?a("div",{staticClass:"text-center"},[a("a",{attrs:{href:t.attachment.value}},[a("img",{attrs:{src:t.attachment.value}})])]):t._e(),t._v(" "),t.mp4?a("div",{staticClass:"text-center"},[a("video",{staticStyle:{width:"100%"},attrs:{controls:""}},[a("source",{attrs:{src:t.attachment.value,type:"video/mp4"}})])]):t._e(),t._v(" "),t.mp3?a("div",{staticClass:"text-center"},[a("audio",{staticStyle:{width:"100%"},attrs:{controls:""}},[a("source",{attrs:{src:t.attachment.value,type:"audio/mpeg"}})])]):t._e(),t._v(" "),t.link?a("div",[a("div",{staticClass:"text-center"},[a("a",{attrs:{target:"_blank",href:t.attachment.value}},[t._v(t._s(t.attachment.value))])])]):t._e()])]):t._e()},staticRenderFns:[]},He={name:"Post",components:{PostAttachment:a("VU/8")(Le,Ge,!1,null,null,null).exports},props:{post:{type:Object,required:!0},thread:{type:Object,required:!1,default:null}},computed:{is_multi_referendum:function(){return this.post.referendum&&"multi-select-v1"==this.post.referendum.type},multi_vote_value:function(){for(var t=0,e=0;e<this.vote_value_multi.length;e++)this.vote_value_multi[e]&&(t|=1<<e);return t},is_edit:function(){return this.post.data.json_metadata.edit&&this.post.o_id!=this.post.id},is_mine:function(){return this.identity.account&&this.post.data.poster==this.identity.account},is_op:function(){return!this.post.data.reply_to_poster},offsite:function(){return"url"==this.post.o_attachment.type&&this.post.o_attachment.value?xe.helpers.GetHost(this.post.o_attachment.value):null},sub:function(){return this.thread?this.thread.data.json_metadata.sub:this.post.data.json_metadata.sub},thread_link:function(){var t=this.post.parent?this.post.parent.o_id:this.thread?this.thread.o_id||this.thread.o_transaction:this.post.o_id||this.post.o_transaction;return{name:"Thread",params:{sub:this.sub,id:t,title:this.thread?this.thread.getUrlTitle():this.post.getUrlTitle()}}},perma_link:function(){var t=this.thread_link;return t.params.child_id=this.post.o_id||this.post.o_transaction,t},post_content_html:function(){return new ke(this.post.data.content,this.post.createdAt).html},reddit:function(){return this.post.data.json_metadata.reddit},is_anon_alias:function(){return"eosforumanon"==this.post.data.poster&&this.post.data.json_metadata.anon_id.name},poster_name:function(){return this.reddit.author?this.reddit.author:this.is_anon_alias?this.post.data.json_metadata.anon_id.name.substring(0,12):this.post.data.poster},thumbnail:function(){var t=this.post.data.json_metadata.attachment.thumbnail;return t||(t=this.reddit.author?"https://cdn.novusphere.io/static/reddit.png":Jt.logo),t}},mounted:function(){var t=this;return h()(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vt();case 2:return t.identity=e.sent,e.next=5,Tt.isBlocked(t.post.createdAt,t.post.o_transaction,t.post.data.poster);case 5:if(t.is_spam=e.sent,e.t0=t.post.tags&&t.post.tags.includes("nsfw"),e.t0){e.next=14;break}if(e.t1=0==t.post.depth,!e.t1){e.next=13;break}return e.next=12,Tt.isNsfw(t.post.createdAt,t.post.o_transaction);case 12:e.t1=e.sent;case 13:e.t0=e.t1;case 14:t.is_nsfw=e.t0;case 15:case"end":return e.stop()}},e,t)}))()},methods:{showQuickEdit:function(){this.show_quick_edit=!this.show_quick_edit,this.quick_reply=this.show_quick_edit?this.post.data.content:"",this.show_quick_reply=!1},showQuickReply:function(){this.show_quick_reply=!this.show_quick_reply,this.show_quick_edit&&(this.quick_reply=""),this.show_quick_edit=!1},upvote:function(){var t=this;return h()(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.post.my_vote){e.next=3;break}return window._VueApp.$refs.upvote.modal(t.post),e.abrupt("return");case 3:return e.prev=3,e.next=6,xe.actions.UpvoteFree(t.post);case 6:t.post.up=e.sent,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(3),console.log(e.t0),alert(e.t0);case 13:case"end":return e.stop()}},e,t,[[3,9]])}))()},quickReply:function(t){var e=this;return h()(m.a.mark(function a(){var n,s,r,o,i;return m.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(n=e.quick_reply,s=e.post.data.json_metadata.attachment,e.setStatus("Generating post..."),!t){a.next=6;break}return a.next=6,M(100);case 6:if(a.t0=t?"eosforumanon":e.identity.account,a.t1=e.post.data.reply_to_poster||e.post.data.poster,a.t2=e.post.data.reply_to_post_uuid||e.post.data.post_uuid,a.t3=n,a.t4=xe.helpers.GeneratePostUuid(),a.t5=S.a,a.t6=e.sub,a.t7=e.post.data.post_uuid,a.t8=e.post.data.poster,a.t9=!!e.show_quick_edit,a.t10={value:e.show_quick_edit?s.value:"",type:e.show_quick_edit?s.type:"",display:e.show_quick_edit?s.display:""},!t){a.next=23;break}return a.next=20,xe.helpers.GenerateAnonData(n);case 20:a.t11=a.sent,a.next=24;break;case 23:a.t11=null;case 24:return a.t12=a.t11,a.t13={title:"",type:"novusphere-forum",sub:a.t6,parent_uuid:a.t7,parent_poster:a.t8,edit:a.t9,attachment:a.t10,anon_id:a.t12},a.t14=(0,a.t5)(a.t13),r={poster:a.t0,reply_to_poster:a.t1,reply_to_post_uuid:a.t2,certify:0,content:a.t3,post_uuid:a.t4,json_metadata:a.t14},e.setStatus("Waiting on confirmation / posting service..."),a.next=31,xe.actions.PushNewPost(r,e.post.transaction,t,!0,e.setStatus,!0);case 31:if(o=a.sent){a.next=34;break}return a.abrupt("return");case 34:if(!e.show_quick_edit){a.next=38;break}e.post.data.content=e.quick_reply,a.next=43;break;case 38:return i=new Vt({createdAt:parseInt((new Date).getTime()/1e3),transaction:o,id:0,name:"post",data:r}),a.next=41,i.normalize();case 41:i.depth=e.post.depth+1,e.post.children.splice(0,0,i);case 43:e.show_quick_reply=!1,e.show_quick_edit=!1,e.quick_reply="",e.setStatus("");case 47:case"end":return a.stop()}},a,e)}))()},setStatus:function(t){this.status=t},referendumColor:function(t){return t>=this.referendum_colors.length?this.referendum_colors[0]:this.referendum_colors[t]},referendumClean:function(){var t=this;return h()(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe.actions.Referendum.CleanProposal(t.post.transaction);case 2:case"end":return e.stop()}},e,t)}))()},referendumExpire:function(){var t=this;return h()(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe.actions.Referendum.Expire(t.post.transaction);case 2:case"end":return e.stop()}},e,t)}))()},referendumVote:function(){var t=this;return h()(m.a.mark(function e(){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.identity.account){e.next=3;break}return alert("You must be logged in to vote"),e.abrupt("return");case 3:if(!t.post.referendum.expired){e.next=6;break}return alert("This proposal has expired and can no longer be voted on"),e.abrupt("return");case 6:return e.next=8,xe.actions.Referendum.Vote(t.post.transaction,t.is_multi_referendum?t.multi_vote_value:t.vote_value);case 8:a=e.sent,alert("Snapshots are taken every hour, so it may take awhile before your vote is processed. Below is your transaction id. "+a,{title:"Thanks for voting!",text_class:"text-success"});case 10:case"end":return e.stop()}},e,t)}))()}},data:function(){return{vote_value_multi:[0,0,0,0,0,0,0,0],vote_value:0,referendum_colors:["#dc3545","#28a745","#98FB98","#48D1CC","#A52A2A","#9932CC","#FFE4E1","#FFDAB9"],status:"",identity:{},show_quick_reply:!1,show_quick_edit:!1,quick_reply:"",is_nsfw:!1,is_spam:!1}}},Je={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"post"},[a("div",{staticClass:"topwrap"},[a("div",{staticClass:"userinfo float-left"},[t.thread||t.post.referendum?t._e():a("div",{staticClass:"postthumbnail"},[a("img",{staticClass:"img-fluid",attrs:{src:t.thumbnail,alt:"thumbnail"}})]),t._v(" "),t.post.referendum?a("div",{staticClass:"text-center"},[a("div",[a("font-awesome-icon",{attrs:{icon:["fas","user"]}}),t._v(" \n                 "+t._s(t.post.referendum.details.total_participants)+"\n               ")],1)]):a("div",{staticClass:"text-center"},[a("a",{staticClass:"up",attrs:{href:"javascript:void(0)"},on:{click:function(e){t.upvote()}}},[a("font-awesome-icon",{attrs:{icon:["far","thumbs-up"]}}),t._v("\n                     "+t._s(t.post.up)+"\n                 ")],1)]),t._v(" "),a("div",{staticClass:"text-center"},[t.post.is_pinned?a("font-awesome-icon",{attrs:{icon:["fas","thumbtack"]}}):t._e(),t._v(" "),t.is_spam?a("font-awesome-icon",{attrs:{icon:["fas","exclamation-triangle"]}}):t._e(),t._v(" "),t.is_nsfw?a("font-awesome-icon",{attrs:{icon:["fas","eye-slash"]}}):t._e()],1)]),t._v(" "),a("div",{staticClass:"posttext float-left"},[t.offsite?a("p",[a("a",{staticClass:"title",attrs:{href:t.post.o_attachment.value}},[t._v("\n                    "+t._s(t.post.data.json_metadata.title)+"\n                 ")]),t._v(" "),t.offsite?a("span",{staticClass:"offsite"},[t._v("("+t._s(t.offsite)+")")]):t._e()]):a("p",[t.post.id?a("router-link",{staticClass:"title",attrs:{to:t.thread_link}},[t.post.referendum?a("span",[t._v("["+t._s(t.post.referendum.name)+"]")]):t._e(),t._v(" "),a("span",[t._v(t._s(t.post.data.json_metadata.title))])]):t._e()],1),t._v(" "),t.thread?a("post-attachment",{ref:"post_attachment",attrs:{attachment:t.post.data.json_metadata.attachment,id:"content-"+t.post.data.post_uuid,collapse:!1}}):t._e(),t._v(" "),a("p",{domProps:{innerHTML:t._s(t.post_content_html)}}),t._v(" "),t.post.referendum?a("div",[t._l(t.post.referendum.options,function(e,n){return a("div",{key:n,staticClass:"mb-1"},[t.identity.account&&!t.is_multi_referendum?a("input",{directives:[{name:"model",rawName:"v-model",value:t.vote_value,expression:"vote_value"}],staticClass:"form-check-input",attrs:{type:"radio",name:"vote"},domProps:{value:n,checked:t._q(t.vote_value,n)},on:{change:function(e){t.vote_value=n}}}):t._e(),t._v(" "),t.identity.account&&t.is_multi_referendum?a("input",{directives:[{name:"model",rawName:"v-model",value:t.vote_value_multi[n],expression:"vote_value_multi[i]"}],staticClass:"form-check-input",attrs:{type:"checkbox",name:"vote2"},domProps:{checked:Array.isArray(t.vote_value_multi[n])?t._i(t.vote_value_multi[n],null)>-1:t.vote_value_multi[n]},on:{change:function(e){var a=t.vote_value_multi[n],s=e.target,r=!!s.checked;if(Array.isArray(a)){var o=t._i(a,null);s.checked?o<0&&t.$set(t.vote_value_multi,n,a.concat([null])):o>-1&&t.$set(t.vote_value_multi,n,a.slice(0,o).concat(a.slice(o+1)))}else t.$set(t.vote_value_multi,n,r)}}}):t._e(),t._v(" "),a("div",{staticClass:"progress"},[a("div",{staticClass:"referendumbar progress-bar",style:"width: "+t.post.referendum.details.votes[n].percent+"%; background-color: "+t.referendumColor(n),attrs:{role:"progressbar"}},[t._v("\n                     "+t._s(e)+" ("+t._s(t.post.referendum.details.votes[n].percent)+"%)\n                   ")])])])}),t._v(" "),t.identity.account?a("div",{staticClass:"text-center"},[t.post.referendum.expired?t._e():a("a",{staticClass:"btn btn-sm btn-outline-primary",attrs:{href:"javascript:void(0)"},on:{click:function(e){t.referendumVote()}}},[t._v("vote")]),t._v(" "),t.post.referendum.expired||t.post.data.poster!=t.identity.account?t._e():a("a",{staticClass:"btn btn-sm btn-outline-secondary",attrs:{href:"javascript:void(0)"},on:{click:function(e){t.referendumExpire()}}},[t._v("expire")]),t._v(" "),t.post.data.poster==t.identity.account?a("a",{staticClass:"btn btn-sm btn-outline-secondary",attrs:{href:"javascript:void(0)"},on:{click:function(e){t.referendumClean()}}},[t._v("clean")]):t._e()]):t._e()],2):t._e()],1),t._v(" "),a("div",{staticClass:"clearfix"})]),t._v(" "),a("div",{staticClass:"postinfobot"},[a("div",{staticClass:"posted"},[a("ul",{staticClass:"list-inline"},[a("li",{staticClass:"list-inline-item"},[!t.thread&&t.post.transaction?a("router-link",{attrs:{to:t.thread_link}},[a("font-awesome-icon",{attrs:{icon:["fas","reply"]}}),t._v(" "),t.post.parent?t._e():a("span",[t._v(t._s(t.post.total_replies)+" comments")])],1):a("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){t.showQuickReply()}}},[a("font-awesome-icon",{attrs:{icon:["fas","reply"]}}),t._v("\n                         reply\n                     ")],1)],1),t._v(" "),t.post.referendum?a("li",{staticClass:"list-inline-item"},[a("img",{staticStyle:{display:"inline-block",height:"2em"},attrs:{src:"https://cdn.novusphere.io/static/eos3.svg"}}),t._v("\n                   "+t._s(t.post.referendum.details.total_eos.toFixed(4))+"\n                 ")]):t._e(),t._v(" "),t.is_mine&&t.thread&&!t.post.referendum?a("li",{staticClass:"list-inline-item"},[t.is_op?a("router-link",{attrs:{to:{name:"EditThread",params:{sub:t.sub,edit_id:t.post.o_transaction}}}},[a("font-awesome-icon",{attrs:{icon:["fas","edit"]}}),t._v("\n                     edit\n                   ")],1):a("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){t.showQuickEdit()}}},[a("font-awesome-icon",{attrs:{icon:["fas","edit"]}}),t._v("\n                     edit\n                   ")],1)],1):t._e(),t._v(" "),t.post.referendum?a("li",{staticClass:"list-inline-item"},[t.post.referendum.expired?a("span",{staticClass:"text-danger"},[t._v("expired")]):a("span",[t._v("expires on "+t._s(new Date(1e3*t.post.referendum.expires_at).toLocaleString()))])]):a("li",{staticClass:"list-inline-item"},[a("font-awesome-icon",{attrs:{icon:["fas","clock"]}}),t._v("  \n                     "+t._s(new Date(1e3*t.post.createdAt).toLocaleString())+"\n                     \n                     "),t.post.id&&t.is_edit?a("router-link",{attrs:{to:{name:"History",params:{id:t.post.o_transaction}}}},[a("font-awesome-icon",{attrs:{icon:["fas","history"]}})],1):t._e()],1),t._v(" "),a("li",{staticClass:"list-inline-item"},[t.reddit.author?a("a",{attrs:{href:"https://www.reddit.com/user/"+t.reddit.author}},[t._v("\n                       by \n                       "),a("font-awesome-icon",{attrs:{icon:["fab","reddit"]}}),t._v(" \n                       "+t._s(t.poster_name)+" \n                     ")],1):t.post.transaction?a("router-link",{attrs:{to:{name:"UserProfile",params:{account:t.post.data.poster}}}},[t._v("\n                       by \n                       "),t.is_anon_alias?a("font-awesome-icon",{attrs:{icon:["fas","user-secret"]}}):t._e(),t._v(" \n                       "+t._s(t.poster_name)+"\n                     ")],1):t._e()],1),t._v(" "),t.thread&&0!=t.post.depth?t._e():a("li",{staticClass:"list-inline-item"},[t._v("\n                     in \n                     "),t.post.id?a("router-link",{attrs:{to:{name:"Sub",params:{sub:t.post.data.json_metadata.sub}}}},[t._v("\n                       "+t._s(t.post.data.json_metadata.sub)+"\n                     ")]):t._e()],1),t._v(" "),t.post.depth>0?a("li",{staticClass:"list-inline-item"},[t.reddit.author?a("a",{attrs:{href:t.reddit.permalink}},[a("font-awesome-icon",{attrs:{icon:["fab","reddit"]}}),t._v(" \n                       permalink\n                     ")],1):t.post.transaction?a("router-link",{attrs:{to:t.perma_link}},[t._v("\n                       permalink\n                     ")]):t._e()],1):t._e(),t._v(" "),a("li",{staticClass:"list-inline-item"},[a("a",{attrs:{href:"https://eosq.app/tx/"+t.post.transaction}},[a("font-awesome-icon",{attrs:{icon:["fas","link"]}})],1)])])]),t._v(" "),a("div",{class:"row quick-reply "+(t.show_quick_reply||t.show_quick_edit?"":"collapse"),attrs:{id:"qreply-"+t.post.data.post_uuid}},[a("div",{staticClass:"col-sm-12"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.quick_reply,expression:"quick_reply"}],staticClass:"form-control",attrs:{rows:"2",placeholder:"Content"},domProps:{value:t.quick_reply},on:{input:function(e){e.target.composing||(t.quick_reply=e.target.value)}}})]),t._v(" "),t.status?a("div",{staticClass:"col-sm-12 text-center"},[a("span",[t._v(t._s(t.status))])]):t._e(),t._v(" "),a("div",{staticClass:"col-sm-12 mt-1 mb-2"},[t.identity.account?a("button",{staticClass:"btn btn-sm btn-outline-primary",attrs:{type:"button"},on:{click:function(e){t.quickReply(!1)}}},[t._v(t._s(t.show_quick_edit?"edit":"post"))]):t._e(),t._v(" "),t.show_quick_reply?a("button",{staticClass:"btn btn-sm btn-outline-primary",attrs:{type:"button"},on:{click:function(e){t.quickReply(!0)}}},[t._v("post anon")]):t._e()])]),t._v(" "),a("div",{staticClass:"clearfix"})]),t._v(" "),t._l(t.post.children,function(e){return a("div",{key:e.o_id,staticStyle:{"margin-left":"5px","margin-bottom":"1px"}},[e.hide?t._e():a("div",[a("post",{attrs:{post:e,thread:t.thread}})],1)])})],2)])},staticRenderFns:[]},We=a("VU/8")(He,Je,!1,null,null,null).exports,Ye=(a("lqu7"),a("x9ll"),{name:"Layout",metaInfo:function(){return{title:Jt.title,link:[{rel:"icon",href:this.brand_icon}],htmlAttrs:{lang:"en",amp:void 0}}},props:{load:{type:Function,required:!1}},watch:{"$route.params.sub":function(){this.updateBrand()}},computed:{subs:function(){return G.subscribed_subs}},mounted:function(){var t=this;return h()(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.updateBrand(),e.next=3,vt();case 3:t.identity=e.sent,window.addEventListener("identity",t.updateIdentity);case 5:case"end":return e.stop()}},e,t)}))()},beforeDestroy:function(){var t=this;return h()(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.removeEventListener("identity",t.updateIdentity);case 1:case"end":return e.stop()}},e,t)}))()},methods:{updateBrand:function(){xe.helpers.UpdateBrand(this.$route.params.sub),this.brand_logo=Jt.logo,this.brand_icon=Jt.icon,this.brand_symbol=Jt.token_symbol,this.brand_banner=Jt.banner},updateIdentity:function(){var t=this;return h()(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vt();case 2:t.identity=e.sent,t.load&&t.load();case 4:case"end":return e.stop()}},e,t)}))()},setIdentity:function(t){var e=this;return h()(m.a.mark(function a(){return m.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,vt(t);case 2:e.identity=a.sent;case 3:case"end":return a.stop()}},a,e)}))()},login:function(){var t=this;return h()(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vt(!0);case 2:t.identity=e.sent,t.identity.account||alert("Failed to detect an EOS wallet! However, you can still post to the forum anonymously for free!");case 4:case"end":return e.stop()}},e,t)}))()},logout:function(){var t=this;return h()(m.a.mark(function e(){return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,bt();case 2:case"end":return t.stop()}},e,t)}))()}},data:function(){return{eos_referendum:G.eos_referendum,identity:{},brand_logo:"",brand_icon:"",brand_symbol:"",brand_banner:""}}}),Ke={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid px-0"},[t.brand_banner?a("div",{staticClass:"tp-banner-container"},[a("div",{staticClass:"tp-banner"},[a("img",{attrs:{src:t.brand_banner}})])]):t._e(),t._v(" "),a("div",{staticClass:"text-center headersubs d-none d-sm-block"},[a("ul",{staticClass:"list-inline mb-0"},t._l(t.subs,function(e){return a("li",{key:e,staticClass:"list-inline-item"},[a("router-link",{attrs:{to:"/e/"+e}},[t._v(t._s(e))])],1)}))]),t._v(" "),a("div",{staticClass:"headernav py-2"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row no-gutters"},[a("div",{staticClass:"col-3 col-sm-6 col-md-6 col-lg-8 col-xl-8"},[a("div",{staticClass:"logo d-inline-block px-2 px-lg-4"},[a("router-link",{attrs:{to:{name:"Index"}}},[a("img",{staticStyle:{height:"38px"},attrs:{src:t.brand_logo}})])],1),t._v(" "),a("div",{staticClass:"selecttopic d-none d-sm-inline-block"},[a("div",{staticClass:"dropdown d-inline-block"},[a("button",{staticClass:"btn btn-outline-primary dropdown-toggle",attrs:{type:"button",id:"sortBy","data-toggle":"dropdown"}},[t._t("topic")],2),t._v(" "),a("div",{staticClass:"dropdown-menu"},[a("router-link",{staticClass:"dropdown-item",attrs:{to:{name:"Index"}}},[t._v("Home")]),t._v(" "),t.eos_referendum?a("router-link",{staticClass:"dropdown-item",attrs:{to:{name:"Sub",params:{sub:"referendum"}}}},[t._v("Referendum")]):t._e(),t._v(" "),t._l(t.subs,function(e){return a("router-link",{key:e,staticClass:"dropdown-item",attrs:{to:{name:"Sub",params:{sub:e}}}},[t._v("e/"+t._s(e))])})],2)])])]),t._v(" "),a("div",{staticClass:"col-9 col-sm-6 col-md-6 col-lg-4 col-xl-4"},[a("div",{staticClass:"avt text-right"},[t.identity.account?t._e():a("button",{staticClass:"btn btn-outline-primary mx-2 mx-lg-4",on:{click:function(e){t.login()}}},[t._v("\n              connect wallet\n            ")]),t._v(" "),t.identity.account?a("div",{staticClass:"d-inline-block env dropdown"},[a("a",{attrs:{"data-toggle":"dropdown",href:"#"}},[a("font-awesome-icon",{attrs:{icon:["fas","user"]}})],1),t._v(" "),a("ul",{staticClass:"dropdown-menu",attrs:{role:"menu"}},[a("li",{staticClass:"dropdown-item"},[a("router-link",{attrs:{to:{name:"UserProfile",params:{account:t.identity.account}}}},[t._v("\n                        "+t._s(t.identity.account)+"\n                    ")])],1),t._v(" "),a("li",{staticClass:"dropdown-item"},[t._v("\n                    "+t._s(t.identity.atmos)+" ATMOS\n                ")]),t._v(" "),"ATMOS"!=t.brand_symbol?a("li",{staticClass:"dropdown-item"},[t._v("\n                    "+t._s(t.identity.token)+" "+t._s(t.brand_symbol)+"\n                ")]):t._e(),t._v(" "),a("li",{staticClass:"dropdown-item"},[a("a",{attrs:{role:"menuitem",tabindex:"-3",href:"javascript:void(0)"},on:{click:function(e){t.logout()}}},[t._v("disconnect")])])])]):t._e(),t._v(" "),t.identity.account?a("div",{staticClass:"d-inline-block env"},[a("router-link",{class:t.identity.notifications>0?"text-danger":"",attrs:{to:{name:"UserNotifications"}}},[a("font-awesome-icon",{attrs:{icon:["fas","envelope"]}}),t._v(" "),t.identity.notifications>0?a("span",[t._v(t._s(t.identity.notifications))]):t._e()],1)],1):t._e(),t._v(" "),a("div",{staticClass:"d-inline-block env"},[a("router-link",{attrs:{to:{name:"Settings"}}},[a("font-awesome-icon",{attrs:{icon:["fas","cog"]}})],1)],1)])])])])]),t._v(" "),a("section",{staticClass:"content"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 col-lg-12 col-xl-12"},[a("div",{staticClass:"mt-1 mb-1"}),t._v(" "),t._t("content-full")],2)]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-8 col-xl-8"},[t._t("content")],2),t._v(" "),a("div",{staticClass:"col-lg-4 col-xl-4"},[t._t("sidebar")],2)])])]),t._v(" "),t._m(0)])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("footer",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("p",{staticClass:"text-center"},[t._v("\n          This is an experimental Reddit-style forum built on EOS by the "),a("a",{attrs:{href:"https://novusphere.io"}},[t._v("Novusphere Community")]),t._v(".\n          "),a("br"),t._v("\n          Special thanks to\n          "),a("a",{attrs:{href:"https://www.eoscanada.com/"}},[t._v("EOS Canada")]),t._v(",\n          "),a("a",{attrs:{href:"https://greymass.com/"}},[t._v("Greymass")]),t._v(",\n          "),a("a",{attrs:{href:"https://www.genereos.io/"}},[t._v("GenerEOS")]),t._v(",\n          "),a("a",{attrs:{href:"https://get-scatter.com/"}},[t._v("Scatter")]),t._v(",\n          "),a("a",{attrs:{href:"https://eosflare.io/"}},[t._v("EOS Flare")]),t._v(".\n        ")]),t._v(" "),a("p",{staticClass:"text-center"},[t._v("\n            This site is hosted entirely from "),a("a",{attrs:{href:"https://github.com/Novusphere/novusphere-eos/tree/gh-pages"}},[t._v("GitHub Pages")]),t._v(" and is fully "),a("a",{attrs:{href:"https://github.com/Novusphere/novusphere-eos"}},[t._v("open source")]),t._v(".\n            "),a("br"),t._v("\n            The developers of this software take no responsibility for the content displayed.\n            "),a("br"),t._v("\n            No images, files or media are hosted by the forum,\n            "),a("br"),t._v("\n            please contact the respective site owners hosting content in breach of DMCA.\n        ")]),t._v(" "),a("div",{staticClass:"text-center"},[a("img",{staticStyle:{width:"12.5%"},attrs:{src:"https://cdn.novusphere.io/static/atmos.svg"}}),t._v(" "),a("img",{staticStyle:{width:"12.5%"},attrs:{src:"https://cdn.novusphere.io/static/eos3.svg"}})])])])])}]},Qe=a("VU/8")(Ye,Ke,!1,null,null,null).exports,Ze={name:"Home2",metaInfo:function(){return{titleTemplate:"%s | "+(this.sub?"e/"+this.sub:"Home")}},components:{Pager:Be,PostSorter:Ie,RecentlyVisited:Ve,Post:We,Layout:Qe},watch:{"$route.query.page":function(){this.load()},"$route.params.sub":function(){this.load()}},computed:{default_sorter:function(){return"referendum"==this.sub?"active":"popular"},sorter_options:function(){return"referendum"==this.sub?["active","old"]:["popular","time"]}},mounted:function(){var t=this;return h()(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.load();case 1:case"end":return e.stop()}},e,t)}))()},methods:{load:function(){var t=this;return h()(m.a.mark(function e(){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,t.sub=t.$route.params.sub,t.posts=[],t.pages=0,Q(),e.next=7,xe.views.Home(t.$route.query.page,t.sub,t.$refs.sorter.getSorter());case 7:a=e.sent,t.is_subscribed=a.is_subscribed,t.posts=a.posts,t.pages=a.pages,t.current_page=a.current_page,t.sub=a.sub,t.loading=!1;case 14:case"end":return e.stop()}},e,t)}))()},newThread:function(){var t=this;return h()(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,xe.actions.CheckCreateThread(t.sub);case 3:t.$refs.submit_modal.showModal(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}},e,t,[[0,6]])}))()},postContent:function(t){this.$router.push("/e/"+this.sub+"/"+t)},subscribe:function(t){var e=this;return h()(m.a.mark(function a(){return m.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,xe.actions.Subscribe(t,e.sub);case 2:e.is_subscribed=a.sent;case 3:case"end":return a.stop()}},a,e)}))()}},data:function(){return{loading:!1,is_subscribed:!1,current_page:0,pages:0,sub:"",posts:[]}}},Xe={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("layout",{ref:"layout",attrs:{load:t.load}},[a("template",{slot:"topic"},[t.sub?a("span",[t._v("e/"+t._s(t.sub))]):a("span",[t._v("Home")])]),t._v(" "),a("template",{slot:"content"},[a("div",{staticClass:"mb-1"},[a("div",{staticClass:"float-left"},[a("router-link",{staticClass:"btn btn-sm btn-outline-success",attrs:{to:{name:"StartThread",params:{sub:t.sub?t.sub:"all"}}}},[t._v("\n              new\n            ")])],1),t._v(" "),a("div",{staticClass:"ml-1 float-left"},[a("post-sorter",{ref:"sorter",attrs:{default_by:t.default_sorter,options:t.sorter_options,change:t.load}})],1),t._v(" "),t.loading?t._e():a("div",{staticClass:"ml-1 float-left"},[t.sub&&!t.is_subscribed?a("button",{staticClass:"btn btn-sm btn-outline-primary",attrs:{type:"button"},on:{click:function(e){t.subscribe(!0)}}},[t._v("subscribe")]):t._e(),t._v(" "),t.sub&&t.is_subscribed?a("button",{staticClass:"btn btn-sm btn-outline-danger",attrs:{type:"button"},on:{click:function(e){t.subscribe(!1)}}},[t._v("unsubscribe")]):t._e()]),t._v(" "),a("div",{staticClass:"float-right"},[a("pager",{attrs:{pages:t.pages,current_page:t.current_page}})],1),t._v(" "),a("div",{staticClass:"clearfix"})]),t._v(" "),t.loading?a("div",{staticClass:"text-center"},[a("h1",[a("font-awesome-icon",{attrs:{icon:["fas","spinner"],spin:""}})],1)]):a("div",[0==t.posts.length?a("div",[a("div",{staticClass:"text-center"},[a("h1",[t._v("There doesn't seem to be any posts here! Why not make one?")])])]):t._e(),t._v(" "),t._l(t.posts,function(t){return a("post",{key:t.transaction,attrs:{post:t}})})],2)]),t._v(" "),a("template",{slot:"sidebar"},[a("div",{staticClass:"sidebarblock"},[a("recently-visited")],1)])],2)],1)},staticRenderFns:[]},ta=a("VU/8")(Ze,Xe,!1,null,null,null).exports,ea={name:"Thread",metaInfo:function(){return{titleTemplate:"%s | "+this.main_post.data.json_metadata.title}},components:{Pager:Be,PostSorter:Ie,RecentlyVisited:Ve,Post:We,Layout:Qe},watch:{"$route.params.id":function(){this.load()},"$route.params.child_id":function(){this.load()}},mounted:function(){var t=this;return h()(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.load();case 1:case"end":return e.stop()}},e,t)}))()},methods:{load:function(){var t=this;return h()(m.a.mark(function e(){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe.views.Thread(t.$route.params.id,t.$route.params.child_id);case 2:a=e.sent,t.opening_post=a.opening_post,t.main_post=a.main_post;case 5:case"end":return e.stop()}},e,t)}))()},postContent:function(t,e){this.load()}},data:function(){return{opening_post:xe.helpers.PlaceholderPost(),main_post:xe.helpers.PlaceholderPost()}}},aa={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("layout",{attrs:{load:t.load}},[a("template",{slot:"topic"},[a("span",[t._v("Thread")])]),t._v(" "),a("template",{slot:"content"},[t.opening_post.id?a("div",{staticClass:"mb-1"},[a("router-link",{staticClass:"btn btn-sm btn-outline-primary",attrs:{to:{name:"Sub",params:{sub:t.opening_post.data.json_metadata.sub}}}},[a("font-awesome-icon",{attrs:{icon:["fas","arrow-left"]}}),t._v("\n            e/"+t._s(t.opening_post.data.json_metadata.sub)+"\n          ")],1)],1):t._e(),t._v(" "),t.opening_post.id?a("post",{attrs:{post:t.main_post,thread:t.opening_post}}):a("div",{staticClass:"text-center"},[a("h1",[a("font-awesome-icon",{attrs:{icon:["fas","spinner"],spin:""}})],1)])],1),t._v(" "),a("template",{slot:"sidebar"},[a("div",{staticClass:"sidebarblock"},[a("recently-visited")],1)])],2)],1)},staticRenderFns:[]},na=a("VU/8")(ea,aa,!1,null,null,null).exports,sa={name:"UserProfile",components:{Layout:Qe,Pager:Be,Post:We,PostSorter:Ie},watch:{"$route.query.page":function(){this.load()},"$route.params.account":function(){this.load()}},mounted:function(){var t=this;return h()(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.$refs.sorter.by="time",t.load();case 2:case"end":return e.stop()}},e,t)}))()},computed:{},methods:{load:function(){var t=this;return h()(m.a.mark(function e(){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,xe.views.UserProfile(t.$route.query.page,t.$route.params.account,t.$refs.sorter.getSorter());case 3:a=e.sent,t.current_page=a.current_page,t.account=a.account,t.is_blocked=a.is_blocked,t.balances.atmos=a.balance_atmos,t.comments=a.n_comments,t.threads=a.n_threads,t.last_activity=a.last_activity,t.posts=a.posts,t.pages=a.pages,t.loading=!1;case 14:case"end":return e.stop()}},e,t)}))()},toggleBlock:function(){var t=this;return h()(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe.actions.BlockUser(t.account,t.is_blocked);case 2:return e.next=4,t.load();case 4:case"end":return e.stop()}},e,t)}))()}},data:function(){return{loading:!1,is_blocked:!1,account:"",balances:{atmos:0},comments:0,threads:0,last_activity:"",posts:[],current_page:1,pages:0}}},ra={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("layout",{attrs:{load:t.load}},[a("template",{slot:"topic"},[a("span",[t._v("u/"+t._s(t.account))])]),t._v(" "),a("template",{slot:"content"},[a("div",{staticClass:"mb-1"},[a("div",{staticClass:"float-left"},[a("post-sorter",{ref:"sorter",attrs:{change:t.load}})],1),t._v(" "),a("div",{staticClass:"float-left ml-1"},[a("button",{staticClass:"btn btn-sm btn-outline-danger",on:{click:function(e){t.toggleBlock()}}},[t._v(t._s(t.is_blocked?"unblock":"block"))])]),t._v(" "),a("div",{staticClass:"float-right"},[a("pager",{attrs:{pages:t.pages,current_page:t.current_page}})],1),t._v(" "),a("div",{staticClass:"clearfix"})]),t._v(" "),t.loading?a("div",{staticClass:"text-center"},[a("h1",[a("font-awesome-icon",{attrs:{icon:["fas","spinner"],spin:""}})],1)]):a("div",[0==t.posts.length?a("div",[a("div",{staticClass:"text-center"},[a("h1",[t._v("No posts history found!")])])]):t._e(),t._v(" "),t._l(t.posts,function(t){return a("post",{key:t.o_id,attrs:{post:t}})})],2)]),t._v(" "),a("template",{slot:"sidebar"},[a("div",{staticClass:"sidebarblock"},[a("div",[a("h3",[t._v(t._s(t.account))]),t._v(" "),a("div",{staticClass:"divline"}),t._v(" "),a("div",{staticClass:"blocktxt"},[t._v("\n                Balances: "+t._s(t.balances.atmos)+" ATMOS\n              ")]),t._v(" "),a("div",{staticClass:"blocktxt"},[t._v("\n                Comments: "+t._s(t.comments)+"\n              ")]),t._v(" "),a("div",{staticClass:"blocktxt"},[t._v("\n                Threads: "+t._s(t.threads)+"\n              ")]),t._v(" "),a("div",{staticClass:"blocktxt"},[t._v("\n                Last Activity: "+t._s(t.last_activity)+"\n              ")])])])])],2)],1)},staticRenderFns:[]},oa=a("VU/8")(sa,ra,!1,null,null,null).exports,ia={name:"UserNotifications",components:{Layout:Qe,Pager:Be,Post:We,PostSorter:Ie,RecentlyVisited:Ve},watch:{"$route.query.page":function(){this.load()}},mounted:function(){var t=this;return h()(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.load();case 1:case"end":return e.stop()}},e,t)}))()},computed:{},methods:{load:function(){var t=this;return h()(m.a.mark(function e(){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe.views.UserNotifications(t.$route.query.page);case 2:return a=e.sent,t.current_page=a.current_page,t.pages=a.pages,t.posts=a.posts,e.next=8,xe.actions.MarkNotificationsAsRead();case 8:case"end":return e.stop()}},e,t)}))()}},data:function(){return{posts:[],current_page:1,pages:0}}},ca={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("layout",{attrs:{load:t.load}},[a("template",{slot:"topic"},[a("span",[t._v("Notifications")])]),t._v(" "),a("template",{slot:"content"},[a("div",{staticClass:"mb-1"},[a("div",{staticClass:"float-right"},[a("pager",{attrs:{pages:t.pages,current_page:t.current_page}})],1),t._v(" "),a("div",{staticClass:"clearfix"})]),t._v(" "),t.loading?a("div",{staticClass:"text-center"},[a("h1",[a("font-awesome-icon",{attrs:{icon:["fas","spinner"],spin:""}})],1)]):a("div",[0==t.posts.length?a("div",[a("div",{staticClass:"text-center"},[a("h1",[t._v("You have no notifications")])])]):t._e(),t._v(" "),t._l(t.posts,function(t){return a("post",{key:t.o_id,attrs:{post:t}})})],2)]),t._v(" "),a("template",{slot:"sidebar"},[a("div",{staticClass:"sidebarblock"},[a("recently-visited")],1)])],2)],1)},staticRenderFns:[]},ua=a("VU/8")(ia,ca,!1,null,null,null).exports,la={name:"Tag",components:{Pager:Be,Post:We,PostSorter:Ie,RecentlyVisited:Ve,Layout:Qe},watch:{"$route.query.page":function(){this.load()},"$route.params.tag":function(){this.load()}},mounted:function(){var t=this;return h()(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.load();case 1:case"end":return e.stop()}},e,t)}))()},methods:{load:function(){var t=this;return h()(m.a.mark(function e(){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,t.tag=t.$route.params.tag,e.next=4,xe.views.Tag(t.$route.query.page,t.tag,t.$refs.sorter.getSorter());case 4:a=e.sent,t.posts=a.posts,t.pages=a.pages,t.current_page=a.current_page,t.tag=a.tag,t.loading=!1;case 10:case"end":return e.stop()}},e,t)}))()}},data:function(){return{loading:!1,current_page:0,pages:0,tag:"",posts:[]}}},pa={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("layout",{attrs:{load:t.load}},[a("template",{slot:"topic"},[a("span",[t._v("#"+t._s(t.tag))])]),t._v(" "),a("template",{slot:"content"},[a("div",{staticClass:"mb-1"},[a("div",{staticClass:"float-left"},[a("post-sorter",{ref:"sorter",attrs:{change:t.load}})],1),t._v(" "),a("div",{staticClass:"float-right"},[a("pager",{attrs:{pages:t.pages,current_page:t.current_page}})],1),t._v(" "),a("div",{staticClass:"clearfix"})]),t._v(" "),t.loading?a("div",{staticClass:"text-center"},[a("h1",[a("font-awesome-icon",{attrs:{icon:["fas","spinner"],spin:""}})],1)]):a("div",[0==t.posts.length?a("div",[a("div",{staticClass:"text-center"},[a("h1",[t._v("No posts with #"+t._s(t.tag)+" found!")])])]):t._e(),t._v(" "),t._l(t.posts,function(t){return a("post",{key:t.o_id,attrs:{post:t}})})],2)]),t._v(" "),a("template",{slot:"sidebar"},[a("div",{staticClass:"sidebarblock"},[a("recently-visited")],1)])],2)],1)},staticRenderFns:[]},da=a("VU/8")(la,pa,!1,null,null,null).exports,fa={name:"History",metaInfo:function(){return{titleTemplate:"%s | "+this.main_post.data.json_metadata.title}},components:{Pager:Be,PostSorter:Ie,RecentlyVisited:Ve,Post:We,Layout:Qe},watch:{"$route.params.id":function(){this.load()}},mounted:function(){var t=this;return h()(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.load();case 1:case"end":return e.stop()}},e,t)}))()},methods:{load:function(){var t=this;return h()(m.a.mark(function e(){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe.views.PostHistory(t.$route.params.id);case 2:a=e.sent,t.main_post=a.main_post,t.opening_post=a.main_post;case 5:case"end":return e.stop()}},e,t)}))()}},data:function(){return{opening_post:xe.helpers.PlaceholderPost(),main_post:xe.helpers.PlaceholderPost()}}},ma={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("layout",[e("template",{slot:"topic"},[e("span",[this._v("History")])]),this._v(" "),e("template",{slot:"content"},[this.opening_post.id?e("post",{attrs:{post:this.main_post,thread:this.opening_post}}):e("div",{staticClass:"text-center"},[e("h1",[e("font-awesome-icon",{attrs:{icon:["fas","spinner"],spin:""}})],1)])],1),this._v(" "),e("template",{slot:"sidebar"},[e("div",{staticClass:"sidebarblock"},[e("recently-visited")],1)])],2)],1)},staticRenderFns:[]},_a=a("VU/8")(fa,ma,!1,null,null,null).exports,ha={name:"StartThread",components:{Pager:Be,Post:We,PostSorter:Ie,RecentlyVisited:Ve,Layout:Qe},watch:{},computed:{is_referendum:function(){return"referendum"==this.sub},is_referendum_multi:function(){return"options-v1"==this.referendum_type||"multi-select-v1"==this.referendum_type},expiry_delta:function(){var t=new Date(this.referendum_expires);return isNaN(t.getTime())?"?":this.getDeltaDays(t)}},mounted:function(){var t=this;return h()(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.load();case 1:case"end":return e.stop()}},e,t)}))()},methods:{getDeltaDays:function(t){return((t.getTime()-(new Date).getTime())/864e5).toFixed(2)},load:function(){var t=this;return h()(m.a.mark(function e(){var a,n,s,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vt();case 2:if(t.identity=e.sent,t.sub=t.$route.params.sub,!t.$route.params.edit_id){e.next=22;break}return a=t.$route.params.edit_id,n=Q(),t.identity,e.next=10,n.api({aggregate:n.config.collection_forum,maxTimeMS:1e3,cursor:{},pipeline:[{$match:n.query.match.threadById(a)},{$lookup:n.query.lookup.threadReplies()},{$project:n.query.project.post({recent_edit:!0})}]});case 10:return s=e.sent.cursor.firstBatch[0],s=new Vt(s),e.next=14,s.normalize();case 14:t.edit_post=s,t.sub=s.data.json_metadata.sub,t.title=s.data.json_metadata.title,t.content=s.data.content,r=s.data.json_metadata.attachment,t.attachment.value=r.value,t.attachment.type=r.type,t.attachment.display=r.display;case 22:case"end":return e.stop()}},e,t)}))()},setStatus:function(t){this.status=t},makePost:function(t){var e=this;return h()(m.a.mark(function a(){var n,s;return m.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(0!=e.title.length){a.next=3;break}return e.setStatus("Post must have a title"),a.abrupt("return");case 3:if(0!=e.content.length){a.next=6;break}return e.setStatus("Post must have at least 1 character of content"),a.abrupt("return");case 6:if(n=e.edit_post,a.t0=e.identity.account||"eosforumanon",a.t1=n?n.data.reply_to_poster||n.data.poster:"",a.t2=n?n.data.reply_to_post_uuid||n.data.post_uuid:"",a.t3=e.content,a.t4=xe.helpers.GeneratePostUuid(),a.t5=S.a,a.t6=e.title,a.t7=n?n.data.json_metadata.sub:e.sub,a.t8=n?n.data.post_uuid:"",a.t9=n?n.data.poster:"",a.t10=!!n,a.t11={value:e.attachment.value.trim(),type:e.attachment.type,display:e.attachment.value?e.attachment.display:""},!t){a.next=25;break}return a.next=22,xe.helpers.GenerateAnonData(e.content);case 22:a.t12=a.sent,a.next=26;break;case 25:a.t12=null;case 26:return a.t13=a.t12,a.t14={title:a.t6,type:"novusphere-forum",sub:a.t7,parent_uuid:a.t8,parent_poster:a.t9,edit:a.t10,attachment:a.t11,anon_id:a.t13},a.t15=(0,a.t5)(a.t14),s={poster:a.t0,reply_to_poster:a.t1,reply_to_post_uuid:a.t2,certify:0,content:a.t3,post_uuid:a.t4,json_metadata:a.t15},a.abrupt("return",s);case 31:case"end":return a.stop()}},a,e)}))()},postContent:function(t,e){var a=this;return h()(m.a.mark(function n(){var s,r;return m.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a.setStatus("Creating tx and broadcasting to EOS..."),n.next=3,a.makePost(t);case 3:if(s=n.sent){n.next=6;break}return n.abrupt("return",null);case 6:if(r=null,!a.is_referendum){n.next=17;break}if(!a.is_referendum||!a.is_referendum_multi){n.next=12;break}if(!(a.referendum_options.length<2)){n.next=12;break}return a.setStatus("You must set at least 2 options for this referendum type!"),n.abrupt("return");case 12:return n.next=14,xe.actions.Referendum.PushNewProposal({expires_at:a.referendum_expires,title:a.title,content:a.content,type:a.referendum_type,options:a.referendum_options});case 14:r=n.sent,n.next=20;break;case 17:return n.next=19,xe.actions.PushNewPost(s,"",t,e,a.setStatus);case 19:r=n.sent;case 20:if(r){n.next=22;break}return n.abrupt("return",null);case 22:a.$router.push({name:"Thread",params:{sub:a.sub,id:a.edit_post?a.edit_post.o_transaction:r}});case 23:case"end":return n.stop()}},n,a)}))()},updatePreview:function(){var t=this;return h()(m.a.mark(function e(){var a,n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.setStatus(""),e.next=3,t.makePost(!1);case 3:if(a=e.sent,!t.status){e.next=6;break}return e.abrupt("return");case 6:return n=new Vt({createdAt:parseInt((new Date).getTime()/1e3),transaction:"preview",id:1,name:"post",data:a}),e.next=9,n.normalize();case 9:t.preview=n;case 10:case"end":return e.stop()}},e,t)}))()}},data:function(){return{preview:null,edit_post:null,identity:{},status:"",sub:"",title:"",content:"",attachment:{value:"",type:"",display:""},referendum_type:"referendum-v1",referendum_expires:"",referendum_option:"",referendum_options:[]}}},va={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("layout",{attrs:{load:t.load}},[a("template",{slot:"topic"},[a("span",[t._v(" "+t._s(t.edit_post?"Edit Thread":"Start Thread"))])]),t._v(" "),a("template",{slot:"content"},[a("div",{staticClass:"post"},[a("form",{staticClass:"form newtopic",attrs:{action:"#"}},[a("div",{staticClass:"topwrap"},[a("div",{staticClass:"posttext pull-left ml-2"},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-2 col-form-label"},[t._v("Title")]),t._v(" "),a("div",{staticClass:"col-sm-10"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Title"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})])]),t._v(" "),t.edit_post||t.is_referendum?t._e():a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-2 col-form-label"},[t._v("Sub")]),t._v(" "),a("div",{staticClass:"col-sm-10"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.sub,expression:"sub"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Sub",readonly:""},domProps:{value:t.sub},on:{input:function(e){e.target.composing||(t.sub=e.target.value)}}})])]),t._v(" "),t.is_referendum?a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-2 col-form-label"},[t._v("Type")]),t._v(" "),a("div",{staticClass:"col-sm-10"},[a("b-form-select",{model:{value:t.referendum_type,callback:function(e){t.referendum_type=e},expression:"referendum_type"}},[a("option",{attrs:{value:"referendum-v1"}},[t._v("Referendum")]),t._v(" "),a("option",{attrs:{value:"poll-yn-v1"}},[t._v("Poll (Y/N)")]),t._v(" "),a("option",{attrs:{value:"poll-yna-v1"}},[t._v("Poll (Y/N/A)")]),t._v(" "),a("option",{attrs:{value:"options-v1"}},[t._v("Options Poll")]),t._v(" "),a("option",{attrs:{value:"multi-select-v1"}},[t._v("Multi-select Poll")])])],1)]):t._e(),t._v(" "),t.is_referendum?a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-2 col-form-label"},[t._v("Expiry")]),t._v(" "),a("div",{staticClass:"col-sm-8"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.referendum_expires,expression:"referendum_expires"}],staticClass:"form-control",attrs:{type:"text",placeholder:"mm-dd-yyyy"},domProps:{value:t.referendum_expires},on:{input:function(e){e.target.composing||(t.referendum_expires=e.target.value)}}})]),t._v(" "),a("label",{staticClass:"col-sm-2 col-form-label"},[t._v("("+t._s(t.expiry_delta)+" days from now)")])]):t._e(),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-2 col-form-label"},[t._v("Content")]),t._v(" "),a("div",{staticClass:"col-sm-10"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"form-control",attrs:{rows:"10",placeholder:"Content"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})])]),t._v(" "),t.is_referendum&&t.is_referendum_multi?a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-2 col-form-label"},[t._v("Options")]),t._v(" "),a("div",{staticClass:"col-sm-8"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.referendum_option,expression:"referendum_option"}],staticClass:"form-control",attrs:{type:"text",placeholder:"option"},domProps:{value:t.referendum_option},on:{input:function(e){e.target.composing||(t.referendum_option=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"col-sm-2"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){t.referendum_options.push(t.referendum_option)}}},[t._v("add")])]),t._v(" "),a("div",{staticClass:"offset-sm-2 col-sm-10"},t._l(t.referendum_options,function(e,n){return a("ul",{key:n},[a("li",[t._v("\n                               "+t._s(e)+" \n                               "),a("button",{staticClass:"btn btn-sm btn-danger ml-2",attrs:{type:"button"},on:{click:function(e){t.referendum_options.splice(n,1)}}},[a("font-awesome-icon",{attrs:{icon:["fas","times"]}})],1)])])}))]):t._e(),t._v(" "),t.is_referendum?t._e():a("fieldset",{staticClass:"form-group"},[a("div",{staticClass:"row"},[a("legend",{staticClass:"col-form-label col-sm-2 pt-0"}),t._v(" "),a("div",{staticClass:"col-sm-10"},[a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.attachment.type,expression:"attachment.type"}],staticClass:"form-check-input",attrs:{type:"radio",name:"attachmentType",value:"",checked:""},domProps:{checked:t._q(t.attachment.type,"")},on:{change:function(e){t.$set(t.attachment,"type","")}}}),t._v(" "),a("label",{staticClass:"form-check-label"},[t._v("No attachment")])]),t._v(" "),a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.attachment.type,expression:"attachment.type"}],staticClass:"form-check-input",attrs:{type:"radio",name:"attachmentType",value:"url"},domProps:{checked:t._q(t.attachment.type,"url")},on:{change:function(e){t.$set(t.attachment,"type","url")}}}),t._v(" "),a("label",{staticClass:"form-check-label"},[t._v("URL")])]),t._v(" "),a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.attachment.type,expression:"attachment.type"}],staticClass:"form-check-input",attrs:{type:"radio",name:"attachmentType",value:"ipfs"},domProps:{checked:t._q(t.attachment.type,"ipfs")},on:{change:function(e){t.$set(t.attachment,"type","ipfs")}}}),t._v(" "),a("label",{staticClass:"form-check-label"},[t._v("IPFS")])])])])]),t._v(" "),""!=t.attachment.type?a("fieldset",{staticClass:"form-group"},[a("div",{staticClass:"row"},[a("legend",{staticClass:"col-form-label col-sm-2 pt-0"}),t._v(" "),a("div",{staticClass:"col-sm-10"},[a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.attachment.display,expression:"attachment.display"}],staticClass:"form-check-input",attrs:{type:"radio",name:"attachmentDisplay",value:"link",checked:""},domProps:{checked:t._q(t.attachment.display,"link")},on:{change:function(e){t.$set(t.attachment,"display","link")}}}),t._v(" "),a("label",{staticClass:"form-check-label"},[t._v("link")])]),t._v(" "),a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.attachment.display,expression:"attachment.display"}],staticClass:"form-check-input",attrs:{type:"radio",name:"attachmentDisplay",value:"iframe"},domProps:{checked:t._q(t.attachment.display,"iframe")},on:{change:function(e){t.$set(t.attachment,"display","iframe")}}}),t._v(" "),a("label",{staticClass:"form-check-label"},[t._v("iframe")])]),t._v(" "),a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.attachment.display,expression:"attachment.display"}],staticClass:"form-check-input",attrs:{type:"radio",name:"attachmentDisplay",value:"mp4"},domProps:{checked:t._q(t.attachment.display,"mp4")},on:{change:function(e){t.$set(t.attachment,"display","mp4")}}}),t._v(" "),a("label",{staticClass:"form-check-label"},[t._v("mp4")])]),t._v(" "),a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.attachment.display,expression:"attachment.display"}],staticClass:"form-check-input",attrs:{type:"radio",name:"attachmentDisplay",value:"mp3"},domProps:{checked:t._q(t.attachment.display,"mp3")},on:{change:function(e){t.$set(t.attachment,"display","mp3")}}}),t._v(" "),a("label",{staticClass:"form-check-label"},[t._v("mp3")])])])])]):t._e(),t._v(" "),""!=t.attachment.type?a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-2 col-form-label"}),t._v(" "),a("div",{staticClass:"col-sm-10"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.attachment.value,expression:"attachment.value"}],staticClass:"form-control",attrs:{placeholder:"IPFS hash / URL"},domProps:{value:t.attachment.value},on:{input:function(e){e.target.composing||t.$set(t.attachment,"value",e.target.value)}}})])]):t._e(),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"text-center"},[a("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.status))])]),t._v(" "),!t.identity.account&&t.is_referendum?a("div",{staticClass:"text-center"},[a("span",[t._v("You must be logged in to create a referendum proposal")])]):t._e()])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"offset-sm-2 col-sm-10"},[t.identity.account?a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){t.postContent(!1)}}},[t._v("Post")]):t._e(),t._v(" "),t.edit_post||t.is_referendum?t._e():a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){t.postContent(!0,!0)}}},[t._v("Post Anon")]),t._v(" "),a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){t.updatePreview()}}},[t._v("Preview")])])]),t._v(" "),t.preview?a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("post",{attrs:{post:t.preview}})],1)]):t._e()]),t._v(" "),a("div",{staticClass:"clearfix"})])])])]),t._v(" "),a("template",{slot:"sidebar"},[a("div",{staticClass:"sidebarblock"},[a("recently-visited")],1)])],2)],1)},staticRenderFns:[]},ba=a("VU/8")(ha,va,!1,null,null,null).exports,ya={name:"Settings",components:{Pager:Be,Post:We,PostSorter:Ie,Layout:Qe},mounted:function(){var t=this;return h()(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.load();case 1:case"end":return e.stop()}},e,t)}))()},computed:{anon_identity:function(){return this.anon_key?z.a.privateToPublic(this.anon_key):""}},methods:{load:function(t){var e=this;return h()(m.a.mark(function t(){return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.settings=S()(G.settings,null,2),e.mods=G.moderation.mods,e.new_theme=G.settings.theme,e.anon_key=G.anon_id.key,e.anon_name=G.anon_id.name,t.next=7,e.loadReccomendedMods();case 7:case"end":return t.stop()}},t,e)}))()},loadReccomendedMods:function(){var t=this;return h()(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe.actions.GetReccomendedModList();case 2:t.mod_list=e.sent;case 3:case"end":return e.stop()}},e,t)}))()},modListChange:function(){this.new_mod=this.mod_list_value},themeListChange:function(){this.new_theme=this.theme_list_value},reset:function(){this.settings=S()(L.settings,null,2)},save:function(){G.settings=JSON.parse(this.settings),this.theme=G.settings.theme,this.mods=G.moderation.mods,J()},forgetAll:function(){window.__forgetStorage()},saveTheme:function(){G.settings.theme=this.new_theme,this.theme=this.new_theme,J()},addMod:function(){var t=this;return h()(m.a.mark(function e(){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!G.moderation.mods.includes(t.new_mod)){e.next=2;break}return e.abrupt("return");case 2:return a=Tt.dateToKey(new Date),e.next=5,Tt.resolve(t.new_mod,a);case 5:if(e.t0=e.sent,null!=e.t0){e.next=11;break}return e.next=9,confirm('"'+t.new_mod+'" does not seem like a valid moderation endpoint, are you sure you want to add it?');case 9:if(e.sent){e.next=11;break}return e.abrupt("return");case 11:G.moderation.mods.push(t.new_mod),Tt.resetCache(),J(),t.mods=G.moderation.mods,t.new_mod="";case 16:case"end":return e.stop()}},e,t)}))()},removeMod:function(t){G.moderation.mods.splice(t,1),Tt.resetCache(),J(),this.mods=G.moderation.mods},newAnonId:function(){var t=this;return h()(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.randomKey();case 2:t.anon_key=e.sent;case 3:case"end":return e.stop()}},e,t)}))()},saveAnonId:function(){this.anon_name.length>12?alert("Anonymous name must be less than 13 characters"):(G.anon_id.name=this.anon_name,G.anon_id.key=this.anon_key&&z.a.isValidPrivate(this.anon_key)?this.anon_key:"",J())}},data:function(){return{settings:"",theme:G.settings.theme,mods:[],mod_list:[],mod_list_value:"",new_mod:"",theme_list_value:"",new_theme:"",anon_name:"",anon_key:""}}},ga={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("layout",{attrs:{load:t.load}},[a("template",{slot:"topic"},[a("span",[t._v("Settings")])]),t._v(" "),a("template",{slot:"content-full"},[a("ul",{staticClass:"nav nav-tabs",attrs:{role:"tablist"}},[a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link active",attrs:{"data-toggle":"tab",href:"#mod",role:"tab"}},[t._v("Moderation")])]),t._v(" "),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{"data-toggle":"tab",href:"#anonid",role:"tab"}},[t._v("Anon Id")])]),t._v(" "),t._e(),t._v(" "),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{"data-toggle":"tab",href:"#api",role:"tab"}},[t._v("Raw")])])]),t._v(" "),a("div",{staticClass:"tab-content mt-2"},[a("div",{staticClass:"tab-pane fade show active",attrs:{id:"mod",role:"tabpanel"}},[a("div",{staticClass:"text-center"},[a("p",{},[t._v("\n                        Use this panel to control your delegated moderation settings.\n                        "),a("a",{attrs:{target:"_blank",href:"https://github.com/Novusphere/eos-forum-mod-list"}},[t._v("Click here to learn more")]),t._v(".\n                    ")])]),t._v(" "),a("form",{staticClass:"mx-4"},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-2 col-form-label"},[t._v("Known")]),t._v(" "),a("div",{staticClass:"col-8"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.mod_list_value,expression:"mod_list_value"}],staticClass:"form-control",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.mod_list_value=e.target.multiple?a:a[0]},function(e){t.modListChange()}]}},t._l(t.mod_list,function(e){return a("option",{key:e.name,domProps:{value:e.endpoint}},[t._v(t._s(e.name))])}))]),t._v(" "),a("div",{staticClass:"col-2"})]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-2 col-form-label"}),t._v(" "),a("div",{staticClass:"col-8"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.new_mod,expression:"new_mod"}],staticClass:"form-control",attrs:{type:"text",placeholder:"endpoint"},domProps:{value:t.new_mod},on:{input:function(e){e.target.composing||(t.new_mod=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"col-2"},[a("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button"},on:{click:function(e){t.addMod()}}},[t._v("add")])])]),t._v(" "),t._l(t.mods,function(e,n){return a("div",{key:n,staticClass:"form-group row"},[a("label",{staticClass:"col-2 col-form-label"}),t._v(" "),a("div",{staticClass:"col-8"},[a("input",{staticClass:"form-control",attrs:{type:"text",readonly:""},domProps:{value:e}})]),t._v(" "),a("div",{staticClass:"col-2"},[a("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(e){t.removeMod(n)}}},[a("font-awesome-icon",{attrs:{icon:["fas","times"]}})],1)])])})],2)]),t._v(" "),a("div",{staticClass:"tab-pane fade",attrs:{id:"anonid",role:"tabpanel"}},[a("div",{staticClass:"text-center"},[a("p",{},[t._v("\n                        Use this panel to control your anonymous identity. \n                        This is used when posting anonymously to identify your posts.\n                        You can regenerate a new anonymous identity at any time.\n                    ")])]),t._v(" "),a("form",{staticClass:"mx-4"},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-2 col-form-label"},[t._v("Name")]),t._v(" "),a("div",{staticClass:"col-8"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.anon_name,expression:"anon_name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"name"},domProps:{value:t.anon_name},on:{input:function(e){e.target.composing||(t.anon_name=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-2 col-form-label"},[t._v("Key")]),t._v(" "),a("div",{staticClass:"col-8"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.anon_key,expression:"anon_key"}],staticClass:"form-control",attrs:{type:"text",placeholder:"identity key"},domProps:{value:t.anon_key},on:{input:function(e){e.target.composing||(t.anon_key=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-2 col-form-label"}),t._v(" "),a("div",{staticClass:"col-8"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.anon_identity,expression:"anon_identity"}],staticClass:"form-control",attrs:{type:"text",readonly:"",placeholder:"identity public key"},domProps:{value:t.anon_identity},on:{input:function(e){e.target.composing||(t.anon_identity=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"text-center"},[a("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button"},on:{click:function(e){t.newAnonId()}}},[t._v("new")]),t._v(" "),a("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(e){t.saveAnonId()}}},[t._v("save")])])])]),t._v(" "),a("div",{staticClass:"tab-pane fade",attrs:{id:"api",role:"tabpanel"}},[a("div",{staticClass:"text-center"},[a("p",{staticClass:"text-alert"},[a("strong",[t._v("Warning:")]),t._v(' You should not modify these settings unless you know what you\'re doing! \n                        If you incorrectly change something, click "reset" then "save" to restore the default settings.\n                    ')])]),t._v(" "),a("form",{staticClass:"mx-4"},[a("div",{staticClass:"form-group row"},[a("div",{staticClass:"col-sm-12"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.settings,expression:"settings"}],staticClass:"form-control",attrs:{rows:"10",placeholder:"Content"},domProps:{value:t.settings},on:{input:function(e){e.target.composing||(t.settings=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"text-center"},[a("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(e){t.save()}}},[t._v("save")]),t._v(" "),a("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button"},on:{click:function(e){t.reset()}}},[t._v("reset")]),t._v(" "),a("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(e){t.forgetAll()}}},[t._v("forget all")])])])]),t._v(" "),a("div",{staticClass:"tab-pane fade",attrs:{id:"theme",role:"tabpanel"}},[a("div",{staticClass:"text-center"},[a("p",{},[t._v("\n                        Use this panel to control your theme settings.\n                    ")])]),t._v(" "),a("form",{staticClass:"mx-4"},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-2 col-form-label"},[t._v("Known")]),t._v(" "),a("div",{staticClass:"col-8"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.theme_list_value,expression:"theme_list_value"}],staticClass:"form-control",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.theme_list_value=e.target.multiple?a:a[0]},function(e){t.themeListChange()}]}},[a("option",{attrs:{value:"https://eos-forum.org/static/css/theme/night.css"}},[t._v("night theme")]),t._v(" "),a("option",{attrs:{value:"https://eos-forum.org/static/css/theme/day.css"}},[t._v("day theme")])])]),t._v(" "),a("div",{staticClass:"col-2"})]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-2 col-form-label"}),t._v(" "),a("div",{staticClass:"col-8"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.new_theme,expression:"new_theme"}],staticClass:"form-control",attrs:{type:"text",placeholder:"theme css url"},domProps:{value:t.new_theme},on:{input:function(e){e.target.composing||(t.new_theme=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"col-2"},[a("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button"},on:{click:function(e){t.saveTheme()}}},[t._v("save")])])])])])])])],2)],1)},staticRenderFns:[]},ka=a("VU/8")(ya,ga,!1,null,null,null).exports;s.a.use(je.a);var wa=new je.a({routes:[{path:"/",name:"Index",component:ta},{path:"/e/:sub?",name:"Sub",component:ta},{path:"/e/:sub/new",name:"StartThread",component:ba},{path:"/e/:sub/edit/:edit_id",name:"EditThread",component:ba},{path:"/e/:sub/:id/:title?/:child_id?",name:"Thread",component:na},{path:"/history/:id",name:"History",component:_a},{path:"/settings",name:"Settings",component:ka},{path:"/u/:account",name:"UserProfile",component:oa},{path:"/tag/:tag",name:"Tag",component:da},{path:"/notifications",name:"UserNotifications",component:ua},{path:"/test",name:"Test",component:Ee}]}),xa=a("p3jY"),Ca=a.n(xa);window._jQuery=i.a,u.library.add(l.a),u.library.add(p.a),u.library.add(d.a),s.a.component("font-awesome-icon",c.FontAwesomeIcon),s.a.use(r.a),s.a.use(Ca.a),s.a.config.productionTip=!1,new s.a({el:"#app",router:wa,components:{App:qe},template:"<App/>"})},Pp2f:function(t,e){t.exports={account_name:"name",action_name:"name",authority:{base:"",fields:{threshold:"uint32",keys:"key_weight[]",accounts:"permission_level_weight[]",waits:"wait_weight[]"}},bidname:{base:"",action:{name:"bidname",account:"eosio"},fields:{bidder:"account_name",newname:"account_name",bid:"asset"}},blockchain_parameters:{base:"",fields:{max_block_net_usage:"uint64",target_block_net_usage_pct:"uint32",max_transaction_net_usage:"uint32",base_per_transaction_net_usage:"uint32",net_usage_leeway:"uint32",context_free_discount_net_usage_num:"uint32",context_free_discount_net_usage_den:"uint32",max_block_cpu_usage:"uint32",target_block_cpu_usage_pct:"uint32",max_transaction_cpu_usage:"uint32",min_transaction_cpu_usage:"uint32",max_transaction_lifetime:"uint32",deferred_trx_expiration_window:"uint32",max_transaction_delay:"uint32",max_inline_action_size:"uint32",max_inline_action_depth:"uint16",max_authority_depth:"uint16"}},buyram:{base:"",action:{name:"buyram",account:"eosio"},fields:{payer:"account_name",receiver:"account_name",quant:"asset"}},buyrambytes:{base:"",action:{name:"buyrambytes",account:"eosio"},fields:{payer:"account_name",receiver:"account_name",bytes:"uint32"}},canceldelay:{base:"",action:{name:"canceldelay",account:"eosio"},fields:{canceling_auth:"permission_level",trx_id:"transaction_id_type"}},claimrewards:{base:"",action:{name:"claimrewards",account:"eosio"},fields:{owner:"account_name"}},connector:{base:"",fields:{balance:"asset",weight:"float64"}},delegatebw:{base:"",action:{name:"delegatebw",account:"eosio"},fields:{from:"account_name",receiver:"account_name",stake_net_quantity:"asset",stake_cpu_quantity:"asset",transfer:"bool"}},delegated_bandwidth:{base:"",fields:{from:"account_name",to:"account_name",net_weight:"asset",cpu_weight:"asset"}},deleteauth:{base:"",action:{name:"deleteauth",account:"eosio"},fields:{account:"account_name",permission:"permission_name"}},eosio_global_state:{base:"blockchain_parameters",fields:{max_ram_size:"uint64",total_ram_bytes_reserved:"uint64",total_ram_stake:"int64",last_producer_schedule_update:"block_timestamp_type",last_pervote_bucket_fill:"uint64",pervote_bucket:"int64",perblock_bucket:"int64",total_unpaid_blocks:"uint32",total_activated_stake:"int64",thresh_activated_stake_time:"uint64",last_producer_schedule_size:"uint16",total_producer_vote_weight:"float64",last_name_close:"block_timestamp_type"}},exchange_state:{base:"",fields:{supply:"asset",base:"connector",quote:"connector"}},key_weight:{base:"",fields:{key:"public_key",weight:"weight_type"}},linkauth:{base:"",action:{name:"linkauth",account:"eosio"},fields:{account:"account_name",code:"account_name",type:"action_name",requirement:"permission_name"}},namebid_info:{base:"",fields:{newname:"account_name",high_bidder:"account_name",high_bid:"int64",last_bid_time:"uint64"}},newaccount:{base:"",action:{name:"newaccount",account:"eosio"},fields:{creator:"account_name",name:"account_name",owner:"authority",active:"authority"}},onerror:{base:"",action:{name:"onerror",account:"eosio"},fields:{sender_id:"uint128",sent_trx:"bytes"}},permission_level:{base:"",fields:{actor:"account_name",permission:"permission_name"}},permission_level_weight:{base:"",fields:{permission:"permission_level",weight:"weight_type"}},permission_name:"name",producer_info:{base:"",fields:{owner:"account_name",total_votes:"float64",producer_key:"public_key",is_active:"bool",url:"string",unpaid_blocks:"uint32",last_claim_time:"uint64",location:"uint16"}},producer_key:{base:"",fields:{producer_name:"account_name",block_signing_key:"public_key"}},refund:{base:"",action:{name:"refund",account:"eosio"},fields:{owner:"account_name"}},refund_request:{base:"",fields:{owner:"account_name",request_time:"time_point_sec",net_amount:"asset",cpu_amount:"asset"}},regproducer:{base:"",action:{name:"regproducer",account:"eosio"},fields:{producer:"account_name",producer_key:"public_key",url:"string",location:"uint16"}},regproxy:{base:"",action:{name:"regproxy",account:"eosio"},fields:{proxy:"account_name",isproxy:"bool"}},require_auth:{base:"",action:{name:"reqauth",account:"eosio"},fields:{from:"account_name"}},rmvproducer:{base:"",action:{name:"rmvproducer",account:"eosio"},fields:{producer:"account_name"}},sellram:{base:"",action:{name:"sellram",account:"eosio"},fields:{account:"account_name",bytes:"uint64"}},set_account_limits:{base:"",action:{name:"setalimits",account:"eosio"},fields:{account:"account_name",ram_bytes:"int64",net_weight:"int64",cpu_weight:"int64"}},set_global_limits:{base:"",action:{name:"setglimits",account:"eosio"},fields:{cpu_usec_per_period:"int64"}},set_producers:{base:"",action:{name:"setprods",account:"eosio"},fields:{schedule:"producer_key[]"}},setabi:{base:"",action:{name:"setabi",account:"eosio"},fields:{account:"account_name",abi:"bytes"}},setcode:{base:"",action:{name:"setcode",account:"eosio"},fields:{account:"account_name",vmtype:"uint8",vmversion:"uint8",code:"bytes"}},setparams:{base:"",action:{name:"setparams",account:"eosio"},fields:{params:"blockchain_parameters"}},setpriv:{base:"",action:{name:"setpriv",account:"eosio"},fields:{account:"account_name",is_priv:"int8"}},setram:{base:"",action:{name:"setram",account:"eosio"},fields:{max_ram_size:"uint64"}},total_resources:{base:"",fields:{owner:"account_name",net_weight:"asset",cpu_weight:"asset",ram_bytes:"uint64"}},transaction_id_type:"checksum256",undelegatebw:{base:"",action:{name:"undelegatebw",account:"eosio"},fields:{from:"account_name",receiver:"account_name",unstake_net_quantity:"asset",unstake_cpu_quantity:"asset"}},unlinkauth:{base:"",action:{name:"unlinkauth",account:"eosio"},fields:{account:"account_name",code:"account_name",type:"action_name"}},unregprod:{base:"",action:{name:"unregprod",account:"eosio"},fields:{producer:"account_name"}},updateauth:{base:"",action:{name:"updateauth",account:"eosio"},fields:{account:"account_name",permission:"permission_name",parent:"permission_name",auth:"authority"}},user_resources:{base:"",fields:{owner:"account_name",net_weight:"asset",cpu_weight:"asset",ram_bytes:"uint64"}},voteproducer:{base:"",action:{name:"voteproducer",account:"eosio"},fields:{voter:"account_name",proxy:"account_name",producers:"account_name[]"}},voter_info:{base:"",fields:{owner:"account_name",proxy:"account_name",producers:"account_name[]",staked:"int64",last_vote_weight:"float64",proxied_vote_weight:"float64",is_proxy:"bool"}},wait_weight:{base:"",fields:{wait_sec:"uint32",weight:"weight_type"}},weight_type:"uint16"}},WrX4:function(t,e){t.exports={account:{base:"",fields:{balance:"asset"}},account_name:"name",create:{base:"",action:{name:"create",account:"eosio.token"},fields:{issuer:"account_name",maximum_supply:"asset"}},currency_stats:{base:"",fields:{supply:"asset",max_supply:"asset",issuer:"account_name"}},issue:{base:"",action:{name:"issue",account:"eosio.token"},fields:{to:"account_name",quantity:"asset",memo:"string"}},transfer:{base:"",action:{name:"transfer",account:"eosio.token"},fields:{from:"account_name",to:"account_name",quantity:"asset",memo:"string"}}}},cB4U:function(t,e){t.exports={name:"uint64",checksum160:"fixed_bytes20",checksum256:"fixed_bytes32",checksum512:"fixed_bytes64",signature:"fixed_bytes65",public_key:"fixed_bytes33",message_type:"fixed_string16",symbol:"uint64",symbol_code:"uint64",field_name:"string",account_name:"name",permission_name:"name",type_name:"string",token_name:"name",table_name:"name",scope_name:"name",action_name:"name",time_point:"int64",time_point_sec:"time",timestamp:"uint32",block_timestamp_type:"timestamp",block_id:"fixed_bytes32",checksum_type:"fixed_bytes32",checksum256_type:"fixed_bytes32",checksum512_type:"fixed_bytes64",checksum160_type:"fixed_bytes20",sha256:"fixed_bytes32",sha512:"fixed_bytes64",sha160:"fixed_bytes20",weight_type:"uint16",block_num_type:"uint32",share_type:"int64",digest_type:"checksum_type",context_free_type:"bytes",unsigned_int:"varuint32",bool:"uint8",extensions_type:{base:"",fields:{type:"uint16",data:"bytes"}},transaction_header:{base:"",fields:{expiration:"time",ref_block_num:"uint16",ref_block_prefix:"uint32",net_usage_words:"unsigned_int",max_cpu_usage_ms:"uint8",delay_sec:"unsigned_int"}},transaction:{base:"transaction_header",fields:{context_free_actions:"action[]",actions:"action[]",transaction_extensions:"extensions_type[]"}},signed_transaction:{base:"transaction",fields:{signatures:"signature[]",context_free_data:"bytes[]"}},fields:"field_def[]",field_def:{fields:{name:"field_name",type:"type_name"}},asset:{fields:{amount:"share_type",sym:"symbol"}},producer_key:{fields:{producer_name:"account_name",block_signing_key:"public_key"}},producer_schedule:{fields:{version:"uint32",producers:"producer_key[]"}},chain_config:{fields:{target_block_size:"uint32",max_block_size:"uint32",target_block_acts_per_scope:"uint32",max_block_acts_per_scope:"uint32",target_block_acts:"uint32",max_block_acts:"uint32",real_threads:"uint64",max_storage_size:"uint64",max_transaction_lifetime:"uint32",max_authority_depth:"uint16",max_transaction_exec_time:"uint32",max_inline_depth:"uint16",max_inline_action_size:"uint32",max_generated_transaction_size:"uint32"}},type_def:{base:"",fields:{new_type_name:"type_name",type:"type_name"}},struct_def:{base:"",fields:{name:"type_name",base:"type_name",fields:"field_def[]"}},clause_pair:{base:"",fields:{id:"string",body:"string"}},error_message:{base:"",fields:{error_code:"uint64",error_msg:"string"}},abi_def:{base:"",fields:{version:"string",types:"type_def[]",structs:"struct_def[]",actions:"action_def[]",tables:"table_def[]",ricardian_clauses:"clause_pair[]",error_messages:"error_message[]",abi_extensions:"extensions_type[]"}},table_def:{base:"",fields:{name:"table_name",index_type:"type_name",key_names:"field_name[]",key_types:"type_name[]",type:"type_name"}},action:{base:"",fields:{account:"account_name",name:"action_name",authorization:"permission_level[]",data:"bytes"}},action_def:{base:"",fields:{name:"action_name",type:"type_name",ricardian_contract:"string"}},block_header:{base:"",fields:{previous:"checksum256",timestamp:"timestamp",transaction_mroot:"checksum256",action_mroot:"checksum256",block_mroot:"checksum256",producer:"account_name",schedule_version:"uint32",new_producers:"producer_schedule?"}},packed_transaction:{fields:{signatures:"signature[]",compression:"uint8",packed_context_free_data:"bytes",packed_trx:"bytes"}},nonce:{action:{name:"nonce",account:"eosio.null"},fields:{value:"string"}}}},h61r:function(t,e){t.exports={get_currency_balance:{params:{code:"name",account:"name",symbol:"optional<string>"},results:"asset[]"},get_currency_stats:{params:{code:"name",symbol:"string"},results:{supply:"asset",max_supply:"asset",issuer:"account_name"}},get_producers:{brief:"Fetch smart contract data from producer.",params:{json:{type:"bool",default:!1},lower_bound:"string",limit:{type:"uint32",default:"10"}},results:{rows:{type:"vector",doc:"one row per item, either encoded as hex String or JSON object"},total_producer_vote_weight:{type:"float64",doc:"total vote"},more:{type:"string",doc:"fill lower_bound with this value to fetch more rows"}}},get_info:{brief:"Return general network information.",params:null,results:{server_version:"string",head_block_num:"uint32",last_irreversible_block_num:"uint32",last_irreversible_block_id:"block_id",head_block_id:"block_id",head_block_time:"time_point_sec",head_block_producer:"account_name",virtual_block_cpu_limit:"uint64",virtual_block_net_limit:"uint64",block_cpu_limit:"uint64",block_net_limit:"uint64"}},get_block:{brief:"Fetch a block from the blockchain.",params:{block_num_or_id:"string"},results:"variant",errors:{"unknown block":null}},get_block_header_state:{brief:"Fetch the minimum state necessary to validate transaction headers.",params:{block_num_or_id:"string"},results:"variant",errors:{block_id_type_exception:"Invalid block ID",unknown_block_exception:"Could not find reversible block"}},get_account:{brief:"Fetch a blockchain account",params:{account_name:"name"},results:{account_name:"name",privileged:"bool",last_code_update:"time_point",created:"time_point",ram_quota:"int64",net_weight:"int64",cpu_weight:"int64",net_limit:"int64",cpu_limit:"int64",ram_usage:"int64",permissions:"vector<permission>",total_resources:"variant",self_delegated_bandwidth:"variant",voter_info:"variant"}},get_code:{brief:"Fetch smart contract code",params:{account_name:"name"},results:{account_name:"name",wast:"string",code_hash:"sha256",abi:"optional<abi_def>"}},get_table_rows:{brief:"Fetch smart contract data from an account.",params:{json:{type:"bool",default:!1},code:"name",scope:"name",table:"name",table_key:"string",lower_bound:{type:"string",default:"0"},upper_bound:{type:"string",default:"-1"},limit:{type:"uint32",default:"10"}},results:{rows:{type:"vector",doc:"one row per item, either encoded as hex String or JSON object"},more:{type:"bool",doc:"true if last element"}}},get_abi:{params:{account_name:"name"},results:{account_name:"name",abi:"abi_def?"}},abi_json_to_bin:{brief:"Manually serialize json into binary hex.  The binayargs is usually stored in Action.data.",params:{code:"name",action:"name",args:"bytes"},results:{binargs:"bytes"}},abi_bin_to_json:{brief:"Convert bin hex back into Abi json definition.",params:{code:"name",action:"name",binargs:"bytes"},results:{args:"bytes",required_scope:"name[]",required_auth:"name[]"}},get_required_keys:{params:{transaction:"transaction",available_keys:"set[public_key]"},results:"Set[public_key]"},push_block:{brief:"Append a block to the chain database.",params:{block:"signed_block"},results:null},push_transaction:{brief:"Attempts to push the transaction into the pending queue.",params:{signed_transaction:"signed_transaction"},results:{transaction_id:"fixed_bytes32",processed:"bytes"}},push_transactions:{brief:"Attempts to push transactions into the pending queue.",params:{"signed_transaction[]":"signed_transaction"},results:"vector[push_transaction.results]"}}},lqu7:function(t,e){},x9ll:function(t,e){},zj2Q:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.f9c43f96c271e5a50fa4.js.map