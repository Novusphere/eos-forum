{"version":3,"sources":["webpack:///src/components/Home.vue","webpack:///./src/components/Home.vue?0ad7","webpack:///./src/components/Home.vue"],"names":["Home","name","metaInfo","titleTemplate","this","sub","components","Pager","PostSorter","Post","Layout","Modal","ThreadModal","watch","$route.query.page","load","$route.params.sub","computed","default_sorter","sorter_options","subs","storage","subscribed_subs","mounted","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","wrap","_context","prev","next","stop","methods","_this2","_callee2","benchmark","home","_context2","loading","$route","params","posts","pages","selectedPostID","undefined","window","scrollTo","Object","src_novusphere","Date","getTime","ui","views","query","page","$refs","sorter","getSorter","sent","console","log","current_page","newThread","_this3","_callee3","_context3","actions","CheckCreateThread","submit_modal","showModal","t0","alert","hidePreview","$root","showPreview","localStorage","setItem","data","eos_referendum","components_Home","render","_vm","_h","$createElement","_c","_self","ref","attrs","slot","_v","_s","staticClass","default_by","options","change","_e","class","btn-primary","btn-outline","type","on","click","$event","icon","spin","length","_l","p","key","transaction","hide-preview","post","showChildren","openPost","$_openPost","nativeOn","stopPropagation","$_closePost","id","close","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/2.74d68dca1d4d66981cf3.js","sourcesContent":["<template>\r\n  <layout ref=\"layout\" :load=\"load\">\r\n\r\n    <template slot=\"topic\">\r\n      <span v-if=\"$root.sub\">e/{{$root.sub}}</span>\r\n      <span v-else>Home</span>\r\n    </template>\r\n\r\n    <template slot=\"content\">\r\n      <div class=\"mt-1 mb-3\">\r\n        <div class=\"ml-1 float-left\">\r\n          <post-sorter ref=\"sorter\"\r\n            :default_by=\"default_sorter\"\r\n            :options=\"sorter_options\"\r\n            :change=\"load\">\r\n          </post-sorter>\r\n        </div>\r\n        <div class=\"ml-1 float-left\" v-if=\"!loading\">\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn btn-none\"\r\n            @click=\"showPreview()\"\r\n            :class=\"{\r\n              'btn-primary' : $root.showPreview,\r\n              'btn-outline' : !$root.showPreview\r\n            }\"\r\n          >\r\n            <font-awesome-icon :icon=\"['fas', 'th-list']\" />\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            @click=\"hidePreview()\"\r\n            class=\"btn\"\r\n            :class=\"{\r\n              'btn-primary' : !$root.showPreview,\r\n              'btn-outline' : $root.showPreview\r\n            }\">\r\n            <font-awesome-icon :icon=\"['fas', 'list']\" />\r\n          </button>\r\n        </div>\r\n        <div class=\"float-right\">\r\n          <pager :pages=\"pages\"\r\n            :current_page=\"current_page\">\r\n          </pager>\r\n        </div>\r\n        <div class=\"clearfix\"></div>\r\n      </div>\r\n\r\n      <div class=\"post-container\" v-if=\"!loading\">\r\n        <div v-if=\"posts.length == 0\">\r\n          <div class=\"text-center\">\r\n            <h1>There doesn't seem to be any posts here! Why not make one?</h1>\r\n          </div>\r\n        </div>\r\n\r\n        <post\r\n          v-for=\"p in posts\"\r\n          class=\"post-parent\"\r\n          :class=\"{'hide-preview': $root.showPreview === false}\"\r\n          :key=\"p.transaction\"\r\n          @openPost=\"$_openPost\"\r\n          :post=\"p\"\r\n          :showChildren=\"false\"\r\n        />\r\n        <modal\r\n          @click.native.stop=\"$_closePost\"\r\n          v-if=\"selectedPostID\">\r\n          <thread-modal\r\n            @close=\"$_closePost\"\r\n            :id=\"selectedPostID\"\r\n          />\r\n        </modal>\r\n      </div>\r\n      <div class=\"text-center\" v-else>\r\n        <h1><font-awesome-icon :icon=\"['fas', 'spinner']\" spin></font-awesome-icon></h1>\r\n      </div>\r\n      <div v-if=\"!loading\" class=\"float-right mb-3\">\r\n        <pager :pages=\"pages\"\r\n          :current_page=\"current_page\">\r\n        </pager>\r\n      </div>\r\n    </template>\r\n\r\n  </layout>\r\n</template>\r\n\r\n<script>\r\nimport ui from \"@/ui\";\r\nimport { GetNovusphere } from \"@/novusphere\";\r\n\r\nimport Pager from \"@/components/core/Pager\";\r\nimport PostSorter from \"@/components/core/PostSorter\";\r\nimport Post from \"@/components/core/Post\";\r\nimport { storage } from \"@/storage\";\r\nimport Layout from \"@/components/section/Layout\";\r\nimport Modal from \"@/components/modal/Modal.vue\";\r\nimport ThreadModal from \"@/components/ThreadModal.vue\";\r\n\r\nexport default {\r\n  name: \"Home2\",\r\n  metaInfo() {\r\n    const sub = (this.sub) ? `e/${this.sub}` : 'Home';\r\n    return {\r\n      titleTemplate: `%s | ${sub}`,\r\n    };\r\n  },\r\n  components: {\r\n    Pager,\r\n    PostSorter,\r\n    Post,\r\n    Layout,\r\n    Modal,\r\n    ThreadModal,\r\n  },\r\n  watch: {\r\n    \"$route.query.page\": function() {\r\n      this.load();\r\n    },\r\n    \"$route.params.sub\": function() {\r\n      this.load();\r\n    }\r\n  },\r\n  computed: {\r\n    default_sorter() {\r\n      if (this.sub == 'referendum')\r\n        return 'active';\r\n      return 'popular';\r\n    },\r\n    sorter_options() {\r\n      if (this.sub == 'referendum')\r\n        return ['active', 'old'];\r\n\r\n      return ['popular', 'time'];\r\n    },\r\n    subs() {\r\n      return storage.subscribed_subs;\r\n    },\r\n  },\r\n  async mounted() {\r\n    this.load();\r\n  },\r\n  methods: {\r\n    async load() {\r\n      this.loading = true;\r\n      this.sub = this.$route.params.sub;\r\n      this.posts = [];\r\n      this.pages = 0;\r\n      this.selectedPostID = undefined;\r\n      window.scrollTo(0,0);\r\n\r\n      const novusphere = GetNovusphere();\r\n      const benchmark = (new Date()).getTime();\r\n      \r\n      var home = await ui.views.Home(this.$route.query.page, this.sub, this.$refs.sorter.getSorter());\r\n      console.log(`loaded in ${(new Date()).getTime() - benchmark} secs`);\r\n\r\n      this.sub = home.sub;\r\n      this.posts = home.posts;\r\n      this.pages = home.pages;\r\n      this.current_page = home.current_page;\r\n      this.loading = false;\r\n\r\n\r\n    },\r\n    async newThread() {\r\n      try {\r\n        await ui.actions.CheckCreateThread(this.sub);\r\n        this.$refs.submit_modal.showModal();\r\n      }\r\n      catch (reason) {\r\n        alert(reason);\r\n      }\r\n    },\r\n    hidePreview () {\r\n      this.$root.showPreview = false;\r\n      localStorage.setItem('preview', false);\r\n    },\r\n    showPreview () {\r\n      this.$root.showPreview = true;\r\n      localStorage.setItem('preview', true);\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      current_page: 0,\r\n      pages: 0,\r\n      sub: '',\r\n      posts: [], // for posts being displayed\r\n      selectedPostID: undefined,\r\n      eos_referendum: storage.eos_referendum,\r\n    };\r\n  }\r\n};\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/Home.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('layout',{ref:\"layout\",attrs:{\"load\":_vm.load}},[_c('template',{slot:\"topic\"},[(_vm.$root.sub)?_c('span',[_vm._v(\"e/\"+_vm._s(_vm.$root.sub))]):_c('span',[_vm._v(\"Home\")])]),_vm._v(\" \"),_c('template',{slot:\"content\"},[_c('div',{staticClass:\"mt-1 mb-3\"},[_c('div',{staticClass:\"ml-1 float-left\"},[_c('post-sorter',{ref:\"sorter\",attrs:{\"default_by\":_vm.default_sorter,\"options\":_vm.sorter_options,\"change\":_vm.load}})],1),_vm._v(\" \"),(!_vm.loading)?_c('div',{staticClass:\"ml-1 float-left\"},[_c('button',{staticClass:\"btn btn-none\",class:{\n            'btn-primary' : _vm.$root.showPreview,\n            'btn-outline' : !_vm.$root.showPreview\n          },attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.showPreview()}}},[_c('font-awesome-icon',{attrs:{\"icon\":['fas', 'th-list']}})],1),_vm._v(\" \"),_c('button',{staticClass:\"btn\",class:{\n            'btn-primary' : !_vm.$root.showPreview,\n            'btn-outline' : _vm.$root.showPreview\n          },attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.hidePreview()}}},[_c('font-awesome-icon',{attrs:{\"icon\":['fas', 'list']}})],1)]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"float-right\"},[_c('pager',{attrs:{\"pages\":_vm.pages,\"current_page\":_vm.current_page}})],1),_vm._v(\" \"),_c('div',{staticClass:\"clearfix\"})]),_vm._v(\" \"),(!_vm.loading)?_c('div',{staticClass:\"post-container\"},[(_vm.posts.length == 0)?_c('div',[_c('div',{staticClass:\"text-center\"},[_c('h1',[_vm._v(\"There doesn't seem to be any posts here! Why not make one?\")])])]):_vm._e(),_vm._v(\" \"),_vm._l((_vm.posts),function(p){return _c('post',{key:p.transaction,staticClass:\"post-parent\",class:{'hide-preview': _vm.$root.showPreview === false},attrs:{\"post\":p,\"showChildren\":false},on:{\"openPost\":_vm.$_openPost}})}),_vm._v(\" \"),(_vm.selectedPostID)?_c('modal',{nativeOn:{\"click\":function($event){$event.stopPropagation();return _vm.$_closePost($event)}}},[_c('thread-modal',{attrs:{\"id\":_vm.selectedPostID},on:{\"close\":_vm.$_closePost}})],1):_vm._e()],2):_c('div',{staticClass:\"text-center\"},[_c('h1',[_c('font-awesome-icon',{attrs:{\"icon\":['fas', 'spinner'],\"spin\":\"\"}})],1)]),_vm._v(\" \"),(!_vm.loading)?_c('div',{staticClass:\"float-right mb-3\"},[_c('pager',{attrs:{\"pages\":_vm.pages,\"current_page\":_vm.current_page}})],1):_vm._e()])],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-305e3606\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Home.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Home.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Home.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-305e3606\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Home.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Home.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}