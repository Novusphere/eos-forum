webpackJsonp([8],{niH5:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("mvHQ"),s=a.n(n),o=a("Xxa5"),r=a.n(o),i=a("exGp"),l=a.n(i),c=a("Dfrr"),d=a.n(c),u=a("aKUZ"),m=a("TsL6"),v=a("wh04"),p=a("luBh"),_=a("RxEy"),f=a("xSwI"),h=a("67Q6"),b=a("Oh/4"),g={name:"Settings",components:{Pager:_.a,Post:f.a,PostSorter:h.a,Layout:b.a},mounted:function(){var t=this;return l()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.load();case 1:case"end":return e.stop()}},e,t)}))()},computed:{anon_identity:function(){return this.anon_key?d.a.privateToPublic(this.anon_key):""}},methods:{load:function(t){var e=this;return l()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.settings=s()(m.e.settings,null,2),e.mods=m.e.moderation.mods,e.new_theme=m.e.settings.theme,e.anon_key=m.e.anon_id.key,e.anon_name=m.e.anon_id.name,t.next=7,e.loadReccomendedMods();case 7:case"end":return t.stop()}},t,e)}))()},loadReccomendedMods:function(){var t=this;return l()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.actions.GetReccomendedModList();case 2:t.mod_list=e.sent;case 3:case"end":return e.stop()}},e,t)}))()},modListChange:function(){this.new_mod=this.mod_list_value},themeListChange:function(){this.new_theme=this.theme_list_value},reset:function(){this.settings=s()(m.a.settings,null,2)},save:function(){var t=this;return l()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:m.e.settings=JSON.parse(t.settings),t.theme=m.e.settings.theme,t.mods=m.e.moderation.mods,Object(m.c)();case 4:case"end":return e.stop()}},e,t)}))()},forgetAll:function(){window.__forgetStorage()},saveTheme:function(){m.e.settings.theme=this.new_theme,this.theme=this.new_theme,Object(m.c)()},addMod:function(){var t=this;return l()(r.a.mark(function e(){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!m.e.moderation.mods.includes(t.new_mod)){e.next=2;break}return e.abrupt("return");case 2:return a=v.a.dateToKey(new Date),e.next=5,v.a.resolve(t.new_mod,a);case 5:if(e.t0=e.sent,null!=e.t0){e.next=11;break}return e.next=9,confirm('"'+t.new_mod+'" does not seem like a valid moderation endpoint, are you sure you want to add it?');case 9:if(e.sent){e.next=11;break}return e.abrupt("return");case 11:m.e.moderation.mods.push(t.new_mod),v.a.resetCache(),Object(m.c)(),t.mods=m.e.moderation.mods,t.new_mod="";case 16:case"end":return e.stop()}},e,t)}))()},removeMod:function(t){m.e.moderation.mods.splice(t,1),v.a.resetCache(),Object(m.c)(),this.mods=m.e.moderation.mods},newAnonId:function(){var t=this;return l()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.randomKey();case 2:t.anon_key=e.sent;case 3:case"end":return e.stop()}},e,t)}))()},saveAnonId:function(){var t=this;return l()(r.a.mark(function e(){var a,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.anon_name.length>12)){e.next=3;break}return alert("Anonymous name must be less than 13 characters"),e.abrupt("return");case 3:if(m.e.anon_id.name=t.anon_name,m.e.anon_id.key=t.anon_key&&d.a.isValidPrivate(t.anon_key)?t.anon_key:"",!m.e.anon_id.key){e.next=19;break}return e.next=8,Object(p.a)();case 8:Object(m.c)(),t.$forceUpdate(),a=s()({name:m.e.anon_id.name,key:m.e.anon_id.key,identity:d.a.privateToPublic(m.e.anon_id.key)}),(n=window.document.createElement("a")).href=window.URL.createObjectURL(new Blob([a],{type:"application/json"})),n.download="forum-anonid.json",document.body.appendChild(n),n.click(),document.body.removeChild(n),e.next=20;break;case 19:Object(m.c)();case 20:case"end":return e.stop()}},e,t)}))()}},data:function(){return{settings:"",theme:m.e.settings.theme,mods:[],mod_list:[],mod_list_value:"",new_mod:"",theme_list_value:"",new_theme:"",anon_name:"",anon_key:""}}},C={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("layout",{attrs:{load:t.load}},[a("template",{slot:"topic"},[a("span",[t._v("Settings")])]),t._v(" "),a("template",{slot:"content"},[a("b-button",{staticClass:"btn btn-sm btn-primary mb-1",on:{click:function(e){return t.$router.go(-1)}}},[a("font-awesome-icon",{attrs:{icon:["fas","arrow-left"]}}),t._v("\n      back\n    ")],1),t._v(" "),a("ul",{staticClass:"nav nav-tabs",attrs:{role:"tablist"}},[a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link active",attrs:{"data-toggle":"tab",href:"#anonid",role:"tab"}},[t._v("\n          Set ID\n        ")])]),t._v(" "),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{"data-toggle":"tab",href:"#mod",role:"tab"}},[t._v("\n          Moderation\n        ")])]),t._v(" "),t._e(),t._v(" "),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{"data-toggle":"tab",href:"#api",role:"tab"}},[t._v("\n          Raw\n        ")])]),t._v(" "),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{"data-toggle":"tab",href:"#account",role:"tab"}},[t._v("\n          Account\n        ")])])]),t._v(" "),a("div",{staticClass:"tab-content mt-2"},[a("div",{staticClass:"tab-pane fade show active",attrs:{id:"anonid",role:"tabpanel"}},[a("div",{staticClass:"text-center"},[a("p",[t._v("\n            Use this panel to set your ID.\n            This is used when posting anonymously to identify your posts.\n            You can regenerate a new ID / Key at any time.\n          ")])]),t._v(" "),a("form",{staticClass:"mx-4"},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-2 col-form-label"},[t._v("Name")]),t._v(" "),a("div",{staticClass:"col-8"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.anon_name,expression:"anon_name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"name"},domProps:{value:t.anon_name},on:{input:function(e){e.target.composing||(t.anon_name=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-2 col-form-label"},[t._v("Key")]),t._v(" "),a("div",{staticClass:"col-8"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.anon_key,expression:"anon_key"}],staticClass:"form-control",attrs:{type:"text",placeholder:"identity key"},domProps:{value:t.anon_key},on:{input:function(e){e.target.composing||(t.anon_key=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-2 col-form-label"}),t._v(" "),a("div",{staticClass:"col-8"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.anon_identity,expression:"anon_identity"}],staticClass:"form-control",attrs:{type:"text",readonly:"",placeholder:"identity public key"},domProps:{value:t.anon_identity},on:{input:function(e){e.target.composing||(t.anon_identity=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"text-center"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.newAnonId()}}},[t._v("new")]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(e){return t.saveAnonId()}}},[t._v("save")])])])]),t._v(" "),a("div",{staticClass:"tab-pane fade",attrs:{id:"mod",role:"tabpanel"}},[a("div",{staticClass:"text-center"},[a("p",{},[t._v("\n                Use this panel to control your delegated moderation settings.\n                "),a("a",{attrs:{target:"_blank",href:"https://github.com/Novusphere/eos-forum-mod-list"}},[t._v("Click here to learn more")]),t._v(".\n            ")])]),t._v(" "),a("form",{staticClass:"mx-4"},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-2 col-form-label"},[t._v("Known")]),t._v(" "),a("div",{staticClass:"col-8"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.mod_list_value,expression:"mod_list_value"}],staticClass:"form-control",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.mod_list_value=e.target.multiple?a:a[0]},function(e){return t.modListChange()}]}},t._l(t.mod_list,function(e){return a("option",{key:e.name,domProps:{value:e.endpoint}},[t._v("\n                  "+t._s(e.name)+"\n                ")])}),0)]),t._v(" "),a("div",{staticClass:"col-2"})]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-2 col-form-label"}),t._v(" "),a("div",{staticClass:"col-8"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.new_mod,expression:"new_mod"}],staticClass:"form-control",attrs:{type:"text",placeholder:"endpoint"},domProps:{value:t.new_mod},on:{input:function(e){e.target.composing||(t.new_mod=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"col-2"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.addMod()}}},[t._v("\n                add\n              ")])])]),t._v(" "),t._l(t.mods,function(e,n){return a("div",{key:n,staticClass:"form-group row"},[a("label",{staticClass:"col-2 col-form-label"}),t._v(" "),a("div",{staticClass:"col-8"},[a("input",{staticClass:"form-control",attrs:{type:"text",readonly:""},domProps:{value:e}})]),t._v(" "),a("div",{staticClass:"col-2"},[a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return t.removeMod(n)}}},[a("font-awesome-icon",{attrs:{icon:["fas","times"]}})],1)])])})],2)]),t._v(" "),a("div",{staticClass:"tab-pane fade",attrs:{id:"api",role:"tabpanel"}},[a("div",{staticClass:"text-center"},[a("p",{staticClass:"text-alert"},[a("strong",[t._v("Warning:")]),t._v(' You should not modify these settings unless you know what you\'re doing!\n                If you incorrectly change something, click "reset" then "save" to restore the default settings.\n            ')])]),t._v(" "),a("form",{staticClass:"mx-4"},[a("div",{staticClass:"form-group row"},[a("div",{staticClass:"col-sm-12"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.settings,expression:"settings"}],staticClass:"form-control",attrs:{rows:"10",placeholder:"Content"},domProps:{value:t.settings},on:{input:function(e){e.target.composing||(t.settings=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"text-center"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(e){return t.save()}}},[t._v("save")]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.reset()}}},[t._v("reset")]),t._v(" "),a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return t.forgetAll()}}},[t._v("forget all")])])])]),t._v(" "),a("div",{staticClass:"tab-pane fade",attrs:{id:"theme",role:"tabpanel"}},[a("div",{staticClass:"text-center"},[a("p",{},[t._v("\n                Use this panel to control your theme settings.\n            ")])]),t._v(" "),a("form",{staticClass:"mx-4"},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-2 col-form-label"},[t._v("Known")]),t._v(" "),a("div",{staticClass:"col-8"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.theme_list_value,expression:"theme_list_value"}],staticClass:"form-control",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.theme_list_value=e.target.multiple?a:a[0]},function(e){return t.themeListChange()}]}},[a("option",{attrs:{value:"https://eos-forum.org/static/css/theme/night.css"}},[t._v("night theme")]),t._v(" "),a("option",{attrs:{value:"https://eos-forum.org/static/css/theme/day.css"}},[t._v("day theme")])])]),t._v(" "),a("div",{staticClass:"col-2"})]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-2 col-form-label"}),t._v(" "),a("div",{staticClass:"col-8"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.new_theme,expression:"new_theme"}],staticClass:"form-control",attrs:{type:"text",placeholder:"theme css url"},domProps:{value:t.new_theme},on:{input:function(e){e.target.composing||(t.new_theme=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"col-2"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.saveTheme()}}},[t._v("save")])])])])]),t._v(" "),a("div",{staticClass:"tab-pane fade",attrs:{id:"account",role:"tabpanel"}},[a("div",{staticClass:"text-center"}),t._v(" "),a("form",{staticClass:"mx-4"})])])],1)],2)},staticRenderFns:[]},y=a("VU/8")(g,C,!1,null,null,null);e.default=y.exports}});
//# sourceMappingURL=8.d2d24202c7a4b6693371.js.map