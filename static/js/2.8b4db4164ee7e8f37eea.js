webpackJsonp([2],{lO7g:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("Xxa5"),r=s.n(o),a=s("exGp"),n=s.n(a),i=s("aKUZ"),c=(s("aW/X"),s("RxEy")),u=s("67Q6"),l=s("xSwI"),p=s("TsL6"),d=s("Oh/4"),f=s("lZCD"),v=s("YjDO"),h={name:"Home2",metaInfo:function(){return{titleTemplate:"%s | "+(this.sub?"e/"+this.sub:"Home")}},components:{Pager:c.a,PostSorter:u.a,Post:l.a,Layout:d.a,Modal:f.default,ThreadModal:v.a},watch:{"$route.query.page":function(){this.load()},"$route.params.sub":function(){this.load()}},computed:{default_sorter:function(){return"referendum"==this.sub?"active":"popular"},sorter_options:function(){return"referendum"==this.sub?["active","old"]:["popular","time"]},subs:function(){return p.e.subscribed_subs}},mounted:function(){var t=this;return n()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.load();case 1:case"end":return e.stop()}},e,t)}))()},methods:{load:function(){var t=this;return n()(r.a.mark(function e(){var s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,t.sub=t.$route.params.sub,t.posts=[],t.pages=0,t.selectedPostID=void 0,window.scrollTo(0,0),e.next=8,i.a.views.Home(t.$route.query.page,t.sub,t.$refs.sorter.getSorter());case 8:s=e.sent,t.sub=s.sub,t.posts=s.posts,t.pages=s.pages,t.current_page=s.current_page,t.loading=!1;case 14:case"end":return e.stop()}},e,t)}))()},newThread:function(){var t=this;return n()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.actions.CheckCreateThread(t.sub);case 3:t.$refs.submit_modal.showModal(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}},e,t,[[0,6]])}))()},hidePreview:function(){this.$root.showPreview=!1,localStorage.setItem("preview",!1)},showPreview:function(){this.$root.showPreview=!0,localStorage.setItem("preview",!0)}},data:function(){return{loading:!1,current_page:0,pages:0,sub:"",posts:[],selectedPostID:void 0,eos_referendum:p.e.eos_referendum}}},m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("layout",{ref:"layout",attrs:{load:t.load}},[s("template",{slot:"topic"},[t.$root.sub?s("span",[t._v("e/"+t._s(t.$root.sub))]):s("span",[t._v("Home")])]),t._v(" "),s("template",{slot:"content"},[s("div",{staticClass:"mt-1 mb-3"},[s("div",{staticClass:"ml-1 float-left"},[s("post-sorter",{ref:"sorter",attrs:{default_by:t.default_sorter,options:t.sorter_options,change:t.load}})],1),t._v(" "),t.loading?t._e():s("div",{staticClass:"ml-1 float-left"},[s("button",{staticClass:"btn btn-none",class:{"btn-primary":t.$root.showPreview,"btn-outline":!t.$root.showPreview},attrs:{type:"button"},on:{click:function(e){return t.showPreview()}}},[s("font-awesome-icon",{attrs:{icon:["fas","th-list"]}})],1),t._v(" "),s("button",{staticClass:"btn",class:{"btn-primary":!t.$root.showPreview,"btn-outline":t.$root.showPreview},attrs:{type:"button"},on:{click:function(e){return t.hidePreview()}}},[s("font-awesome-icon",{attrs:{icon:["fas","list"]}})],1)]),t._v(" "),s("div",{staticClass:"float-right"},[s("pager",{attrs:{pages:t.pages,current_page:t.current_page}})],1),t._v(" "),s("div",{staticClass:"clearfix"})]),t._v(" "),t.loading?s("div",{staticClass:"text-center"},[s("h1",[s("font-awesome-icon",{attrs:{icon:["fas","spinner"],spin:""}})],1)]):s("div",{staticClass:"post-container"},[0==t.posts.length?s("div",[s("div",{staticClass:"text-center"},[s("h1",[t._v("There doesn't seem to be any posts here! Why not make one?")])])]):t._e(),t._v(" "),t._l(t.posts,function(e){return s("post",{key:e.transaction,staticClass:"post-parent",class:{"hide-preview":!1===t.$root.showPreview},attrs:{post:e,showChildren:!1},on:{openPost:t.$_openPost}})}),t._v(" "),t.selectedPostID?s("modal",{nativeOn:{click:function(e){return e.stopPropagation(),t.$_closePost(e)}}},[s("thread-modal",{attrs:{id:t.selectedPostID},on:{close:t.$_closePost}})],1):t._e()],2),t._v(" "),t.loading?t._e():s("div",{staticClass:"float-right mb-3"},[s("pager",{attrs:{pages:t.pages,current_page:t.current_page}})],1)])],2)},staticRenderFns:[]},w=s("VU/8")(h,m,!1,null,null,null);e.default=w.exports}});
//# sourceMappingURL=2.8b4db4164ee7e8f37eea.js.map