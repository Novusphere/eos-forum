webpackJsonp([9],{VQcn:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("mvHQ"),o=n.n(a),s=n("Xxa5"),r=n.n(s),i=n("exGp"),c=n.n(i),d=n("Dfrr"),u=n.n(d),l=n("aKUZ"),m=n("TsL6"),p=n("wh04"),_=n("luBh"),v=n("RxEy"),f=n("xSwI"),h=n("67Q6"),y=n("Oh/4"),w={name:"Settings",components:{Pager:v.a,Post:f.a,PostSorter:h.a,Layout:y.a},mounted:function(){var e=this;return c()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.load();case 1:case"end":return t.stop()}},t,e)}))()},computed:{anon_identity:function(){return this.anon_key?u.a.privateToPublic(this.anon_key):""}},methods:{load:function(e){var t=this;return c()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.settings=o()(m.e.settings,null,2),t.mods=m.e.moderation.mods,t.new_theme=m.e.settings.theme,t.anon_key=m.e.anon_id.key,t.anon_name=m.e.anon_id.name,e.next=7,t.loadReccomendedMods();case 7:case"end":return e.stop()}},e,t)}))()},loadReccomendedMods:function(){var e=this;return c()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.actions.GetReccomendedModList();case 2:e.mod_list=t.sent;case 3:case"end":return t.stop()}},t,e)}))()},modListChange:function(){this.new_mod=this.mod_list_value},themeListChange:function(){this.new_theme=this.theme_list_value},reset:function(){this.settings=o()(m.a.settings,null,2)},save:function(){var e=this;return c()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:m.e.settings=JSON.parse(e.settings),e.theme=m.e.settings.theme,e.mods=m.e.moderation.mods,Object(m.c)();case 4:case"end":return t.stop()}},t,e)}))()},forgetAll:function(){window.__forgetStorage()},saveTheme:function(){m.e.settings.theme=this.new_theme,this.theme=this.new_theme,Object(m.c)()},addMod:function(){var e=this;return c()(r.a.mark(function t(){var n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!m.e.moderation.mods.includes(e.new_mod)){t.next=2;break}return t.abrupt("return");case 2:return n=p.a.dateToKey(new Date),t.next=5,p.a.resolve(e.new_mod,n);case 5:if(t.t0=t.sent,null!=t.t0){t.next=11;break}return t.next=9,confirm('"'+e.new_mod+'" does not seem like a valid moderation endpoint, are you sure you want to add it?');case 9:if(t.sent){t.next=11;break}return t.abrupt("return");case 11:m.e.moderation.mods.push(e.new_mod),p.a.resetCache(),Object(m.c)(),e.mods=m.e.moderation.mods,e.new_mod="";case 16:case"end":return t.stop()}},t,e)}))()},removeMod:function(e){m.e.moderation.mods.splice(e,1),p.a.resetCache(),Object(m.c)(),this.mods=m.e.moderation.mods},newAnonId:function(){var e=this;return c()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.randomKey();case 2:e.anon_key=t.sent;case 3:case"end":return t.stop()}},t,e)}))()},saveAnonId:function(){var e=this;return c()(r.a.mark(function t(){var n,a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.anon_name.length>12)){t.next=3;break}return alert("Anonymous name must be less than 13 characters"),t.abrupt("return");case 3:if(m.e.anon_id.name=e.anon_name,m.e.anon_id.key=e.anon_key&&u.a.isValidPrivate(e.anon_key)?e.anon_key:"",!m.e.anon_id.key){t.next=19;break}return t.next=8,Object(_.a)();case 8:Object(m.c)(),e.$forceUpdate(),n=o()({name:m.e.anon_id.name,key:m.e.anon_id.key,identity:u.a.privateToPublic(m.e.anon_id.key)}),(a=window.document.createElement("a")).href=window.URL.createObjectURL(new Blob([n],{type:"application/json"})),a.download="forum-anonid.json",document.body.appendChild(a),a.click(),document.body.removeChild(a),t.next=20;break;case 19:Object(m.c)();case 20:case"end":return t.stop()}},t,e)}))()}},data:function(){return{settings:"",theme:m.e.settings.theme,mods:[],mod_list:[],mod_list_value:"",new_mod:"",theme_list_value:"",new_theme:"",anon_name:"",anon_key:""}}},b={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("layout",{attrs:{load:e.load}},[n("template",{slot:"topic"},[n("span",[e._v("Settings")])]),e._v(" "),n("template",{slot:"content"},[n("div",{staticClass:"tab-pane"},[n("div",{staticClass:"text-center"},[n("p",[e._v("\n          Use this panel to set your ID.\n          This is used when posting anonymously to identify your posts.\n          You can regenerate a new ID / Key at any time.\n        ")])]),e._v(" "),n("form",{staticClass:"mx-4"},[n("div",{staticClass:"form-group row"},[n("label",{staticClass:"col-2 col-form-label"},[e._v("Name")]),e._v(" "),n("div",{staticClass:"col-8"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.anon_name,expression:"anon_name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"name"},domProps:{value:e.anon_name},on:{input:function(t){t.target.composing||(e.anon_name=t.target.value)}}})])]),e._v(" "),n("div",{staticClass:"form-group row"},[n("label",{staticClass:"col-2 col-form-label"},[e._v("Key")]),e._v(" "),n("div",{staticClass:"col-8"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.anon_key,expression:"anon_key"}],staticClass:"form-control",attrs:{type:"text",placeholder:"identity key"},domProps:{value:e.anon_key},on:{input:function(t){t.target.composing||(e.anon_key=t.target.value)}}})])]),e._v(" "),n("div",{staticClass:"form-group row"},[n("label",{staticClass:"col-2 col-form-label"}),e._v(" "),n("div",{staticClass:"col-8"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.anon_identity,expression:"anon_identity"}],staticClass:"form-control",attrs:{type:"text",readonly:"",placeholder:"identity public key"},domProps:{value:e.anon_identity},on:{input:function(t){t.target.composing||(e.anon_identity=t.target.value)}}})])]),e._v(" "),n("div",{staticClass:"text-center"},[n("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){return e.newAnonId()}}},[e._v("new")]),e._v(" "),n("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(t){return e.saveAnonId()}}},[e._v("save")])])])])])],2)},staticRenderFns:[]},k=n("VU/8")(w,b,!1,null,null,null);t.default=k.exports}});
//# sourceMappingURL=9.d8bb6f1d3a87d4e28cda.js.map