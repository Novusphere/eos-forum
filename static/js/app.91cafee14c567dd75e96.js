webpackJsonp([13],{0:function(e,t){},"05Ij":function(e,t){e.exports={secp128r1:{p:"fffffffdffffffffffffffffffffffff",a:"fffffffdfffffffffffffffffffffffc",b:"e87579c11079f43dd824993c2cee5ed3",n:"fffffffe0000000075a30d1b9038a115",h:"01",Gx:"161ff7528b899b2d0c28607ca52c5b86",Gy:"cf5ac8395bafeb13c02da292dded7a83"},secp160k1:{p:"fffffffffffffffffffffffffffffffeffffac73",a:"00",b:"07",n:"0100000000000000000001b8fa16dfab9aca16b6b3",h:"01",Gx:"3b4c382ce37aa192a4019e763036f4f5dd4d7ebb",Gy:"938cf935318fdced6bc28286531733c3f03c4fee"},secp160r1:{p:"ffffffffffffffffffffffffffffffff7fffffff",a:"ffffffffffffffffffffffffffffffff7ffffffc",b:"1c97befc54bd7a8b65acf89f81d4d4adc565fa45",n:"0100000000000000000001f4c8f927aed3ca752257",h:"01",Gx:"4a96b5688ef573284664698968c38bb913cbfc82",Gy:"23a628553168947d59dcc912042351377ac5fb32"},secp192k1:{p:"fffffffffffffffffffffffffffffffffffffffeffffee37",a:"00",b:"03",n:"fffffffffffffffffffffffe26f2fc170f69466a74defd8d",h:"01",Gx:"db4ff10ec057e9ae26b07d0280b7f4341da5d1b1eae06c7d",Gy:"9b2f2f6d9c5628a7844163d015be86344082aa88d95e2f9d"},secp192r1:{p:"fffffffffffffffffffffffffffffffeffffffffffffffff",a:"fffffffffffffffffffffffffffffffefffffffffffffffc",b:"64210519e59c80e70fa7e9ab72243049feb8deecc146b9b1",n:"ffffffffffffffffffffffff99def836146bc9b1b4d22831",h:"01",Gx:"188da80eb03090f67cbf20eb43a18800f4ff0afd82ff1012",Gy:"07192b95ffc8da78631011ed6b24cdd573f977a11e794811"},secp256k1:{p:"fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f",a:"00",b:"07",n:"fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",h:"01",Gx:"79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798",Gy:"483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"},secp256r1:{p:"ffffffff00000001000000000000000000000000ffffffffffffffffffffffff",a:"ffffffff00000001000000000000000000000000fffffffffffffffffffffffc",b:"5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b",n:"ffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551",h:"01",Gx:"6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296",Gy:"4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"}}},1:function(e,t){},"1/oy":function(e,t){},"1QQ/":function(e,t){e.exports={_from:"bigi@^1.4.2",_id:"bigi@1.4.2",_inBundle:!1,_integrity:"sha1-nGZalfiLiwj8Bc/XMfVhhZ1yWCU=",_location:"/bigi",_phantomChildren:{},_requested:{type:"range",registry:!0,raw:"bigi@^1.4.2",name:"bigi",escapedName:"bigi",rawSpec:"^1.4.2",saveSpec:null,fetchSpec:"^1.4.2"},_requiredBy:["/ecurve","/eosjs-ecc"],_resolved:"https://registry.npmjs.org/bigi/-/bigi-1.4.2.tgz",_shasum:"9c665a95f88b8b08fc05cfd731f561859d725825",_spec:"bigi@^1.4.2",_where:"C:\\Users\\root\\Desktop\\Work\\Github\\novusphere-eos\\node_modules\\eosjs-ecc",bugs:{url:"https://github.com/cryptocoinjs/bigi/issues"},bundleDependencies:!1,dependencies:{},deprecated:!1,description:"Big integers.",devDependencies:{coveralls:"^2.11.2",istanbul:"^0.3.5",jshint:"^2.5.1",mocha:"^2.1.0",mochify:"^2.1.0"},homepage:"https://github.com/cryptocoinjs/bigi#readme",keywords:["cryptography","math","bitcoin","arbitrary","precision","arithmetic","big","integer","int","number","biginteger","bigint","bignumber","decimal","float"],main:"./lib/index.js",name:"bigi",repository:{url:"git+https://github.com/cryptocoinjs/bigi.git",type:"git"},scripts:{"browser-test":"mochify --wd -R spec",coverage:"istanbul cover ./node_modules/.bin/_mocha -- --reporter list test/*.js",coveralls:"npm run-script coverage && node ./node_modules/.bin/coveralls < coverage/lcov.info",jshint:"jshint --config jshint.json lib/*.js ; true",test:"_mocha -- test/*.js",unit:"mocha"},testling:{files:"test/*.js",harness:"mocha",browsers:["ie/9..latest","firefox/latest","chrome/latest","safari/6.0..latest","iphone/6.0..latest","android-browser/4.2..latest"]},version:"1.4.2"}},"1eOM":function(e,t,n){"use strict";var a=n("Zrlr"),r=n.n(a),s=n("wxAW"),o=n.n(s),i=n("HKE2"),c=n.n(i),u=n("7t+N"),p=n.n(u);n.d(t,"a",function(){return h});var f=["A","B","BLOCKQUOTE","CODE","DEL","DD","DL","EM","H1","H2","H3","H4","I","IMG","KBD","LI","OL","P","PRE","S","SUP","SUB","STRONG","STRIKE","UL","BR","HR","#text","DIV","FIGURE","CENTER"],l=new RegExp("javascript","i"),d=new RegExp("vbscript","i"),m=new RegExp("data","i"),h=function(){function e(t,n){r()(this,e),this.text=(t||"").replace(/&#x200B;/g,""),this.html="",this.attachments=[],(void 0==n||n>=1538136731)&&(this.useTwitter=!0),this._generateHtml(),this._postProcess()}return o()(e,[{key:"_generateHtml",value:function(){var e,t,n=[];if(this.useTwitter){var a="hash"==window.__ROUTER_MODE__?"\\#":"";n.push((e=function(e){return'<a href="'+a+"/u/"+e.trim().substring(1)+'">'+e+"</a>"},t=function(e){return' <a href="'+a+"/tag/"+e+'">#'+e+"</a>"},function(){return[{type:"lang",regex:"\\s([@][a-z1-5\\.]+)",replace:function(t,n,a){return"\\"===n?t:e(t)}},{type:"lang",regex:"(.)?#([a-zA-Z0-9_-]+)\\b",replace:function(e,n,a){return"\\"===n||"/"==n?e:t(a)}},{type:"lang",regex:"\\\\@",replace:"@"}]}))}var r=new c.a.Converter({extensions:n,simplifiedAutoLink:!0,requireSpaceBeforeHeadingText:!!this.useTwitter});this.html=r.makeHtml(this.text)}},{key:"_postProcess",value:function(){for(var e=p.a.parseHTML(this.html),t="",n=0;n<e.length;n++)t+=this._strip(e[n]);this.html=t}},{key:"_safeAttribute",value:function(e){return!e||0!=e.search(l)&&0!=e.search(d)&&0!=e.search(m)?e:"javascript:void(0)"}},{key:"_strip",value:function(e){if(e.children)for(var t=0;t<e.children.length;t++)this._strip(e.children[t]);if("SCRIPT"==e.nodeName)e.innerHTML="";else if(-1==f.indexOf(e.nodeName)){"IFRAME"==e.nodeName&&this.attachments.push({value:this._safeAttribute(e.getAttribute("src")),width:this._safeAttribute(e.getAttribute("width")),height:this._safeAttribute(e.getAttribute("height")),display:"iframe",type:"url"});for(t=0;t<e.attributes.length;t++)e.attributes[t].value="";e.innerHTML="",e.style="display: none;"}if(e.attributes)for(t=0;t<e.attributes.length;t++)e.attributes[t].value=this._safeAttribute(e.attributes[t].value);return e.outerHTML?e.outerHTML:""}}]),e}()},2:function(e,t){},3:function(e,t){},"6ZSt":function(e,t){e.exports={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}}},"9M+g":function(e,t){},DQRy:function(e,t){e.exports={version:"eosio::abi/1.0",types:[{new_type_name:"account_name",type:"name"},{new_type_name:"action_name",type:"name"},{new_type_name:"permission_name",type:"name"}],structs:[{name:"permission_level",base:"",fields:[{name:"actor",type:"account_name"},{name:"permission",type:"permission_name"}]},{name:"action",base:"",fields:[{name:"account",type:"account_name"},{name:"name",type:"action_name"},{name:"authorization",type:"permission_level[]"},{name:"data",type:"bytes"}]},{name:"extension",base:"",fields:[{name:"type",type:"uint16"},{name:"data",type:"bytes"}]},{name:"transaction_header",base:"",fields:[{name:"expiration",type:"time_point_sec"},{name:"ref_block_num",type:"uint16"},{name:"ref_block_prefix",type:"uint32"},{name:"max_net_usage_words",type:"varuint32"},{name:"max_cpu_usage_ms",type:"uint8"},{name:"delay_sec",type:"varuint32"}]},{name:"transaction",base:"transaction_header",fields:[{name:"context_free_actions",type:"action[]"},{name:"actions",type:"action[]"},{name:"transaction_extensions",type:"extension[]"}]}]}},GfHa:function(e,t){},"H9r/":function(e,t){e.exports={version:"eosio::abi/1.1",structs:[{name:"extensions_entry",base:"",fields:[{name:"tag",type:"uint16"},{name:"value",type:"bytes"}]},{name:"type_def",base:"",fields:[{name:"new_type_name",type:"string"},{name:"type",type:"string"}]},{name:"field_def",base:"",fields:[{name:"name",type:"string"},{name:"type",type:"string"}]},{name:"struct_def",base:"",fields:[{name:"name",type:"string"},{name:"base",type:"string"},{name:"fields",type:"field_def[]"}]},{name:"action_def",base:"",fields:[{name:"name",type:"name"},{name:"type",type:"string"},{name:"ricardian_contract",type:"string"}]},{name:"table_def",base:"",fields:[{name:"name",type:"name"},{name:"index_type",type:"string"},{name:"key_names",type:"string[]"},{name:"key_types",type:"string[]"},{name:"type",type:"string"}]},{name:"clause_pair",base:"",fields:[{name:"id",type:"string"},{name:"body",type:"string"}]},{name:"error_message",base:"",fields:[{name:"error_code",type:"uint64"},{name:"error_msg",type:"string"}]},{name:"variant_def",base:"",fields:[{name:"name",type:"string"},{name:"types",type:"string[]"}]},{name:"abi_def",base:"",fields:[{name:"version",type:"string"},{name:"types",type:"type_def[]"},{name:"structs",type:"struct_def[]"},{name:"actions",type:"action_def[]"},{name:"tables",type:"table_def[]"},{name:"ricardian_clauses",type:"clause_pair[]"},{name:"error_messages",type:"error_message[]"},{name:"abi_extensions",type:"extensions_entry[]"},{name:"variants",type:"variant_def[]$"}]}]}},Id91:function(e,t){},JDRS:function(e,t){e.exports={version:"eosio::abi/1.1",structs:[{name:"extensions_entry",base:"",fields:[{name:"tag",type:"uint16"},{name:"value",type:"bytes"}]},{name:"type_def",base:"",fields:[{name:"new_type_name",type:"string"},{name:"type",type:"string"}]},{name:"field_def",base:"",fields:[{name:"name",type:"string"},{name:"type",type:"string"}]},{name:"struct_def",base:"",fields:[{name:"name",type:"string"},{name:"base",type:"string"},{name:"fields",type:"field_def[]"}]},{name:"action_def",base:"",fields:[{name:"name",type:"name"},{name:"type",type:"string"},{name:"ricardian_contract",type:"string"}]},{name:"table_def",base:"",fields:[{name:"name",type:"name"},{name:"index_type",type:"string"},{name:"key_names",type:"string[]"},{name:"key_types",type:"string[]"},{name:"type",type:"string"}]},{name:"clause_pair",base:"",fields:[{name:"id",type:"string"},{name:"body",type:"string"}]},{name:"error_message",base:"",fields:[{name:"error_code",type:"uint64"},{name:"error_msg",type:"string"}]},{name:"variant_def",base:"",fields:[{name:"name",type:"string"},{name:"types",type:"string[]"}]},{name:"abi_def",base:"",fields:[{name:"version",type:"string"},{name:"types",type:"type_def[]"},{name:"structs",type:"struct_def[]"},{name:"actions",type:"action_def[]"},{name:"tables",type:"table_def[]"},{name:"ricardian_clauses",type:"clause_pair[]"},{name:"error_messages",type:"error_message[]"},{name:"abi_extensions",type:"extensions_entry[]"},{name:"variants",type:"variant_def[]$"}]}]}},Jmt5:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("Xxa5"),r=n.n(a),s=n("exGp"),o=n.n(s),i=n("7+uW"),c=n("e6fC"),u={methods:{$_openPost:function(e,t,n){this.selectedPostID=e,this.oldRoute=this.$route.path,history.pushState({},"",window.__PRE_ROUTE__+"/e/"+t+"/"+e+"/"+n)},$_closePost:function(){this.selectedPostID=void 0,history.pushState({},"",""+window.__PRE_ROUTE__+this.oldRoute)}}},p=n("7t+N"),f=n.n(p),l=n("TsL6"),d=n("p6/X"),m=n("dpOi"),h=n("cS+J"),_=n("1e6/"),y=n("C/JF"),b=n("fhbW"),v=n("Yu89"),g=n("DfMW"),x=(n("Jmt5"),n("K3J8"),n("9M+g"),{name:"ErrorModal",mounted:function(){var e=this;return o()(r.a.mark(function t(){var n,a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=e,a=window.alert,window._alert=function(e){window.lynxMobile&&a(e)},window.alert=function(e,t){n.text=e,n.title=t&&t.title?t.title:"Error",n.text_class=t&&t.text_class?t.text_class:"text-alert",f()("#errorModal").modal(t)};case 4:case"end":return t.stop()}},t,e)}))()},methods:{},data:function(){return{text_class:"",title:"",text:""}}}),w={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"modal fade",attrs:{tabindex:"-1",role:"dialog",id:"errorModal"}},[n("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[n("div",{staticClass:"modal-content"},[n("div",{staticClass:"modal-header"},[n("h5",{staticClass:"modal-title"},[e._v(e._s(e.title))]),e._v(" "),e._m(0)]),e._v(" "),n("div",{staticClass:"modal-body",staticStyle:{"word-wrap":"break-word"}},[n("div",{class:e.text_class+" text-center"},[e._v("\n              "+e._s(e.text)+"\n          ")])]),e._v(" "),e._m(1)])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"}},[this._v("close")])])}]},k=n("VU/8")(x,w,!1,null,null,null).exports,$=n("//Fk"),j=n.n($),A={name:"ConfirmModal",mounted:function(){var e=this;return o()(r.a.mark(function t(){var n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=e,window.confirm=function(){var e=o()(r.a.mark(function e(t,a,s){var o,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a&&a(n.setStatus),!0,n.text=t,(i=f()(".modal.show")).modal("hide"),f()("#confirmModal").modal({backdrop:"static",keyboard:!1});case 6:return e.next=8,new j.a(function(e){n.resolve=e});case 8:if(!(o=e.sent)||!s){e.next=17;break}return e.next=12,s();case 12:if(!e.sent){e.next=15;break}return e.abrupt("break",20);case 15:e.next=18;break;case 17:return e.abrupt("break",20);case 18:e.next=6;break;case 20:return f()("#confirmModal").modal("hide"),i.modal(),a&&a(null),e.abrupt("return",o);case 24:case"end":return e.stop()}},e,this)}));return function(t,n,a){return e.apply(this,arguments)}}();case 2:case"end":return t.stop()}},t,e)}))()},methods:{setStatus:function(e){this.text=e}},data:function(){return{resolve:null,text:""}}},S={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"modal fade",attrs:{tabindex:"-1",role:"dialog",id:"confirmModal"}},[n("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[n("div",{staticClass:"modal-content"},[e._m(0),e._v(" "),n("div",{staticClass:"modal-body"},[n("div",{staticClass:"text-center"},[e._v("\n              "+e._s(e.text)+"\n          ")])]),e._v(" "),n("div",{staticClass:"modal-footer"},[n("button",{staticClass:"btn btn-outline-success",attrs:{type:"button"},on:{click:function(t){e.resolve(!0)}}},[e._v("ok")]),e._v(" "),n("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(t){e.resolve(!1)}}},[e._v("cancel")])])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"modal-header"},[t("h5",{staticClass:"modal-title"},[this._v("Confirm")]),this._v(" "),t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])}]},O=n("VU/8")(A,S,!1,null,null,null).exports,T=n("aKUZ"),E={name:"UpvoteModal",mounted:function(){var e=this;return o()(r.a.mark(function t(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},t,e)}))()},computed:{upvotes:function(){return T.a.helpers.AtmosToUpvotes(this.atmos)}},methods:{upvote:function(){var e=this;return o()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,T.a.actions.UpvotePaid(e.post,e.atmos);case 3:e.post.up=t.sent,f()("#upvoteModal").modal("hide"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.error=t.t0;case 10:case"end":return t.stop()}},t,e,[[0,7]])}))()},modal:function(e){this.post=e,this.atmos=T.a.helpers.UpvotesToAtmos(1),this.error="",f()("#upvoteModal").modal()}},data:function(){return{error:"",atmos:10,post:T.a.helpers.PlaceholderPost()}}},C={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"modal fade",attrs:{tabindex:"-1",role:"dialog",id:"upvoteModal"}},[n("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[n("div",{staticClass:"modal-content"},[n("div",{staticClass:"modal-header"},[n("h5",{staticClass:"modal-title"},[e._v("Upvote post by "+e._s(e.post.data.poster))]),e._v(" "),e._m(0)]),e._v(" "),n("div",{staticClass:"modal-body"},[n("div",{staticClass:"text-center"},[e._v("\n              You have already used your free up vote on this post, however, you can use your ATMOS to up vote it further.\n              Half of the ATMOS used to up vote this post will go to the poster and\n              the other half is send to novuspheredb account as a DAO fund.\n              If you are up voting your own post, the entire amount will be sent to the DAO fund.\n              Enter the amount of ATMOS you would like to use below.\n          ")]),e._v(" "),n("form",{staticClass:"mt-3"},[n("div",{staticClass:"form-group row"},[n("label",{staticClass:"col-sm-2 col-form-label"},[e._v("ATMOS")]),e._v(" "),n("div",{staticClass:"col-sm-10"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.atmos,expression:"atmos"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.atmos},on:{input:function(t){t.target.composing||(e.atmos=t.target.value)}}})])]),e._v(" "),n("div",{staticClass:"form-group row"},[n("label",{staticClass:"col-sm-2 col-form-label"},[e._v("Upvotes")]),e._v(" "),n("label",{staticClass:"col-sm-10 col-form-label"},[e._v(e._s(e.upvotes))])])]),e._v(" "),e.error?n("div",{staticClass:"text-center text-danger mt-3"},[n("p",[e._v(e._s(e.error))])]):e._e()]),e._v(" "),n("div",{staticClass:"modal-footer"},[n("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){e.upvote()}}},[e._v("upvote")]),e._v(" "),n("button",{staticClass:"btn btn-danger",attrs:{type:"button","data-dismiss":"modal"}},[e._v("close")])])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])}]},M={name:"App",components:{ErrorModal:k,ConfirmModal:O,UpvoteModal:n("VU/8")(E,C,!1,null,null,null).exports},mounted:function(){window._VueApp=this,screen.width<=600&&(this.$root.showSubs=!1),localStorage.getItem("preview")&&(this.$root.showPreview=JSON.parse(localStorage.getItem("preview")))},methods:{},computed:{},data:function(){return{}}},q={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("ErrorModal"),this._v(" "),t("ConfirmModal"),this._v(" "),t("UpvoteModal",{ref:"upvote"}),this._v(" "),t("router-view")],1)},staticRenderFns:[]},P=n("VU/8")(M,q,!1,null,null,null).exports,B=n("/ocq");i.a.use(B.a),window.__ROUTER_MODE__=window.__ROUTER_MODE__||"hash",window.__PRE_ROUTE__="hash"==window.__ROUTER_MODE__?"#":"";var N=new B.a({mode:window.__ROUTER_MODE__,routes:[{path:"/",name:"Index",component:function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"lO7g"))}},{path:"/feed",name:"Feed",component:function(){return Promise.all([n.e(0),n.e(11)]).then(n.bind(null,"aPTA"))}},{path:"/e/:sub?",name:"Sub",component:function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"lO7g"))}},{path:"/e/:sub/new",name:"StartThread",component:function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"tAW0"))}},{path:"/e/:sub/edit/:edit_id",name:"EditThread",component:function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"tAW0"))}},{path:"/e/:sub/:id/:title?/:child_id?",name:"Thread",component:function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,"/NAZ"))}},{path:"/history/:id",name:"History",component:function(){return Promise.all([n.e(0),n.e(10)]).then(n.bind(null,"yZHR"))}},{path:"/settings",name:"Settings",component:function(){return Promise.all([n.e(0),n.e(8)]).then(n.bind(null,"niH5"))}},{path:"/u/:account",name:"UserProfile",component:function(){return Promise.all([n.e(0),n.e(3)]).then(n.bind(null,"Xr79"))}},{path:"/tag/:tag",name:"Tag",component:function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,"99El"))}},{path:"/setID",name:"setID",component:function(){return Promise.all([n.e(0),n.e(9)]).then(n.bind(null,"VQcn"))}},{path:"/notifications",name:"UserNotifications",component:function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,"eu8N"))}},{path:"/test",name:"Test",component:function(){return n.e(6).then(n.bind(null,"ua3t"))}}]});N.beforeEach(function(e,t,n){window.scrollTo(0,0),n()});var R=N,z=n("p3jY"),D=n.n(z),I=n("AYPi"),F=n.n(I),U=n("T1ft"),G=n.n(U);window._jQuery=f.a,y.c.add(b.a),y.c.add(v.a),y.c.add(g.a),o()(r.a.mark(function e(){var t,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("history"!=window.__ROUTER_MODE__){e.next=4;break}if(!window.location.hash){e.next=4;break}return window.location.href=window.location.origin+window.location.hash.substring(1),e.abrupt("return");case 4:return i.a.component("v-select",G.a),i.a.component("font-awesome-icon",_.a),i.a.use(c.a),i.a.use(D.a),i.a.mixin(u),t={id:"UA-131745808-1",router:R},(n=document.getElementById("adBanner"))&&0!=n.clientHeight||(console.log("Ad-blocker detected"),window.__ANALYTICS__&&(t.customResourceURL=window.__ANALYTICS__)),i.a.use(F.a,t),i.a.config.productionTip=!1,e.next=16,Object(d.e)();case 16:return e.next=18,Object(l.b)();case 18:return e.next=20,Object(m.h)();case 20:return e.next=22,Object(h.a)();case 22:new i.a({el:"#app",router:R,components:{App:P},data:function(){return{icons:[],showSubs:!0,showPreview:!0,mode:"normal"}},template:"<App/>"});case 23:case"end":return e.stop()}},e,this)}))()},TsL6:function(e,t,n){"use strict";n.d(t,"a",function(){return w}),n.d(t,"e",function(){return k}),n.d(t,"c",function(){return A}),n.d(t,"b",function(){return v}),n.d(t,"d",function(){return j});var a,r,s=n("Xxa5"),o=n.n(s),i=n("woOf"),c=n.n(i),u=n("exGp"),p=n.n(u),f=n("mvHQ"),l=n.n(f),d=n("fZjL"),m=n.n(d),h=n("7t+N"),_=n.n(h),y=n("Dfrr"),b=n.n(y),v=(a=p()(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.__PRESETS__&&window.__PRESETS__.storage&&(t=window.__PRESETS__.storage,w=_.a.extend(!0,w,t),t.subscribed_subs&&(w.subscribed_subs=t.subscribed_subs),c()(k,JSON.parse(l()(w)))),e.next=3,g();case 3:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)}),g=(r=p()(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=window.localStorage.getItem("eosforum");try{$(JSON.parse(t))||(console.log("Failed to import/migrate storage"),console.log(t))}catch(e){console.log("Failed to load storage"),console.log(e)}if(k.anon_id.key){e.next=6;break}return e.next=5,b.a.randomKey();case 5:k.anon_id.key=e.sent;case 6:A();case 7:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)}),x=1e3,w={version:18,eos_referendum:!0,subscribed_subs:["all","novusphere","eos","anon-r-eos","anon-pol-econ"],unsubscribed_subs:[],following:[],new_posts:{},last_notification:0,moderation:{hide_spam_threads:!0,mods:[],accounts:[],transactions:[]},accountstate:{},anon_id:{name:"",key:""},settings:{atmos_upvotes:!0,scatter_timeout:3e3,theme:"https://eos-forum.org/static/css/theme/day.css",novusphere_api:"https://db.novusphere.io",eos_api:{host:"eos.greymass.com",port:"443",protocol:"https"}}},k=_.a.extend(!0,{},w);function $(e){for(;e.version<k.version;)e.version<5?e.subscribed_subs=k.subscribed_subs:e.version<7?e.settings=k.settings:e.version<8?e.settings.atmos_upvotes=k.settings.atmos_upvotes:e.version<9?e.settings.scatter_timeout=k.settings.scatter_timeout:e.version<11?e.settings.theme=k.settings.theme:e.version<12?e.eos_referendum=k.eos_referendum:e.version<13?e.moderation=k.moderation:e.version<14?e.moderation.hide_spam_threads=k.moderation.hide_spam_threads:e.version<15?e.anon_id=k.anon_id:e.version<16?e.accountstate={}:e.version<17?e.unsubscribed_subs=[]:e.version<18&&(e.following=[]),e.version++;return e.version>=k.version?(k=e,j(),k.following=k.following.filter(function(e){return e}),console.log("Loaded storage version "+k.version),!0):(console.log("Loaded storage failed"),!1)}function j(){for(var e=0;e<w.subscribed_subs.length;e++){var t=w.subscribed_subs[e];k.subscribed_subs.includes(t)||k.unsubscribed_subs.includes(t)||k.subscribed_subs.push(t)}k.subscribed_subs=k.subscribed_subs.sort()}function A(){var e=m()(k.new_posts);if(e.length>x)for(var t=x-e.length,n=0;n<t;n++)delete k.new_posts[e[n]];window.localStorage.setItem("eosforum",l()(k))}window.__getStorage=function(){return k},window.__saveStorage=function(){A()},window.__forgetStorage=function(){window.localStorage.setItem("eosforum",""),window.location.reload()},window.__forgetSettings=function(){k.settings=w.settings,A(),window.location.reload()}},"YX+T":function(e,t){e.exports={version:"eosio::abi/1.1",structs:[{name:"extensions_entry",base:"",fields:[{name:"tag",type:"uint16"},{name:"value",type:"bytes"}]},{name:"type_def",base:"",fields:[{name:"new_type_name",type:"string"},{name:"type",type:"string"}]},{name:"field_def",base:"",fields:[{name:"name",type:"string"},{name:"type",type:"string"}]},{name:"struct_def",base:"",fields:[{name:"name",type:"string"},{name:"base",type:"string"},{name:"fields",type:"field_def[]"}]},{name:"action_def",base:"",fields:[{name:"name",type:"name"},{name:"type",type:"string"},{name:"ricardian_contract",type:"string"}]},{name:"table_def",base:"",fields:[{name:"name",type:"name"},{name:"index_type",type:"string"},{name:"key_names",type:"string[]"},{name:"key_types",type:"string[]"},{name:"type",type:"string"}]},{name:"clause_pair",base:"",fields:[{name:"id",type:"string"},{name:"body",type:"string"}]},{name:"error_message",base:"",fields:[{name:"error_code",type:"uint64"},{name:"error_msg",type:"string"}]},{name:"variant_def",base:"",fields:[{name:"name",type:"string"},{name:"types",type:"string[]"}]},{name:"abi_def",base:"",fields:[{name:"version",type:"string"},{name:"types",type:"type_def[]"},{name:"structs",type:"struct_def[]"},{name:"actions",type:"action_def[]"},{name:"tables",type:"table_def[]"},{name:"ricardian_clauses",type:"clause_pair[]"},{name:"error_messages",type:"error_message[]"},{name:"abi_extensions",type:"extensions_entry[]"},{name:"variants",type:"variant_def[]$"}]}]}},ZgIz:function(e,t){e.exports={version:"eosio::abi/1.0",types:[{new_type_name:"account_name",type:"name"},{new_type_name:"action_name",type:"name"},{new_type_name:"permission_name",type:"name"}],structs:[{name:"permission_level",base:"",fields:[{name:"actor",type:"account_name"},{name:"permission",type:"permission_name"}]},{name:"action",base:"",fields:[{name:"account",type:"account_name"},{name:"name",type:"action_name"},{name:"authorization",type:"permission_level[]"},{name:"data",type:"bytes"}]},{name:"extension",base:"",fields:[{name:"type",type:"uint16"},{name:"data",type:"bytes"}]},{name:"transaction_header",base:"",fields:[{name:"expiration",type:"time_point_sec"},{name:"ref_block_num",type:"uint16"},{name:"ref_block_prefix",type:"uint32"},{name:"max_net_usage_words",type:"varuint32"},{name:"max_cpu_usage_ms",type:"uint8"},{name:"delay_sec",type:"varuint32"}]},{name:"transaction",base:"transaction_header",fields:[{name:"context_free_actions",type:"action[]"},{name:"actions",type:"action[]"},{name:"transaction_extensions",type:"extension[]"}]}]}},aKUZ:function(e,t,n){"use strict";var a,r,s,o=n("Xxa5"),i=n.n(o),c=n("exGp"),u=n.n(c),p=n("aW/X"),f=n("dpOi"),l=n("TsL6"),d=n("luBh"),m=n("dXij"),h=n.n(m),_=n("wh04"),y=n("dYGJ"),b=n("p6/X"),v=function(){var e=u()(i.a.mark(function e(t,n){var a,r,s,o,c,u,f,l,d;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=parseInt(t||1),a=Object(p.a)(),r={name:"propose",createdAt:{$gte:1547183719}},s={from:"eosforum",let:{proposal_name:"$data.proposal_name",createdAt:"$createdAt"},pipeline:[{$match:{name:"clnproposal"}},{$project:{txid:"$transaction",test:{$and:[{$eq:["$data.proposal_name","$$proposal_name"]},{$gte:["$createdAt","$$createdAt"]}]}}},{$match:{test:!0}}],as:"expired"},(new Date).getTime()/1e3,o={"expired.0":{$exists:"old"==n}},e.next=8,a.api({aggregate:"eosforum",maxTimeMS:7500,cursor:{},pipeline:[{$match:r},{$lookup:s},{$match:o},{$count:"n"}]});case 8:return c=(c=e.sent.cursor.firstBatch[0])?c.n:0,u=Math.ceil(c/b.f),e.next=13,a.api({aggregate:"eosforum",maxTimeMS:7500,cursor:{},pipeline:[{$match:r},{$lookup:s},{$match:o},{$sort:a.query.sort.time()},{$skip:a.query.skip.page(t,b.f)},{$limit:b.f},{$lookup:a.query.lookup.threadReplies(!0)},{$project:a.query.project.post({total_replies:!0})}]});case 13:f=e.sent.cursor.firstBatch,new Date,l=0;case 16:if(!(l<f.length)){e.next=24;break}return d=new y.a(f[l]),e.next=20,d.normalize();case 20:f[l]=d;case 21:l++,e.next=16;break;case 24:return e.abrupt("return",{sub:"referendum",posts:f,pages:u,current_page:t});case 25:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var e=u()(i.a.mark(function e(t,n,a){var r,s,o,c,u,d,m,g,x,w,k,$,j;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((new Date).getTime(),!n||"referendum"!=n.toLowerCase()){e.next=3;break}return e.abrupt("return",v(t,a));case 3:if(t=parseInt(t||1),n||(n=l.e.subscribed_subs),r=Object(p.a)(),!l.e.moderation.hide_spam_threads){e.next=12;break}return e.next=9,_.a.getBlockedAccounts();case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=[];case 13:return s=e.t0,e.next=16,r.api({count:r.config.collection_forum,maxTimeMS:7500,query:r.query.match.threadsBySub(n,s)});case 16:return o=e.sent.n,c=Math.ceil(o/b.f),e.next=20,Object(f.f)();case 20:return u=e.sent,e.next=23,r.api({aggregate:r.config.collection_forum,maxTimeMS:7500,cursor:{},pipeline:[{$match:r.query.match.threadsBySub(n,s)},{$lookup:r.query.lookup.postState()},{$project:r.query.project.post({normalize_up:!0,normalize_parent:!0,score:!0})},{$sort:a},{$skip:r.query.skip.page(t,b.f)},{$limit:b.f},{$lookup:r.query.lookup.threadReplies()},{$lookup:r.query.lookup.postMyVote(u.account)},{$project:r.query.project.post({normalize_my_vote:!0,recent_edit:!0,total_replies:!0,tip_replies_only:!0,score:!1})}]});case 23:return d=e.sent.cursor.firstBatch,e.next=26,_.a.getPinned(n);case 26:return m=e.sent,e.next=29,r.api({aggregate:r.config.collection_forum,maxTimeMS:7500,cursor:{},pipeline:[{$match:r.query.match.threadById(m)},{$lookup:r.query.lookup.postState()},{$project:r.query.project.post({normalize_up:!0,normalize_parent:!0})},{$lookup:r.query.lookup.threadReplies()},{$lookup:r.query.lookup.postMyVote(u.account)},{$project:r.query.project.post({normalize_my_vote:!0,recent_edit:!0,total_replies:!0,tip_replies_only:!0})}]});case 29:return g=e.sent.cursor.firstBatch,m=m.map(function(e){return g.find(function(t){return t.transaction==e})}).filter(function(e){return e}),e.next=33,y.a.fromArray(h()(m,d.filter(function(e){return!m.find(function(t){return t.transaction==e.transaction})})));case 33:d=e.sent,x=0;case 35:if(!(x<d.length)){e.next=56;break}if(w=d[x],x<g.length&&(w.is_pinned=!0),!(w.replies&&w.replies.length>0)){e.next=49;break}k=0;case 40:if(!(k<w.replies.length)){e.next=49;break}if(w.replies[k].data.json_metadata.parent_uuid!=w.data.post_uuid){e.next=46;break}return $=new y.a(w.replies[k]),e.next=45,$.normalize();case 45:w.children.push($);case 46:k++,e.next=40;break;case 49:(j=l.e.new_posts[w.data.post_uuid])&&isNaN(j)&&(j=j.replies),w.new_replies=void 0==j?w.total_replies+1:w.total_replies-j,w.new_replies=Math.max(w.new_replies,0);case 53:x++,e.next=35;break;case 56:return e.abrupt("return",{is_subscribed:l.e.subscribed_subs.includes(n),posts:d,pages:c,current_page:t,sub:Array.isArray(n)?"":n});case 57:case"end":return e.stop()}},e,this)}));return function(t,n,a){return e.apply(this,arguments)}}(),x=function(){var e=u()(i.a.mark(function e(t){var n,a,r,s,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(new Date).getTime(),t=parseInt(t||1),n=Object(p.a)(),console.log(l.e.following),e.next=6,n.api({count:n.config.collection_forum,maxTimeMS:7500,query:n.query.match.feed(l.e.following)});case 6:return a=e.sent.n,r=Math.ceil(a/b.f),e.next=10,Object(f.f)();case 10:return s=e.sent,e.next=13,n.api({aggregate:n.config.collection_forum,maxTimeMS:1e4,cursor:{},pipeline:[{$match:n.query.match.feed(l.e.following)},{$lookup:n.query.lookup.postState()},{$project:n.query.project.post({normalize_up:!0,score:!0})},{$sort:n.query.sort.time()},{$skip:n.query.skip.page(t,b.f)},{$limit:b.f},{$lookup:n.query.lookup.postReplies()},{$lookup:n.query.lookup.postMyVote(s.account)},{$lookup:n.query.lookup.postParent()},{$project:n.query.project.post({normalize_my_vote:!0,normalize_parent:!0,recent_edit:!0})},{$match:n.query.match.validParent()}]});case 13:return o=e.sent.cursor.firstBatch,e.next=16,y.a.fromArray(o);case 16:return o=e.sent,e.abrupt("return",{posts:o,pages:r,current_page:t});case 18:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=u()(i.a.mark(function e(t,n,a){var r,s,o,c,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=parseInt(t||1),n=n.toLowerCase(),r=Object(p.a)(),e.next=5,r.api({count:r.config.collection_forum,maxTimeMS:7500,query:r.query.match.postsByTag(n)});case 5:return s=e.sent.n,o=Math.ceil(s/b.f),e.next=9,Object(f.f)();case 9:return c=e.sent,e.next=12,r.api({aggregate:r.config.collection_forum,maxTimeMS:7500,cursor:{},pipeline:[{$match:r.query.match.postsByTag(n)},{$lookup:r.query.lookup.postState()},{$lookup:r.query.lookup.postParent()},{$project:r.query.project.post({normalize_up:!0,normalize_parent:!0,score:!0})},{$sort:a},{$skip:r.query.skip.page(t,b.f)},{$limit:b.f},{$lookup:r.query.lookup.postReplies()},{$lookup:r.query.lookup.postMyVote(c.account)},{$project:r.query.project.post({normalize_my_vote:!0,recent_edit:!0})},{$match:r.query.match.validParent()}]});case 12:return u=e.sent.cursor.firstBatch,e.next=15,y.a.fromArray(u);case 15:return u=e.sent,e.abrupt("return",{posts:u,pages:o,current_page:t,tag:n});case 17:case"end":return e.stop()}},e,this)}));return function(t,n,a){return e.apply(this,arguments)}}(),k=function(){var e=u()(i.a.mark(function e(t){var n,a,r,s,o,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(p.a)(),e.next=3,Object(f.f)();case 3:return a=e.sent,e.next=6,n.api({aggregate:n.config.collection_forum,maxTimeMS:7500,cursor:{},pipeline:[{$match:{transaction:t}},{$lookup:n.query.lookup.postState()},{$lookup:n.query.lookup.postMyVote(a.account)},{$project:n.query.project.post({normalize_up:!0,normalize_my_vote:!0})}]});case 6:return r=e.sent.cursor.firstBatch[0],r=new y.a(r),e.next=10,r.normalize();case 10:return e.next=12,n.api({find:n.config.collection_forum,maxTimeMS:7500,filter:n.query.match.postEdits(r.data.poster,r.data.post_uuid),sort:n.query.sort.time(!0)});case 12:return s=e.sent.cursor.firstBatch,e.next=15,y.a.fromArray(s);case 15:for(s=e.sent,o=0;o<s.length;o++)(c=s[o]).up=r.up,c.my_vote=r.my_vote,r.addChild(c);return e.abrupt("return",{main_post:r});case 18:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=u()(i.a.mark(function e(t,n){var a,r,s,o,c,u,d,m,h,_,b,v,g,x,w;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(p.a)(),e.next=3,Object(f.f)();case 3:return r=e.sent,e.next=6,a.api({aggregate:a.config.collection_forum,maxTimeMS:7500,cursor:{},pipeline:[{$match:a.query.match.threadById(t)},{$limit:1},{$lookup:a.query.lookup.postState()},{$lookup:a.query.lookup.postMyVote(r.account)},{$project:a.query.project.post({normalize_up:!0,normalize_my_vote:!0})}]});case 6:if((s=e.sent.cursor.firstBatch[0])&&s.transaction){e.next=9;break}return e.abrupt("return",{opening_post:null,main_post:null,count:0});case 9:return s=new y.a(s),e.next=12,s.normalize();case 12:if(10239!=s.data.content.length){e.next=17;break}return e.next=15,a.api({aggregate:a.config.collection_nsdb,maxTimeMS:7500,cursor:{},pipeline:[{$match:{"data.account":s.data.poster,"data.json.method":"content_ext","data.json.data.post_uuid":s.data.post_uuid}}]});case 15:(o=e.sent.cursor.firstBatch[0])&&(s.data.content+=o.data.json.data.content);case 17:c=l.e.new_posts[s.data.post_uuid],s.__seen=c?c.seen:(new Date).getTime()/1e3,u=[],d=0;case 21:return e.next=23,a.api({aggregate:a.config.collection_forum,maxTimeMS:7500,cursor:{},pipeline:[{$match:a.query.match.threadReplies(s.data.post_uuid)},{$lookup:a.query.lookup.postState()},{$lookup:a.query.lookup.postMyVote(r.account)},{$project:a.query.project.post({normalize_up:!0,normalize_my_vote:!0})},{$skip:d}]});case 23:for(m=e.sent.cursor.firstBatch,d+=m.length,h=0;h<m.length;h++)u.push(m[h]);if(m&&0!=m.length&&!(m.length<100)){e.next=28;break}return e.abrupt("break",30);case 28:e.next=21;break;case 30:return e.next=32,y.a.threadify(s,u);case 32:return _=e.sent,b=_.new_posts,u=_.responses,l.e.new_posts[s.data.post_uuid]={title:s.data.json_metadata.title,sub:s.data.json_metadata.sub,id:s.o_id,replies:b,seen:parseInt((new Date).getTime()/1e3)},Object(l.c)(),v=s,n&&(g=function e(t){for(var n=0;n<t.children.length;n++){var a=t.children[n];a.depth=t.depth+1,e(a)}return t},64==n.length?x=u.find(function(e){return e.o_transaction==n}):(n=parseInt(n),x=u.find(function(e){return e.o_id==n})),x.depth>=1&&((w=_.map[x.data.json_metadata.parent_uuid]).children.length=0,w.children.push(x),x=w),x.parent=s,x.depth=0,x.data.json_metadata.title=s.data.json_metadata.title,s=g(x)),e.abrupt("return",{opening_post:v,main_post:s,count:u.length});case 40:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),j=function(){var e=u()(i.a.mark(function e(t){var n,a,r,s,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=parseInt(t||1),n=Object(p.a)(),e.next=4,Object(f.f)();case 4:if((a=e.sent).account){e.next=7;break}return e.abrupt("return",{current_page:1,pages:0,posts:[]});case 7:return e.next=9,n.api({count:n.config.collection_forum,maxTimeMS:7500,query:n.query.match.notifications(a.account)});case 9:return r=e.sent.n,s=Math.ceil(r/b.f),e.next=13,n.api({aggregate:n.config.collection_forum,maxTimeMS:7500,cursor:{},pipeline:[{$match:n.query.match.notifications(a.account)},{$lookup:n.query.lookup.postState()},{$lookup:n.query.lookup.postParent()},{$project:n.query.project.post({normalize_up:!0,normalize_parent:!0})},{$sort:n.query.sort.time()},{$skip:n.query.skip.page(t,b.f)},{$limit:b.f},{$lookup:n.query.lookup.postReplies()},{$lookup:n.query.lookup.postMyVote(a.account)},{$project:n.query.project.post({normalize_my_vote:!0,recent_edit:!0})},{$match:n.query.match.validParent()}]});case 13:return o=e.sent.cursor.firstBatch,e.next=16,y.a.fromArray(o);case 16:return o=e.sent,e.abrupt("return",{current_page:t,pages:s,posts:o});case 18:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),A=n("cS+J"),S=function(){var e=u()(i.a.mark(function e(t,n,a){var r,s,o,c,u,d,m,h,v,g,x,w,k;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(new Date).getTime(),t=parseInt(t||1),e.next=4,_.a.isBlocked(0,null,n);case 4:return s=e.sent,o=l.e.following.includes(n),c=Object(f.e)(),u=Object(p.a)(),e.t0=parseFloat,e.next=11,c.rpc.get_currency_balance("novusphereio",n,"ATMOS");case 11:return e.t1=e.sent[0],d=(0,e.t0)(e.t1),d=(isNaN(d)?0:d).toFixed(3),console.log("loaded (1) in "+((new Date).getTime()-r)+" ms"),e.next=17,u.api({count:u.config.collection_forum,maxTimeMS:1e4,query:u.query.match.postsByAccount(n,!0)});case 17:return m=e.sent.n,console.log("loaded (2) in "+((new Date).getTime()-r)+" ms"),e.next=21,u.api({count:u.config.collection_forum,maxTimeMS:1e4,query:u.query.match.threadsByAccount(n)});case 21:return h=e.sent.n,console.log("loaded (3) in "+((new Date).getTime()-r)+" ms"),v=Math.ceil((m+h)/b.f),e.next=26,Object(f.f)();case 26:return g=e.sent,e.next=29,u.api({aggregate:u.config.collection_forum,maxTimeMS:1e4,cursor:{},pipeline:[{$match:u.query.match.postsByAccount(n,!1)},{$sort:a},{$skip:u.query.skip.page(t,b.f)},{$limit:b.f},{$lookup:u.query.lookup.postState()},{$project:u.query.project.post({normalize_up:!0,score:!0})},{$lookup:u.query.lookup.postReplies()},{$lookup:u.query.lookup.postMyVote(g.account)},{$lookup:u.query.lookup.postParent()},{$project:u.query.project.post({normalize_my_vote:!0,normalize_parent:!0,recent_edit:!0})},{$match:u.query.match.validParent()}]});case 29:return x=e.sent.cursor.firstBatch,console.log("loaded (4) in "+((new Date).getTime()-r)+" ms"),e.next=33,y.a.fromArray(x);case 33:return x=e.sent,w=x.length>0?new Date(1e3*x[0].createdAt).toLocaleString():"N/A",e.next=37,Object(A.a)(n);case 37:return k=e.sent,console.log("loaded (5) in "+((new Date).getTime()-r)+" ms"),e.abrupt("return",{current_page:t,account:n,user_icons:k,is_blocked:s,is_followed:o,balance_atmos:d,n_comments:m,n_threads:h,last_activity:w,posts:x,pages:v});case 40:case"end":return e.stop()}},e,this)}));return function(t,n,a){return e.apply(this,arguments)}}(),O=function(){var e=u()(i.a.mark(function e(){var t,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(p.a)(),e.next=3,t.api({aggregate:t.config.collection_forum,maxTimeMS:7500,cursor:{},pipeline:[{$match:{"data.json_metadata.sub":{$exists:!0,$ne:""},"data.json_metadata.edit":!1}},{$group:{_id:"$data.json_metadata.sub",count:{$sum:1}}},{$sort:{count:-1}}]});case 3:return n=e.sent.cursor.firstBatch,e.abrupt("return",{subs:n});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),T=function(){var e=u()(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("anon-r-eos"!=t){e.next=3;break}throw"You cannot make new threads in this sub from eos-forum";case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=u()(i.a.mark(function e(t,n){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=function(e,t){for(;;){var n=e.indexOf(t);if(n<0)break;e.splice(n,1)}},!t){e.next=8;break}if(!l.e.subscribed_subs.includes(n)){e.next=4;break}return e.abrupt("return",!0);case 4:a(l.e.unsubscribed_subs,n),l.e.subscribed_subs.push(n),e.next=12;break;case 8:if(!l.e.unsubscribed_subs.includes(n)){e.next=10;break}return e.abrupt("return",!1);case 10:a(l.e.subscribed_subs,n),l.e.unsubscribed_subs.push(n);case 12:return l.e.subscribed_subs=l.e.subscribed_subs.sort(),Object(l.c)(),e.next=16,Object(d.b)();case 16:return e.abrupt("return",t);case 17:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),C=function(){var e=u()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.f)();case 2:return e.sent.notifications=0,l.e.last_notification=parseInt((new Date).getTime()/1e3),Object(l.c)(),e.next=8,Object(d.b)();case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),M=function(){var e=u()(i.a.mark(function e(t,n){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:n?(a=l.e.moderation.accounts.indexOf(t))>-1&&l.e.moderation.accounts.splice(a,1):l.e.moderation.accounts.push(t),Object(l.c)();case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),q=function(){var e=u()(i.a.mark(function e(t,n){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return a=l.e.following.indexOf(t),n?a>-1&&l.e.following.splice(a,1):-1==a&&l.e.following.push(t),Object(l.c)(),e.next=7,Object(d.b)();case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),P=function(){var e=u()(i.a.mark(function e(t,n){var a,r,s,o,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=parseFloat(n),!(isNaN(n)||n<=0)){e.next=3;break}throw"Invalid quantity of atmos";case 3:return e.next=5,Object(f.f)();case 5:return a=e.sent,Object(f.e)(),[{actor:a.account,permission:a.auth}],r="upvote for "+t.o_transaction,s=(n/(a.account==t.data.poster?1:2)).toFixed(3)+" ATMOS",e.prev=10,o=[],a.account!=t.data.poster&&o.push({contract:"novusphereio",name:"transfer",data:{from:a.account,to:t.data.poster,quantity:s,memo:r}}),o.push({contract:"novusphereio",name:"transfer",data:{from:a.account,to:"novuspheredb",quantity:s,memo:r}}),e.next=16,Object(f.c)(o);case 16:e.sent,e.next=23;break;case 19:throw e.prev=19,e.t0=e.catch(10),console.log(e.t0),"Error: upvote transaction failed!";case 23:return c=Math.floor(n/b.g),e.abrupt("return",parseInt(t.up)+c);case 25:case"end":return e.stop()}},e,this,[[10,19]])}));return function(t,n){return e.apply(this,arguments)}}(),B=n("mvHQ"),N=n.n(B),R=function(){var e=u()(i.a.mark(function e(t){var n,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.f)();case 2:if((n=e.sent).account){e.next=5;break}throw"You must be logged in to upvote comments!";case 5:return a={contract:"novuspheredb",name:"push",data:{account:n.account,json:N()({protocol:"novusphere",method:"forum_vote",data:{txid:t.o_transaction}})}},e.next=8,Object(f.c)(a);case 8:return e.sent,t.my_vote||(t.my_vote={account:n.account,txid:t.o_transaction}),e.abrupt("return",(t.up?t.up:0)+1);case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),z=n("xhVP"),D=function(){var e=u()(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=JSON,e.next=3,z.a.get("https://raw.githubusercontent.com/Novusphere/eos-forum-settings/master/mod-list.json");case 3:return e.t1=e.sent,t=e.t0.parse.call(e.t0,e.t1),e.abrupt("return",t.list);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),I=(a=u()(i.a.mark(function e(t,n,a,r,s,o){var c,u,p,l,d,m,h,_,y,b;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:if(!n.edit){e.next=4;break}return e.abrupt("return");case 4:if((c=t.content.match(/\#tip [0-9\.]+ [A-Z]+( @[a-z0-9\.]+)?/gi))&&0!=c.length){e.next=7;break}return e.abrupt("return");case 7:return u=Object(f.e)(),e.next=10,Object(f.h)();case 10:p=e.sent,l=0;case 12:if(!(l<c.length)){e.next=30;break}if(d=n.parent_poster,(m=c[l].split(" ")).length>=4&&(d=m[3].substring(1)),m[2]=m[2].toUpperCase(),h=p.find(function(e){return e.symbol==m[2]})){e.next=21;break}return s("Error: could not find contract for tip symbol "+m[2]),e.abrupt("return",!1);case 21:return e.next=23,Object(f.g)(u,h.account,h.symbol);case 23:_=e.sent,y=parseFloat(m[1]).toFixed(_),b={contract:h.account,name:"transfer",data:{from:o.account,to:d,quantity:y+" "+h.symbol,memo:"tip for "+a}},r.push(b);case 27:l++,e.next=12;break;case 30:case"end":return e.stop()}},e,this)})),function(e,t,n,r,s,o){return a.apply(this,arguments)}),F=(r=u()(i.a.mark(function e(t,n,a,r,s,o){var c,u,f,l,d;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:if(!n.edit){e.next=4;break}return e.abrupt("return");case 4:if((c=t.content.match(/\#giftaccount [A-Za-z0-9\.]{12}/gi))&&0!=c.length){e.next=7;break}return e.abrupt("return");case 7:return u=c[0].split(" ")[1],f=Object(p.a)(),e.next=11,f.api({aggregate:f.config.collection_forum,maxTimeMS:7500,cursor:{},pipeline:[{$match:f.query.match.threadById(a)}]});case 11:if((l=e.sent.cursor.firstBatch[0])&&l.data.json_metadata.anon_id){e.next=14;break}return e.abrupt("return");case 14:d=l.data.json_metadata.anon_id.pub,r.push({contract:"eosio",name:"newaccount",data:{creator:o.account,name:u,owner:d,active:d}}),r.push({contract:"eosio",name:"buyrambytes",data:{payer:o.account,receiver:u,bytes:4092}}),r.push({contract:"eosio",name:"delegatebw",data:{from:o.account,receiver:u,stake_net_quantity:"0.0500 EOS",stake_cpu_quantity:"0.1500 EOS",transfer:0}});case 18:case"end":return e.stop()}},e,this)})),function(e,t,n,a,s,o){return r.apply(this,arguments)}),U=(s=u()(i.a.mark(function e(t,n,a){var r,s,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=10240,!(t.content.length<r)){e.next=3;break}return e.abrupt("return");case 3:s=t.content.substring(r-1),o=t.content.substring(0,r-1),t.content=o,n.push({contract:"novuspheredb",name:"push",data:{account:a.account,json:N()({protocol:"novusphere",method:"content_ext",data:{post_uuid:t.post_uuid,content:s}})}});case 7:case"end":return e.stop()}},e,this)})),function(e,t,n){return s.apply(this,arguments)}),G=function(){var e=u()(i.a.mark(function e(t,n,a,r,s,o){var c,u,l,d,m,h;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:return s||(s=function(){}),c=Object(p.a)(),e.next=6,Object(f.f)();case 6:if(u=e.sent,t.poster=a?t.poster:u.account,e.prev=8,!a){e.next=26;break}if(!r){e.next=16;break}return e.next=13,confirm("Are you sure you want to post this with your forum ID?");case 13:if(e.sent){e.next=16;break}return s("Error: post canceled"),e.abrupt("return",!1);case 16:return e.next=18,c.anonymousPost(t);case 18:if(!(d=e.sent).error){e.next=23;break}return s(d.error),console.log(d.error),e.abrupt("return",!1);case 23:l=d.transaction_id,e.next=37;break;case 26:return m=JSON.parse(t.json_metadata),h=[{contract:b.c,name:"post",data:t}],e.next=30,I(t,m,n,h,s,u);case 30:return e.next=32,F(t,m,n,h,s,u);case 32:return e.next=34,U(t,h,u);case 34:return e.next=36,Object(f.c)(h);case 36:l=e.sent;case 37:e.next=44;break;case 39:return e.prev=39,e.t0=e.catch(8),s("Creating tx and broadcasting to EOS... Failed!"),console.log(e.t0),e.abrupt("return",!1);case 44:if(o){e.next=48;break}return s("Waiting for Novusphere to index..."),e.next=48,c.waitTx(l,500,1e3);case 48:return s(""),e.abrupt("return",l);case 50:case"end":return e.stop()}},e,this,[[8,39]])}));return function(t,n,a,r,s,o){return e.apply(this,arguments)}}(),L=n("EKx1"),V=n.n(L),H={GetProposal:function(e){var t=this;return u()(i.a.mark(function n(){var a,r,s,o;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(p.a)(),r={name:"propose",transaction:e},s={from:"eosforum",let:{proposal_name:"$data.proposal_name",createdAt:"$createdAt"},pipeline:[{$match:{name:"clnproposal"}},{$project:{txid:"$transaction",test:{$and:[{$eq:["$data.proposal_name","$$proposal_name"]},{$gte:["$createdAt","$$createdAt"]}]}}},{$match:{test:!0}}],as:"expired"},t.next=5,a.api({aggregate:"eosforum",maxTimeMS:7500,cursor:{},pipeline:[{$match:r},{$lookup:s}]});case 5:return o=t.sent.cursor.firstBatch,t.abrupt("return",o&&o.length>0?o[0]:null);case 7:case"end":return t.stop()}},n,t)}))()},GetVotes:function(e){var t=this;return u()(i.a.mark(function n(){var a,r,s;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(p.a)(),t.next=3,a.api({find:"eosforum",maxTimeMS:7500,filter:{name:"vote","data.proposal_name":e.data.proposal_name,createdAt:{$gte:e.createdAt}},sort:a.query.sort.time()});case 3:return r=t.sent.cursor.firstBatch,t.next=6,a.api({find:"eosforum",maxTimeMS:7500,filter:{name:"unvote","data.proposal_name":e.data.proposal_name,createdAt:{$gte:e.createdAt}},sort:a.query.sort.time()});case 6:return s=t.sent.cursor.firstBatch,t.abrupt("return",{votes:r,unvotes:s});case 8:case"end":return t.stop()}},n,t)}))()},Status:function(e){var t=this;return u()(i.a.mark(function n(){var a,r,s,o,c;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return Object(f.e)(),n.next=3,t.GetProposal(e);case 3:return a=n.sent,n.t0=JSON,n.next=7,z.a.get("https://s3.amazonaws.com/api.eosvotes.io/eosvotes/tallies/latest.json");case 7:return n.t1=n.sent,r=n.t0.parse.call(n.t0,n.t1),s=r[a.data.proposal_name],o=0,c=0,s&&(o=s.stats.staked[1],c=s.stats.staked[0],o=(isNaN(o)?0:parseInt(o))/1e4,c=(isNaN(c)?0:parseInt(c))/1e4),n.abrupt("return",{title:a.data.title,for:o,against:c,approval:o/Math.max(o+c,1),voters:s?s.stats.votes.total:-1});case 13:case"end":return n.stop()}},n,t)}))()},PushNewProposal:function(e){var t=this;return u()(i.a.mark(function n(){var a,r,s,o,c;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=function(e,t){for(var n=V()(e+t),a="",r=0;r<12;r++){var s=n.charCodeAt(r);a+=s>=48&&s<=57?String.fromCharCode(122-(s-48)):String.fromCharCode(s)}return a},!(e.title.length>1024)){t.next=3;break}throw"Title is too long, over limit by "+(1024-e.title.length)+" characters";case 3:if(!(e.content.length>3e4)){t.next=5;break}throw"Post is too long, over limit by "+(3e4-e.content.length)+" characters";case 5:return t.next=7,Object(f.f)();case 7:return r=t.sent,s={proposer:r.account,proposal_name:a(r.account,e.content),title:e.title,proposal_json:N()({type:e.type,content:e.content,options:e.options}),expires_at:new Date(e.expires_at).getTime()/1e3},t.prev=9,t.next=12,Object(f.c)({contract:"eosio.forum",name:"propose",data:s});case 12:o=t.sent,t.next=19;break;case 15:throw t.prev=15,t.t0=t.catch(9),console.log(t.t0),"Error: Failed to submit proposal!";case 19:return c=Object(p.a)(),t.next=22,c.waitTx(o,500,1e3,"eosforum");case 22:return t.abrupt("return",o);case 23:case"end":return t.stop()}},n,t,[[9,15]])}))()},CleanProposal:function(e){var t=this;return u()(i.a.mark(function n(){var a,r,s;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.GetProposal(e);case 2:return a=n.sent,r={contract:"eosio.forum",name:"clnproposal",data:{proposal_name:a.data.proposal_name,max_count:4294967295}},n.next=6,Object(f.c)(r);case 6:return s=n.sent,n.abrupt("return",s);case 8:case"end":return n.stop()}},n,t)}))()},Expire:function(e){var t=this;return u()(i.a.mark(function n(){var a,r,s,o;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.GetProposal(e);case 2:return a=n.sent,r={contract:"eosio.forum",name:"expire",data:{proposal_name:a.data.proposal_name}},n.next=6,Object(f.c)(r);case 6:return s=n.sent,o=Object(p.a)(),n.next=10,o.waitTx(s,500,1e3,"eosforum");case 10:case"end":return n.stop()}},n,t)}))()},Vote:function(e,t){var n=this;return u()(i.a.mark(function a(){var r,s,o,c;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(f.f)();case 2:return r=a.sent,a.next=5,n.GetProposal(e);case 5:return s=a.sent,o={contract:"eosio.forum",name:"vote",data:{voter:r.account,proposal_name:s.data.proposal_name,vote:t,vote_json:""}},a.next=9,Object(f.c)(o);case 9:return c=a.sent,a.abrupt("return",c);case 11:case"end":return a.stop()}},a,n)}))()}},J=n("woOf"),W=n.n(J),Z=n("DlMc"),X=n("Dfrr"),K=n.n(X),Y=n("1eOM");var Q={GetRandomHeaderText:function(){return b.d[Math.floor(Math.random()*b.d.length)]},GenerateAnonData:function(){var e=u()(i.a.mark(function e(t){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n={name:l.e.anon_id.name,pub:"",sig:""},l.e.anon_id.key){e.next=6;break}return e.next=4,K.a.randomKey();case 4:l.e.anon_id.key=e.sent,Object(l.c)();case 6:return l.e.anon_id.key&&K.a.isValidPrivate(l.e.anon_id.key)&&(n.pub=K.a.privateToPublic(l.e.anon_id.key),n.sig=K.a.sign(t,l.e.anon_id.key,"utf8")),e.abrupt("return",n);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),PlaceholderPost:function(){return new y.a},UpvotesToAtmos:function(e){return e*b.g},AtmosToUpvotes:function(e){return e/b.g},IsAnonSub:function(e){return"anon"==e||0==e.indexOf("anon-")},GeneratePostUuid:function(){return Object(Z.v4)()},ParseMarkdown:function(e,t){return new Y.a(e,t)},GetHost:function(e){if(0==e.indexOf("magnet:"))return"magnet link";var t=document.createElement("a");return t.href=e,t.host.toLowerCase()},Route:function(e,t){var n=W()({},e.query),a=W()({},e.params),r=e.name;return t.query&&(n=W()(n,t.query)),t.params&&(a=W()(a,t.params)),{name:r,query:n,params:a}},UpdateBrand:function(e){e&&(e=e.toLowerCase());var t=e&&e in b.a?b.a[e]:b.a.novusphere;W()(b.b,t)}};window.addEventListener("identity",u()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.a)();case 2:return e.next=4,Object(d.b)();case 4:Object(l.c)();case 5:case"end":return e.stop()}},e,this)}))),window.addEventListener("identityUpdate",u()(i.a.mark(function e(){var t,n,a,r,s,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(f.e)(),e.next=3,Object(f.f)();case 3:return n=e.sent,e.t0=parseFloat,e.next=7,t.rpc.get_currency_balance("novusphereio",n.account,"ATMOS");case 7:if(e.t1=e.sent[0],a=(0,e.t0)(e.t1),r=a,!b.b.token_contract||"novusphereio"==b.b.token_contract&&"ATMOS"==b.b.token_symbol){e.next=16;break}return e.t2=parseFloat,e.next=14,t.rpc.get_currency_balance(b.b.token_contract,n.account,b.b.token_symbol);case 14:e.t3=e.sent[0],r=(0,e.t2)(e.t3);case 16:return s=Object(p.a)(),e.next=19,s.api({aggregate:s.config.collection_forum,maxTimeMS:7500,cursor:{},pipeline:[{$match:s.query.match.notifications(n.account,l.e.last_notification)},{$count:"n"}]});case 19:o=e.sent.cursor.firstBatch,n.atmos=(isNaN(a)?0:a).toFixed(3),n.token=(isNaN(r)?0:r).toFixed(3),n.notifications=o.length>0?o[0].n:0;case 23:case"end":return e.stop()}},e,this)})));t.a={views:{Home:g,Feed:x,Tag:w,Thread:$,UserNotifications:j,UserProfile:S,PostHistory:k,Search:O,Referendum:v},actions:{CheckCreateThread:T,Subscribe:E,MarkNotificationsAsRead:C,ToggleBlockUser:M,ToggleFollowUser:q,UpvotePaid:P,UpvoteFree:R,GetReccomendedModList:D,PushNewPost:G,Referendum:H},helpers:Q}},"aW/X":function(e,t,n){"use strict";var a=n("Xxa5"),r=n.n(a),s=n("mvHQ"),o=n.n(s),i=n("exGp"),c=n.n(i),u=n("Zrlr"),p=n.n(u),f=n("wxAW"),l=n.n(f),d=n("xhVP"),m={postParent:function(){return{from:w().config.collection_forum,localField:"data.reply_to_post_uuid",foreignField:"data.post_uuid",as:"parent"}},postState:function(){return{from:w().config.collection_post_state,localField:"transaction",foreignField:"txid",as:"state"}},threadReplies:function(e){var t=w();return e?{from:t.config.collection_forum,let:{post_uuid:{$concat:[{$literal:"ref-"},"$transaction"]}},pipeline:[{$project:{test:{$eq:["$$post_uuid","$data.reply_to_post_uuid"]}}},{$match:{test:!0}}],as:"replies"}:{from:t.config.collection_forum,localField:"data.post_uuid",foreignField:"data.reply_to_post_uuid",as:"replies"}},postReplies:function(){return{from:w().config.collection_forum,localField:"data.post_uuid",foreignField:"data.json_metadata.parent_uuid",as:"replies"}},postMyVote:function(e){return{from:w().config.collection_post_vote,let:{transaction:"$transaction"},pipeline:[{$match:{account:e}},{$project:{account:"$account",txid:"$txid",test:{$eq:["$$transaction","$txid"]}}},{$match:{test:!0}}],as:"my_vote"}}},h={notifications:function(e,t){return t||(t=15391e5),{createdAt:{$gt:t},"data.json_metadata.sub":{$exists:!0,$ne:""},"data.poster":{$ne:e},$or:[{$or:[{"data.reply_to_poster":e},{"data.json_metadata.parent_poster":e}]},{mentions:e}]}},threadById:function(e){return Array.isArray(e)?{transaction:{$in:e}}:64==e.length?{transaction:e}:{id:parseInt(e)}},threadReplies:function(e){return{"data.reply_to_post_uuid":e}},threadsBySub:function(e,t){var n={"data.json_metadata.sub":e,"data.reply_to_post_uuid":"",createdAt:{$gte:1531434299}};return"all"==e?n["data.json_metadata.sub"]={$exists:!0,$ne:""}:"anon"==e?n["data.json_metadata.sub"]={$regex:"(^anon$|^anon-)",$options:"i"}:Array.isArray(e)&&(n["data.json_metadata.sub"]={$in:e}),t&&t.length>0&&(n["data.poster"]={$nin:t}),n},feed:function(e){return{createdAt:{$gte:parseInt((new Date).getTime()/1e3)-5356800},"data.json_metadata.edit":!1,"data.json_metadata.sub":{$exists:!0,$ne:""},"data.poster":{$in:e}}},threadsByAccount:function(e){return{"data.json_metadata.edit":!1,"data.json_metadata.sub":{$exists:!0,$ne:""},"data.reply_to_post_uuid":"","data.poster":e,createdAt:{$gte:1531434299}}},postsByTag:function(e){var t={"data.json_metadata.edit":!1,createdAt:{$gte:1531434299}};return Array.isArray(e)||(e=[e]),e=e.map(function(e){return e.toLowerCase()}),t.$or=[{tags:e},{$and:[{"data.json_metadata.sub":{$in:e}},{"data.reply_to_post_uuid":""}]}],t},postEdits:function(e,t){return{"data.poster":e,"data.json_metadata.parent_uuid":t,"data.json_metadata.edit":!0}},postsByAccount:function(e,t){var n=this.threadsByAccount(e);return t?n["data.reply_to_post_uuid"]={$ne:""}:delete n["data.reply_to_post_uuid"],n},validParent:function(){return{$or:[{parent:null},{"parent.data.json_metadata":{$ne:null}}]}}},_=n("woOf"),y=n.n(_),b=n("TsL6");var v={lookup:m,match:h,project:{post:function(e){var t,n,a={id:"$id",name:"$name",transaction:"$transaction",createdAt:"$createdAt",data:"$data",tags:"$tags",expired:"$expired",replies:(e=y()({normalize_up:!1,normalize_parent:!1,normalize_my_vote:!1,recent_edit:!1,tip_replies_only:!1,total_replies:!1,score:!0},e)).total_replies?[]:"$replies",up:e.normalize_up?{$ifNull:[{$arrayElemAt:["$state.up",0]},0]}:"$up",up_atmos:e.normalize_up?{$ifNull:[{$arrayElemAt:["$state.up_atmos",0]},0]}:"$up_atmos",parent:e.normalize_parent?{$arrayElemAt:["$parent",0]}:"$parent",score:"$score",my_vote:e.normalize_my_vote?{$arrayElemAt:["$my_vote",0]}:"$my_vote",recent_edit:"$recent_edit"};return e.tip_replies_only&&(a.replies={$filter:{input:"$replies",as:"replies",cond:{$and:[{$eq:["$data.post_uuid","$$replies.data.json_metadata.parent_uuid"]},{$in:["tip",{$ifNull:["$$replies.tags",[]]}]}]}}}),e.score&&(a.score=(t=(new Date).getTime()/1e3,n=[1,{$ifNull:[{$arrayElemAt:["$state.up",0]},0]}],b.e.settings.atmos_upvotes&&(n=[{$add:n},{$ifNull:[{$arrayElemAt:["$state.up_atmos",0]},0]}]),{$divide:[{$add:n=[{$add:n},{$cond:[{$ne:["$data.json_metadata.sub","anon-r-eos"]},1,0]}]},{$pow:[{$add:[{$divide:[{$subtract:[t,"$createdAt"]},3600]},2]},1.8]}]})),e.recent_edit&&(a.recent_edit={$arrayElemAt:[{$filter:{input:"$replies",as:"reply",cond:{$and:[{$eq:["$$reply.data.json_metadata.edit",!0]},{$eq:["$$reply.data.json_metadata.parent_uuid","$data.post_uuid"]},{$eq:["$$reply.data.poster","$data.poster"]}]}}},-1]}),e.total_replies&&(a.total_replies={$size:{$filter:{input:"$replies",as:"reply",cond:{$ne:["$$reply.data.json_metadata.edit",!0]}}}}),a}},skip:{page:function(e,t){return(e-1)*t}},sort:{score:function(e){return{score:e?1:-1}},time:function(e){return{createdAt:e?1:-1}}}},g=function(){function e(t){p()(this,e),this.config=t,this.query=v}return l()(e,[{key:"api",value:function(){var e=c()(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post(this.config.url+"/api",o()(t));case 2:if(!(n=e.sent).error){e.next=6;break}throw console.log(n),n;case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"cors",value:function(){var e=c()(r.a.mark(function e(t){var n,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.config.url+"/service/cors/?"+t,e.next=3,d.a.get(n);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getApiEnabled",value:function(){var e=c()(r.a.mark(function e(t,n){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,void 0!=this[n]){e.next=6;break}return e.next=4,d.a.get(this.config.url+t);case 4:a=e.sent,this[n]=a.enabled;case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this[n]=!1;case 11:if(!this[n]){e.next=13;break}return e.abrupt("return",this.config.url);case 13:return e.abrupt("return","https://db.novusphere.io");case 14:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t,n){return e.apply(this,arguments)}}()},{key:"authorizeAccountState",value:function(){var e=c()(r.a.mark(function e(t,n,a,s){var i,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getApiEnabled("/service/accountstate/","_account_state");case 2:return e.t0=e.sent,i=e.t0+"/service/accountstate/authorize",e.next=6,d.a.post(i,{value:o()({name:t,key:n,nonce:a,sig:s})});case 6:return c=e.sent,e.abrupt("return",c);case 8:case"end":return e.stop()}},e,this)}));return function(t,n,a,r){return e.apply(this,arguments)}}()},{key:"isAccountStateAuthorized",value:function(){var e=c()(r.a.mark(function e(t,n,a){var s,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getApiEnabled("/service/accountstate/","_account_state");case 2:return e.t0=e.sent,s=e.t0+"/service/accountstate/authorized",s+="?session_key="+t,s+="&key="+a,s+="&name="+n,e.next=9,d.a.get(s);case 9:if(!(o=e.sent).error){e.next=12;break}return e.abrupt("return",!1);case 12:return e.abrupt("return",o.authorized);case 13:case"end":return e.stop()}},e,this)}));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"getAccountState",value:function(){var e=c()(r.a.mark(function e(t){var n,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getApiEnabled("/service/accountstate/","_account_state");case 2:return e.t0=e.sent,n=e.t0+"/service/accountstate/get",t.length>=13?n+="?key="+t:n+="?name="+t,e.next=7,d.a.get(n);case 7:if(!(a=e.sent).error){e.next=10;break}return e.abrupt("return",null);case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"saveAccountState",value:function(){var e=c()(r.a.mark(function e(t){var n,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getApiEnabled("/service/accountstate/","_account_state");case 2:return e.t0=e.sent,n=e.t0+"/service/accountstate/save",e.next=6,d.a.post(n,{value:o()(t)});case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"anonymousPost",value:function(){var e=c()(r.a.mark(function e(t){var n,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getApiEnabled("/service/anon/","_anonymous_post");case 2:return e.t0=e.sent,n=e.t0+"/service/anon/post",e.next=6,d.a.post(n,t);case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"wait",value:function(){var e=c()(r.a.mark(function e(t,n){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.api(n);case 2:if(a=e.sent,!(a.cursor.firstBatch.length>0)){e.next=6;break}return e.abrupt("return",a);case 6:return e.next=8,d.a.sleep(t);case 8:e.next=0;break;case 10:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"waitTx",value:function(){var e=c()(r.a.mark(function e(t,n,a,s){var o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a||(a=1e3),s||(s=this.config.collection_forum),e.next=4,this.wait(n,{find:s,maxTimeMS:a,filter:{transaction:t}});case 4:return o=e.sent,e.abrupt("return",o);case 6:case"end":return e.stop()}},e,this)}));return function(t,n,a,r){return e.apply(this,arguments)}}()}]),e}();n.d(t,"a",function(){return w});var x={url:"https://db.novusphere.io",collection_forum:"eosforum",collection_nsdb:"ns",collection_post_state:"ns_post_state",collection_post_vote:"ns_post_vote"};function w(){return x.url=b.e.settings.novusphere_api,new g(x)}},"cS+J":function(e,t,n){"use strict";n.d(t,"a",function(){return u});var a,r=n("Xxa5"),s=n.n(r),o=n("exGp"),i=n.n(o),c=n("xhVP"),u=(a=i()(s.a.mark(function e(t){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(p){e.next=12;break}return e.prev=1,e.t0=JSON,e.next=5,c.a.get("https://raw.githubusercontent.com/Novusphere/eos-forum-settings/master/user-icons.json");case 5:e.t1=e.sent,p=e.t0.parse.call(e.t0,e.t1),e.next=12;break;case 9:e.prev=9,e.t2=e.catch(1),p={};case 12:return n=[],t in p&&n.push(p[t]),e.abrupt("return",n);case 15:case"end":return e.stop()}},e,this,[[1,9]])})),function(e){return a.apply(this,arguments)}),p=null},dYGJ:function(e,t,n){"use strict";var a,r=n("woOf"),s=n.n(r),o=n("//Fk"),i=n.n(o),c=n("Zrlr"),u=n.n(c),p=n("wxAW"),f=n.n(p),l=n("Xxa5"),d=n.n(l),m=n("exGp"),h=n.n(m),_=n("7t+N"),y=n.n(_),b=n("TsL6"),v=n("aKUZ"),g=n("xhVP"),x=n("cS+J"),w=n("dpOi"),k=n("aW/X"),$=(a=h()(d.a.mark(function e(t){var n,a,r;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(k.a)(),a=null,e.prev=2,e.t0=JSON,e.next=6,n.cors(t);case 6:e.t1=e.sent,a=e.t0.parse.call(e.t0,e.t1),e.next=13;break;case 10:return e.prev=10,e.t2=e.catch(2),e.abrupt("return",null);case 13:if(!(r=a.html.match(/src=\".+\"/))){e.next=18;break}return r=(r=r[0].substring(5)).substring(0,r.indexOf('"')),e.abrupt("return",{src:r,thumbnail:a.thumbnail_url,width:a.width,height:a.height});case 18:return e.abrupt("return",null);case 19:case"end":return e.stop()}},e,this,[[2,10]])})),function(e){return a.apply(this,arguments)});function j(e){if(0==e.indexOf("magnet:"))return"magnet link";var t=document.createElement("a");return t.href=e,t.host.toLowerCase()}var A,S=function(){function e(t){u()(this,e),this.value="",this.type="",this.display="",this.width=0,this.height=0,t&&t.value&&t.type&&t.display&&(this.value=t.value,this.type=t.type,this.display=t.display,this.width=t.width?t.width:0,this.height=t.height?t.height:0)}return f()(e,[{key:"hasAttachment",value:function(e){return this.display==e}},{key:"isIframe",value:function(){return this.hasAttachment("iframe")}},{key:"isImg",value:function(){return this.hasAttachment("img")}},{key:"isMp4",value:function(){return this.hasAttachment("mp4")}},{key:"isMp3",value:function(){return this.hasAttachment("mp3")}},{key:"isLink",value:function(){return this.hasAttachment("link")}},{key:"normalize",value:function(){var e=h()(d.a.mark(function e(){var t,n,a,r,s,o,i;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,!(t=this)||!t.value){e.next=31;break}if("ipfs"!=t.type){e.next=8;break}t.type="url",t.value="https://gateway.ipfs.io/ipfs/"+t.value,e.next=29;break;case 8:if("url"!=t.type){e.next=29;break}if("youtu.be"==(a=j(t.value))&&(r=t.value.split("/"),t.value="https://www.youtube.com/watch?v="+r[r.length-1],a="youtube.com"),"youtube.com"!=a&&"www.youtube.com"!=a){e.next=16;break}return e.next=14,$("https://www.youtube.com/oembed?format=json&url="+t.value);case 14:null==(n=e.sent)&&(s=t.value.match("v=[a-zA-Z0-9_-]+"))&&s.length>0&&(n={src:"https://www.youtube.com/embed/"+s[0].substring(2),thumbnail:"",width:560,height:315});case 16:if("i.imgur.com"==a&&(t.display="img"),"i.redd.it"==a&&(t.display="img"),"twitter.com"==a&&(t.value="https://twitframe.com/show?url="+t.value,t.width=560,t.height=400,t.display="iframe"),"d.tube"!=a){e.next=24;break}return o=t.value.replace("/#!/","/"),e.next=23,$("https://api.d.tube/oembed?url="+o);case 23:n=e.sent;case 24:if("soundcloud.com"!=a){e.next=28;break}return e.next=27,$("https://soundcloud.com/oembed?format=json&url="+t.value);case 27:n=e.sent;case 28:"bitchute.com"!=a&&"www.bitchute.com"!=a||(i=t.value.match(/video\/[a-zA-Z0-9]+/))&&i.length>0&&(t.width=560,t.height=315,t.value="https://www.bitchute.com/embed/"+i[0].substring(6),t.display="iframe");case 29:"link"==t.display&&(t.value.endsWith(".png")||t.value.endsWith(".jpg")||t.value.endsWith(".jpeg")||t.value.endsWith(".gif"))&&(t.display="img"),"iframe"==t.display&&(0==t.value.indexOf("http:")&&(t.value="https:"+t.value.substring(5)),t.width||t.height||(t.width=560,t.height=315));case 31:n&&(t.thumbnail=n.thumbnail,t.width=n.width,t.height=n.height,t.value=n.src,t.display="iframe"),"img"!=t.display||t.thumbnail||(t.thumbnail=t.value);case 33:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}(),O=n("Dfrr"),T=n.n(O),E=function(){function e(t){u()(this,e),t=s()({name:"",pub:"",sig:""},t),this.name=t.name?t.name:"",this.pub=t.pub?t.pub:"",this.sig=t.sig?t.sig:"",this.verified=!1}return f()(e,[{key:"verify",value:function(e){this.sig&&this.pub&&(this.verified=T.a.verify(this.sig,e,this.pub,"utf8"))}}]),e}(),C=function e(t){if(u()(this,e),"string"==typeof t)try{t=JSON.parse(t)}catch(e){}t=s()({title:"",sub:"",parent_uuid:"",parent_poster:"",edit:!1,attachment:null,reddit:null,anon_id:null},t),this.type=t.type,this.title=t.title,this.sub=t.sub,this.parent_uuid=t.parent_uuid,this.parent_poster=t.parent_poster,this.edit=!!t.edit,this.attachment=new S(t.attachment),this.reddit=new function e(t){u()(this,e),this.author="",this.permalink="",t&&t.author&&t.permalink&&(this.author=t.author,this.permalink=t.permalink)}(t.reddit),this.anon_id=new E(t.anon_id)},M=function e(t,n){u()(this,e),t=s()({poster:"",post_uuid:"",content:"",reply_to_poster:"",reply_to_post_uuid:"",certify:!1,json_metadata:null,tags:[]},t),this.poster=t.poster,this.post_uuid=t.post_uuid,this.content=t.content,this.reply_to_poster=t.reply_to_poster,this.reply_to_post_uuid=t.reply_to_post_uuid,this.certify=t.certify,this.json_metadata=new C(t.json_metadata),this.json_metadata.anon_id.verify(this.content)},q=function(){var e=h()(d.a.mark(function e(){var t,n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(new Date).getTime(),!(null==z||t-z.last>=6e4)){e.next=8;break}return e.t0=JSON,e.next=5,g.a.get("https://s3.amazonaws.com/api.eosvotes.io/eosvotes/tallies/latest.json");case 5:e.t1=e.sent,n=e.t0.parse.call(e.t0,e.t1),z={last:t,active:n};case 8:return e.abrupt("return",z);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),P=(A=h()(d.a.mark(function e(t,n){var a,r,s,o;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:if(!(n&&n.content||"post"!=n.name)){e.next=4;break}return e.abrupt("return",n);case 4:return e.next=6,Object(w.i)(t);case 6:a=e.sent,r=a.trx.trx.actions[0].data,s=new w.b(r),o={poster:s.readName(),post_uuid:s.readString(),content:s.readString(),reply_to_poster:s.readName(),reply_to_post_uuid:s.readString(),certify:s.readVarInt(),json_metadata:s.readString()};try{o.json_metadata=JSON.parse(o.json_metadata)}catch(e){}return e.abrupt("return",o);case 12:case"end":return e.stop()}},e,this)})),function(e,t){return A.apply(this,arguments)}),B=["referendum-v1","poll-yn-v1","poll-yna-v1","options-v1","multi-select-v1"],N=["no","yes"],R=["no","yes","abstain"],z=null,D=function(){function e(t){if(u()(this,e),t&&"propose"==t.name){var n=t.data;this.setReferendum(t,t),t.data={poster:n.proposer,post_uuid:"ref-"+t.transaction,content:"",reply_to_poster:"",reply_to_post_uuid:"",certify:!1,json_metadata:{title:n.title,type:"novusphere-forum",sub:"referendum",parent_uuid:"",parent_poster:"",edit:!1,attachment:{value:"",type:"",display:""}}}}t=s()({score:0,createdAt:0,transaction:"",name:"post",id:0,data:null,up:0,up_atmos:0,total_replies:0,recent_edit:null,parent:null,my_vote:null,referendum:null,tags:[],replies:[]},t),this._post=t,this._content="",this.score=t.score,this.parent=null,this.depth=0,this.is_pinned=!1,this.new_replies=0,this.children=[],this.createdAt=t.createdAt,this.transaction=t.transaction,this.id=t.id,this.up=t.up,this.total_replies=t.total_replies,this.my_vote=t.my_vote,this.referendum=t.referendum,this.tags=t.tags,this.tips=[],this.replies=t.replies,b.e.settings.atmos_upvotes&&(this.up=Math.floor(this.up+(t.up_atmos?t.up_atmos:0))),this.data=new M(null,this.createdAt),this.o_transaction=this.transaction,this.o_id=this.id,this.o_attachment=new S(this.data.json_metadata.attachment)}return f()(e,null,[{key:"fromArray",value:function(){var t=h()(d.a.mark(function t(n){var a;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.map(function(t){return t instanceof e?t:new e(t)}),t.next=3,i.a.all(a.map(function(e){return e.normalize()}));case 3:return t.abrupt("return",a);case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"threadify",value:function(){var t=h()(d.a.mark(function t(n,a){var r,s,o,i,c,u;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.splice(0,0,n),t.next=3,e.fromArray(a);case 3:a=t.sent,r={},s=0,o=0;case 7:if(!(o<a.length)){t.next=26;break}if(i=a[o],r[i.data.post_uuid]=i,!(o>0)){t.next=23;break}if(i.parent=n,c=(c=i.data.json_metadata.parent_uuid)||n.data.post_uuid,u=r[c],!i.data.json_metadata.edit){t.next=21;break}if(!(i.data.poster==u.data.poster&&i.createdAt>u.createdAt)){t.next=19;break}return t.next=19,u.applyEdit(i);case 19:t.next=23;break;case 21:s++,u.addChild(i);case 23:o++,t.next=7;break;case 26:for(o=0;o<a.length;o++)a[o].children.sort(function(e,t){return t.score-e.score});return t.abrupt("return",{new_posts:s,responses:a,map:r});case 28:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()}]),f()(e,[{key:"setReferendum",value:function(e,t){e.referendum={transaction:t.transaction,type:t.data.proposal_json.type||B[0],name:t.data.proposal_name,content:t.data.proposal_json.content,expired:Array.isArray(t.expired)?t.expired.length>0:t.expired,expires_at:t.data.expires_at,options:[],details:null},B.some(function(t){return t==e.referendum.type})||(e.referendum.type=B[0]),e.referendum.type==B[0]||e.referendum.type==B[1]?e.referendum.options=N:e.referendum.type==B[2]?e.referendum.options=R:e.referendum.type==B[3]?e.referendum.options=(t.data.proposal_json.options||N).slice(0,255):e.referendum.type==B[4]&&(e.referendum.options=(t.data.proposal_json.options||N).slice(0,8))}},{key:"setReferendumDetails",value:function(){var e=h()(d.a.mark(function e(){var t,n,a,r,s,o,i,c,u,p;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.referendum){e.next=25;break}return isNaN(this.referendum.expires_at)&&(this.referendum.expires_at=new Date(this.referendum.expires_at).getTime()/1e3),this.referendum.expires_at<=(new Date).getTime()/1e3&&(this.referendum.expired=!0),e.next=5,q();case 5:for(t=e.sent,n=t.active,a=n[this.referendum.name],r={},s=0;s<this.referendum.options.length;s++)r[s]={value:0,percent:0};if(!a){e.next=24;break}o=a.stats.staked.total,this.referendum.type==B[4]&&(o=0),e.t0=d.a.keys(a.stats.staked);case 14:if((e.t1=e.t0()).done){e.next=23;break}if("total"!=(i=e.t1.value)){e.next=18;break}return e.abrupt("continue",14);case 18:if(c=a.stats.staked[i],c=(isNaN(c)?0:parseInt(c))/1e4,this.referendum.type==B[4])for(s=0;s<this.referendum.options.length;s++)0!=(i&1<<s)&&(s in r?r[s].value+=c:r[s]={value:c,percent:0},o+=1e4*c);else i in r&&(r[i].value=c);e.next=14;break;case 23:for(i in r)u=r[i].value,p=o>0?100*u/(o/1e4):0,r[i].percent=p.toFixed(1);case 24:this.referendum.details={votes:r,total_participants:a?a.stats.votes.total:0,total_eos:(a?a.stats.staked.total:0)/1e4};case 25:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"normalize",value:function(){var t=h()(d.a.mark(function t(){var n;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this._post){t.next=2;break}return t.abrupt("return");case 2:return n=this._post,this._post=null,t.next=6,P(n.transaction,n.data);case 6:return n.data=t.sent,this.data=new M(n.data,this.createdAt),this.o_attachment=new S(this.data.json_metadata.attachment),t.next=11,Object(x.a)(this.data.poster);case 11:if(this.user_icons=t.sent,!n.recent_edit){t.next=15;break}return t.next=15,this.applyEdit(n.recent_edit);case 15:if(!n.parent){t.next=20;break}return this.parent=new e(n.parent),t.next=19,this.parent.normalize();case 19:this.data.json_metadata.title=this.parent.data.json_metadata.title;case 20:return t.next=22,this.detectAttachment();case 22:return this.detectInlineAttachment(),t.next=25,this.detectContent();case 25:return t.next=27,this.setReferendumDetails();case 27:return t.next=29,this.data.json_metadata.attachment.normalize();case 29:this.detectTip();case 30:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"detectTip",value:function(){var e=h()(d.a.mark(function e(){var t,n,a,r,s,o,i,c,u,p,f;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.data.json_metadata.edit){e.next=2;break}return e.abrupt("return");case 2:if(!this.tags.includes("tip")){e.next=27;break}return t=Object(w.e)(),e.next=6,Object(w.i)(this.transaction);case 6:n=e.sent,a=n.trx.trx.actions,r=0;case 9:if(!(r<a.length)){e.next=27;break}if("transfer"!=a[r].name){e.next=24;break}return s=new w.b(a[r].hex_data),o=s.readName(),i=s.readName(),c=s.readInt32(),s.readInt32(),s.readByte(),u=s.readString(7).replace(/\0/g,""),p=s.readString(),e.next=21,Object(w.g)(t,a[r].account,u);case 21:f=e.sent,c=(c/Math.pow(10,f)).toFixed(f),this.tips.push({from:o,to:i,amount:c,memo:p,symbol:u,contract:a[r].account});case 24:r++,e.next=9;break;case 27:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getContent",value:function(){var e=this._content||this.data.content||"";return this.referendum&&(e&&(e+="\n\n---\n\n"),e+=this.referendum.content),e}},{key:"detect",value:function(){var e=h()(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"detectContent",value:function(){var e=h()(d.a.mark(function e(){var t,n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.data.content,n=/(.|)http[s]?:\/\/(\w|[:\/\.%-])+\.(png|jpg|jpeg|gif)(\?(\w|[:\/\.%-])+)?(.|)/g,t=t.replace(n,function(e){var t=e.trim();return t.startsWith("http")?"![]("+t+")":e}),this._content=t;case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"detectInlineAttachment",value:function(){var e=h()(d.a.mark(function e(){var t,n,a,r,s,o,i,c,u,p;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.data.json_metadata.attachment,n=t.value){e.next=4;break}return e.abrupt("return");case 4:if(n.startsWith("https://medium.com"),!n.startsWith("https://trybe.one/")){e.next=23;break}return e.prev=6,e.next=9,g.a.get("https://db.novusphere.io/service/cors/?"+n);case 9:a=e.sent,(r=y()(a).find('div[class="entry-content"]')).find('div[class*="essb_links"]').remove(),r.find('div[class*="post-ratings"]').remove(),r.find('div[class*="post-ratings-loading"]').remove(),r.find("img").each(function(){var e="https://images.weserv.nl/?url=",t=y()(this);t.prop("src",e+t.prop("src"));var n=t.prop("srcset");n&&t.prop("srcset",n.split(", ").map(function(t){return e+t}).join(", "))}),t.type="markdown",t.display="markdown",t.value="**Source:** "+n+" \n\n----\n\n"+r.html(),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(6),console.log(e.t0);case 23:if(!n.startsWith("https://whaleshares.io")){e.next=41;break}return e.prev=24,s=n.substring(n.indexOf(".io")+3).split("/"),o=(s[1]||"").substring(1),i=s[2],e.next=30,g.a.get('https://api.whaleshares.io/rest2jsonrpc/database_api/get_content?params=["'+o+'","'+i+'"]');case 30:c=e.sent,u=(u=c.result.body).replace(/!\[\]\(https:\/\/whaleshares\.io.+[a-zA-Z0-9]+\)/g,function(e){var t=e.trim();return'<img src="'+(t=t.substring(4,t.length-1))+'">'}),t.type="markdown",t.display="markdown",t.value="**Source:** "+n+" \n\n----\n\n"+u,e.next=41;break;case 38:e.prev=38,e.t1=e.catch(24),console.log(e.t1);case 41:if(!n.startsWith("https://steemit.com")){e.next=64;break}return e.prev=42,e.next=45,g.a.get("https://db.novusphere.io/service/cors/?"+n);case 45:if(a=e.sent,r=y()(a),!((p=a.indexOf('link rel="canonical"'))>-1)){e.next=55;break}if(!((p=a.substring(p+27,a.indexOf('"',p+27)).toLowerCase()).indexOf("steemit.com")>-1&&p!=n.toLowerCase())){e.next=55;break}return e.next=53,g.a.get("https://db.novusphere.io/service/cors/?"+p);case 53:a=e.sent,r=y()(a);case 55:r=r.find('div[class*="MarkdownViewer"]'),t.type="markdown",t.display="markdown",t.value="**Source:** "+n+" \n\n----\n\n"+r.html(),e.next=64;break;case 61:e.prev=61,e.t2=e.catch(42),console.log(e.t2);case 64:case"end":return e.stop()}},e,this,[[6,20],[24,38],[42,61]])}));return function(){return e.apply(this,arguments)}}()},{key:"detectAttachment",value:function(){var e=h()(d.a.mark(function e(){var t,n,a,r,s,o,i;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.data.json_metadata.attachment).value||"referendum"!=t.display){e.next=7;break}return e.next=4,v.a.actions.Referendum.GetProposal(t.value);case 4:return(n=e.sent)&&this.setReferendum(this,n),e.abrupt("return");case 7:if(!t.value){e.next=9;break}return e.abrupt("return");case 9:a=function(e,n,a){t.value=e,t.type=n,t.display=a},r=[{match:/https:\/\/youtu.be\/[a-zA-Z0-9-_]+/i,handle:function(e){return a(e[0],"url","link")}},{match:/https:\/\/www.youtube.com\/watch\?v=[a-zA-Z0-9-_]+/i,handle:function(e){return a(e[0],"url","link")}},{match:/https:\/\/twitter.com\/[a-zA-Z0-9-_]+\/status\/[0-9]+/i,handle:function(e){return a(e[0],"url","link")}},{match:/https:\/\/t.me\/[\w]+\/[0-9]+/i,handle:function(e){return a(e[0],"url","link")}},{match:/https:\/\/medium.com\/@[\w]+\/.+/i,handle:function(e){return a(e[0],"url","link")}}],s=0;case 12:if(!(s<r.length)){e.next=21;break}if(o=r[s],!((i=this.data.content.match(o.match))&&i.length>0)){e.next=18;break}return o.handle(i),e.abrupt("break",21);case 18:s++,e.next=12;break;case 21:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"applyEdit",value:function(){var e=h()(d.a.mark(function e(t){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t.transaction,t.data);case 2:if(t.data=e.sent,this.createdAt=t.createdAt,this.transaction=t.transaction,this.id=t.id,this._content="",this.data.content=t.data.content,this.data.json_metadata.edit=!0,t.data.json_metadata.title&&(this.data.json_metadata.title=t.data.json_metadata.title),!t.data.json_metadata.attachment){e.next=19;break}return this.data.json_metadata.attachment=new S(t.data.json_metadata.attachment),e.next=14,this.detectAttachment();case 14:return this.detectInlineAttachment(),e.next=17,this.detectContent();case 17:return e.next=19,this.setReferendumDetails();case 19:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getTitle",value:function(){var e=this.data.json_metadata.title;return!e&&this.parent&&this.parent.data.json_metadata.title&&(e=this.parent.data.json_metadata.title),e||(e="untitled"),e}},{key:"getUrlTitle",value:function(){var e=this.getTitle();return e=e.replace(/\W/g,"_")}},{key:"addChild",value:function(e){e.depth=this.depth+1,this.children.push(e)}}]),e}();n.d(t,"a",function(){return D})},dpOi:function(e,t,n){"use strict";var a,r,s=n("Xxa5"),o=n.n(s),i=n("//Fk"),c=n.n(i),u=n("exGp"),p=n.n(u),f=n("kcoD"),l=n("VVn8"),d=n("TsL6"),m=n("Zrlr"),h=n.n(m),_=n("wxAW"),y=n.n(_),b=X().transactionTypes.get("name"),v=function(){function e(t){h()(this,e);for(var n=new Uint8Array(t.length/2),a=0;a<n.length;a++)n[a]=parseInt(t.substr(2*a,2),16);this.bytes=n,this.offset=0}return y()(e,[{key:"readByte",value:function(){return this.bytes[this.offset++]}},{key:"readBytes",value:function(e){for(var t=new Uint8Array(e),n=0;n<e;n++)t[n]=this.readByte();return t}},{key:"readInt32",value:function(){return this.readByte()|this.readByte()<<8|this.readByte()<<16|this.readByte()<<24}},{key:"readVarInt",value:function(){for(var e=0,t=0,n=0;n<8;n++){var a=this.readByte();if(e+=t<28?(127&a)<<t:(127&a)*(0|Math.pow(2,t)),t+=7,a<128)break}return e}},{key:"readString",value:function(e){e=e||this.readVarInt();var t=this.readBytes(e);return String.fromCharCode.apply(null,t)}},{key:"readName",value:function(){var e=new f.Serialize.SerialBuffer({array:this.readBytes(8)});return b.deserialize(e)}}]),e}(),g=n("woOf"),x=n.n(g),w=n("xhVP"),k=(a=p()(o.a.mark(function e(){var t,n,a,r,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(j){e.next=21;break}return e.t0=JSON,e.next=4,w.a.get("https://raw.githubusercontent.com/eoscafe/eos-airdrops/master/tokens.json");case 4:return e.t1=e.sent,t=e.t0.parse.call(e.t0,e.t1),n=[],e.prev=7,e.t2=JSON,e.next=11,w.a.get("https://raw.githubusercontent.com/Novusphere/eos-forum-settings/master/tokens.json");case 11:e.t3=e.sent,n=e.t2.parse.call(e.t2,e.t3),e.next=19;break;case 15:e.prev=15,e.t4=e.catch(7),console.log("malformed (our) tokens.json"),console.log(e.t4);case 19:for(a=0;a<n.length;a++)r=n[a],(s=t.find(function(e){return e.symbol==r.symbol&&e.account==r.account}))?x()(s,r):t.push(r);j=t;case 21:return e.abrupt("return",j);case 22:case"end":return e.stop()}},e,this,[[7,15]])})),function(){return a.apply(this,arguments)}),$=(r=p()(o.a.mark(function e(t,n,a){var r,s,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,s=A[r=n+":"+a]){e.next=9;break}return e.next=6,t.rpc.get_currency_stats(n,a);case 6:i=e.sent,s=i[a].supply.split(" ")[0].split(".")[1].length,A[r]=s;case 9:return e.abrupt("return",s);case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",0);case 15:case"end":return e.stop()}},e,this,[[0,12]])})),function(e,t,n){return r.apply(this,arguments)}),j=null,A={},S=function(){function e(){h()(this,e),this.setDefault()}return y()(e,[{key:"setDefault",value:function(){this.account="",this.publicKey="",this.auth="",this.atmos="0.000",this.token="0.000",this.notifications=0,this._updater&&clearInterval(this.updater),window.dispatchEvent(new Event("identity"))}},{key:"update",value:function(){var e=p()(o.a.mark(function e(t){var n=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.account&&(window.dispatchEvent(new Event("identityUpdate")),this._updater||(this._updater=setInterval(function(){return n.update()},5e3))),t&&window.dispatchEvent(new Event("identity"));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),O=n("OHoK"),T=n("pX0Q"),E=n("jZEM"),C=n("J0s3"),M=n("3GiT");n.d(t,"e",function(){return X}),n.d(t,"i",function(){return G}),n.d(t,"a",function(){return D}),n.d(t,"f",function(){return F}),n.d(t,"d",function(){return U}),n.d(t,"c",function(){return L}),n.d(t,"j",function(){return V}),n.d(t,"b",function(){return v}),n.d(t,"h",function(){return k}),n.d(t,"g",function(){return $});var q,P,B,N,R,z,D=function(){var e=p()(o.a.mark(function e(t){var n,a,r,s,i,u=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!J){e.next=2;break}return e.abrupt("return");case 2:n=H.getWalletProviders(),a=0;case 4:if(!(a<5)){e.next=16;break}for(console.log("Wallet detection round "+a),r=[],s=function(){var e,t=n[i],a=H.initWallet(t);r.push(new c.a((e=p()(o.a.mark(function e(n,r){var s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.connect();case 3:return e.next=5,a.discover({pathIndexList:[0]});case 5:if(s=e.sent,!J){e.next=10;break}throw new Error("Already have a wallet present");case 10:if(a.connected){e.next=14;break}throw new Error("Failed to connect");case 14:if("ledger"!=t.meta.id||0!=s.keyToAccountMap.length&&!s.keyToAccountMap.every(function(e){return!e.accounts||0==e.accounts.length})){e.next=16;break}throw new Error("Ledger not actually connected");case 16:return J=a,Z=s,console.log("Detected and connected to "+t.meta.name),Z.keyToAccountMap.length>0&&console.log(Z),e.next=22,I();case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(0),console.log("Undetected "+t.meta.name);case 27:n();case 28:case"end":return e.stop()}},e,u,[[0,24]])})),function(t,n){return e.apply(this,arguments)})))},i=0;i<n.length;i++)s();return e.next=11,c.a.all(r);case 11:if(!J&&!t){e.next=13;break}return e.abrupt("break",16);case 13:a++,e.next=4;break;case 16:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),I=(q=p()(o.a.mark(function e(){var t,n,a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(Z.keyToAccountMap.length>0)){e.next=16;break}t=null,n=0;case 4:if(!(n<Z.keyToAccountMap.length)){e.next=12;break}if(!((a=Z.keyToAccountMap[n]).accounts&&a.accounts.length>0)){e.next=9;break}return t=a.accounts[0],e.abrupt("break",12);case 9:n++,e.next=4;break;case 12:return e.next=14,J.login(t.account,t.authorization);case 14:e.next=18;break;case 16:return e.next=18,J.login();case 18:if(!J.auth.accountName){e.next=27;break}return W.account=J.auth.accountName,W.publicKey=J.auth.publicKey,W.auth=J.auth.permission,W.atmos="0.000",W.token="0.000",W.notifications=0,e.next=27,W.update(!0);case 27:e.next=32;break;case 29:return e.prev=29,e.t0=e.catch(0),e.abrupt("return",!1);case 32:return e.abrupt("return",!0);case 33:case"end":return e.stop()}},e,this,[[0,29]])})),function(){return q.apply(this,arguments)}),F=(P=p()(o.a.mark(function e(t,n){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(W.account||!t){e.next=4;break}if(!J){e.next=4;break}return e.next=4,I();case 4:return e.abrupt("return",W);case 5:case"end":return e.stop()}},e,this)})),function(e,t){return P.apply(this,arguments)}),U=(B=p()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.logout();case 2:return W.setDefault(),e.abrupt("return",W);case 4:case"end":return e.stop()}},e,this)})),function(){return B.apply(this,arguments)}),G=(N=p()(o.a.mark(function e(t){var n,a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=X(),e.next=3,n.rpc.history_get_transaction(t);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}},e,this)})),function(e){return N.apply(this,arguments)}),L=(R=p()(o.a.mark(function e(t){var n,a,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Array.isArray(t)||(t=[t]),n=J,a=t.map(function(e){return{account:e.contract,name:e.name,authorization:[{actor:n.auth.accountName,permission:n.auth.permission}],data:e.data}}),r=null,e.next=6,n.eosApi.transact({actions:a},{broadcast:!0,blocksBehind:3,expireSeconds:180});case 6:return r=e.sent,e.abrupt("return",r?r.transaction_id:null);case 8:case"end":return e.stop()}},e,this)})),function(e){return R.apply(this,arguments)}),V=(z=p()(o.a.mark(function e(t,n,a){var r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(J&&J.auth.accountName){e.next=3;break}return console.log("No wallet able to sign data: "+n),e.abrupt("return","");case 3:return e.prev=3,e.next=6,J.signArbitrary(n,a);case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(3),console.log('Failed to sign data "'+n+'"');case 13:case"end":return e.stop()}},e,this,[[3,10]])})),function(e,t,n){return z.apply(this,arguments)}),H=Object(O.a)({appName:"eosforum",network:{host:"eos.greymass.com",port:443,protocol:"https",chainId:"aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906"},walletProviders:[Object(E.a)(),Object(C.a)(),Object(M.a)(),Object(T.a)()]}),J=null,W=new S,Z={keyToAccountMap:[]};function X(){var e=d.e.settings.eos_api,t=e.protocol+"://"+e.host,n=new f.JsonRpc(t);return new f.Api({rpc:n,textDecoder:new l.TextDecoder,textEncoder:new l.TextEncoder})}D()},"kX+d":function(e,t){e.exports={version:"eosio::abi/1.0",types:[{new_type_name:"account_name",type:"name"},{new_type_name:"action_name",type:"name"},{new_type_name:"permission_name",type:"name"}],structs:[{name:"permission_level",base:"",fields:[{name:"actor",type:"account_name"},{name:"permission",type:"permission_name"}]},{name:"action",base:"",fields:[{name:"account",type:"account_name"},{name:"name",type:"action_name"},{name:"authorization",type:"permission_level[]"},{name:"data",type:"bytes"}]},{name:"extension",base:"",fields:[{name:"type",type:"uint16"},{name:"data",type:"bytes"}]},{name:"transaction_header",base:"",fields:[{name:"expiration",type:"time_point_sec"},{name:"ref_block_num",type:"uint16"},{name:"ref_block_prefix",type:"uint32"},{name:"max_net_usage_words",type:"varuint32"},{name:"max_cpu_usage_ms",type:"uint8"},{name:"delay_sec",type:"varuint32"}]},{name:"transaction",base:"transaction_header",fields:[{name:"context_free_actions",type:"action[]"},{name:"actions",type:"action[]"},{name:"transaction_extensions",type:"extension[]"}]}]}},luBh:function(e,t,n){"use strict";n.d(t,"b",function(){return h}),n.d(t,"a",function(){return y});var a,r,s,o=n("Xxa5"),i=n.n(o),c=n("exGp"),u=n.n(c),p=n("TsL6"),f=n("Dfrr"),l=n.n(f),d=n("aW/X"),m=n("dpOi"),h=(a=u()(i.a.mark(function e(){var t,n,a,r,s,o,c,u,f,h,_,y;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(d.a)(),Object(m.e)(),n={subscribed_subs:p.e.subscribed_subs,unsubscribed_subs:p.e.unsubscribed_subs,last_notification:p.e.last_notification,following:p.e.following},a=parseInt((new Date).getTime()/1e3),e.next=6,Object(m.f)();case 6:if(!(r=e.sent).account){e.next=39;break}if(e.prev=8,s=!1,e.t0=p.e.accountstate[r.account],!e.t0){e.next=15;break}return e.next=14,t.isAccountStateAuthorized(p.e.accountstate[r.account],r.account,"");case 14:e.t0=e.sent;case 15:if(!e.t0){e.next=17;break}s=!0;case 17:if(s){e.next=29;break}return p.e.accountstate[r.account]=0,e.next=21,Object(m.j)(r.publicKey,a.toString(),"Start session");case 21:if(o=e.sent){e.next=24;break}throw new Error("invalid signature");case 24:return r.publicKey||(r.publicKey=l.a.recover(o,a.toString())),e.next=27,t.authorizeAccountState(r.account,r.publicKey,a,o);case 27:(c=e.sent).session_key&&(p.e.accountstate[r.account]=c.session_key);case 29:e.next=34;break;case 31:e.prev=31,e.t1=e.catch(8),console.log(e.t1);case 34:if(!p.e.accountstate[r.account]){e.next=39;break}return u={name:r.account,key:r.publicKey,session_key:p.e.accountstate[r.account],state:n},e.next=38,t.saveAccountState(u);case 38:e.sent;case 39:if(!p.e.anon_id.key||!l.a.isValidPrivate(p.e.anon_id.key)){e.next=58;break}if(f=l.a.privateToPublic(p.e.anon_id.key),e.t2=!p.e.accountstate[f],e.t2){e.next=46;break}return e.next=45,t.isAccountStateAuthorized(p.e.accountstate[f],"",f);case 45:e.t2=!e.sent;case 46:if(!e.t2){e.next=53;break}return p.e.accountstate[f]=0,h=l.a.sign(a.toString(),p.e.anon_id.key),e.next=51,t.authorizeAccountState("",f,a,h);case 51:(_=e.sent).session_key&&(p.e.accountstate[f]=_.session_key);case 53:if(!p.e.accountstate[f]){e.next=58;break}return y={name:"",key:f,session_key:p.e.accountstate[f],state:n},e.next=57,t.saveAccountState(y);case 57:e.sent;case 58:case"end":return e.stop()}},e,this,[[8,31]])})),function(){return a.apply(this,arguments)}),_=(r=u()(i.a.mark(function e(t){var n,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=function(e,t){if(e&&Array.isArray(e)){t.length=0;for(var n=0;n<e.length;n++)t.push(e[n])}},t&&(a=t.state,n(a.subscribed_subs,p.e.subscribed_subs),n(a.unsubscribed_subs,p.e.unsubscribed_subs),Object(p.d)(),a.following&&n(a.following.filter(function(e){return e}),p.e.following),a.last_notification&&!isNaN(a.last_notification)&&(p.e.last_notification=a.last_notification),Object(p.c)());case 2:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)}),y=(s=u()(i.a.mark(function e(){var t,n,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(d.a)(),e.next=3,Object(m.f)();case 3:if(n=e.sent,a=null,!n.account){e.next=11;break}return e.next=8,t.getAccountState(n.account);case 8:a=e.sent,e.next=15;break;case 11:if(!p.e.anon_id.key||!l.a.isValidPrivate(p.e.anon_id.key)){e.next=15;break}return e.next=14,t.getAccountState(l.a.privateToPublic(p.e.anon_id.key));case 14:a=e.sent;case 15:return e.next=17,_(a);case 17:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)})},on0j:function(e,t){e.exports={version:"eosio::abi/1.1",structs:[{name:"extensions_entry",base:"",fields:[{name:"tag",type:"uint16"},{name:"value",type:"bytes"}]},{name:"type_def",base:"",fields:[{name:"new_type_name",type:"string"},{name:"type",type:"string"}]},{name:"field_def",base:"",fields:[{name:"name",type:"string"},{name:"type",type:"string"}]},{name:"struct_def",base:"",fields:[{name:"name",type:"string"},{name:"base",type:"string"},{name:"fields",type:"field_def[]"}]},{name:"action_def",base:"",fields:[{name:"name",type:"name"},{name:"type",type:"string"},{name:"ricardian_contract",type:"string"}]},{name:"table_def",base:"",fields:[{name:"name",type:"name"},{name:"index_type",type:"string"},{name:"key_names",type:"string[]"},{name:"key_types",type:"string[]"},{name:"type",type:"string"}]},{name:"clause_pair",base:"",fields:[{name:"id",type:"string"},{name:"body",type:"string"}]},{name:"error_message",base:"",fields:[{name:"error_code",type:"uint64"},{name:"error_msg",type:"string"}]},{name:"variant_def",base:"",fields:[{name:"name",type:"string"},{name:"types",type:"string[]"}]},{name:"abi_def",base:"",fields:[{name:"version",type:"string"},{name:"types",type:"type_def[]"},{name:"structs",type:"struct_def[]"},{name:"actions",type:"action_def[]"},{name:"tables",type:"table_def[]"},{name:"ricardian_clauses",type:"clause_pair[]"},{name:"error_messages",type:"error_message[]"},{name:"abi_extensions",type:"extensions_entry[]"},{name:"variants",type:"variant_def[]$"}]}]}},"p6/X":function(e,t,n){"use strict";n.d(t,"c",function(){return m}),n.d(t,"f",function(){return h}),n.d(t,"g",function(){return _}),n.d(t,"d",function(){return y}),n.d(t,"b",function(){return v}),n.d(t,"a",function(){return b}),n.d(t,"e",function(){return d});var a,r=n("Xxa5"),s=n.n(r),o=n("woOf"),i=n.n(o),c=n("fZjL"),u=n.n(c),p=n("exGp"),f=n.n(p),l=n("xhVP"),d=(a=f()(s.a.mark(function e(){var t,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.__PRESETS__){e.next=13;break}return e.prev=1,t=window.location.host,e.t0=JSON,e.next=6,l.a.get("https://raw.githubusercontent.com/Novusphere/eos-forum-settings/master/presets/"+t+".json");case 6:e.t1=e.sent,window.__PRESETS__=e.t0.parse.call(e.t0,e.t1),console.log("Retrieved presets for "+t),e.next=13;break;case 11:e.prev=11,e.t2=e.catch(1);case 13:return window.__PRESETS__&&((n=window.__PRESETS__).header_texts&&(y=n.header_texts),n.default_sub&&n.default_sub),e.t3=JSON,e.next=17,l.a.get("https://raw.githubusercontent.com/Novusphere/eos-forum-settings/master/brand-subs.json");case 17:e.t4=e.sent,b=e.t3.parse.call(e.t3,e.t4),console.log("Loaded brands for subs: "+u()(b).join(", ")),i()(v,b.novusphere);case 21:case"end":return e.stop()}},e,this,[[1,11]])})),function(){return a.apply(this,arguments)}),m="eosio.forum",h=25,_=10,y=["Did you know you in your **settings** you can toggle between a day and night theme?","Did you know you in your **settings** you can set delegated moderators to help filter spam?","Did you know you can block users who post spam by clicking their name to visit their profile and then clicking block?","Did you know you can post without an account in any of the **anon-** subs?"];window.__PRESETS__&&window.__PRESETS__.default_sub&&window.__PRESETS__.default_sub;var b=null,v={}},pJbv:function(e,t){e.exports={version:"eosio::abi/1.0",types:[{new_type_name:"account_name",type:"name"},{new_type_name:"action_name",type:"name"},{new_type_name:"permission_name",type:"name"}],structs:[{name:"permission_level",base:"",fields:[{name:"actor",type:"account_name"},{name:"permission",type:"permission_name"}]},{name:"action",base:"",fields:[{name:"account",type:"account_name"},{name:"name",type:"action_name"},{name:"authorization",type:"permission_level[]"},{name:"data",type:"bytes"}]},{name:"extension",base:"",fields:[{name:"type",type:"uint16"},{name:"data",type:"bytes"}]},{name:"transaction_header",base:"",fields:[{name:"expiration",type:"time_point_sec"},{name:"ref_block_num",type:"uint16"},{name:"ref_block_prefix",type:"uint32"},{name:"max_net_usage_words",type:"varuint32"},{name:"max_cpu_usage_ms",type:"uint8"},{name:"delay_sec",type:"varuint32"}]},{name:"transaction",base:"transaction_header",fields:[{name:"context_free_actions",type:"action[]"},{name:"actions",type:"action[]"},{name:"transaction_extensions",type:"extension[]"}]}]}},rzhs:function(e,t){e.exports={version:"eosio::abi/1.1",structs:[{name:"extensions_entry",base:"",fields:[{name:"tag",type:"uint16"},{name:"value",type:"bytes"}]},{name:"type_def",base:"",fields:[{name:"new_type_name",type:"string"},{name:"type",type:"string"}]},{name:"field_def",base:"",fields:[{name:"name",type:"string"},{name:"type",type:"string"}]},{name:"struct_def",base:"",fields:[{name:"name",type:"string"},{name:"base",type:"string"},{name:"fields",type:"field_def[]"}]},{name:"action_def",base:"",fields:[{name:"name",type:"name"},{name:"type",type:"string"},{name:"ricardian_contract",type:"string"}]},{name:"table_def",base:"",fields:[{name:"name",type:"name"},{name:"index_type",type:"string"},{name:"key_names",type:"string[]"},{name:"key_types",type:"string[]"},{name:"type",type:"string"}]},{name:"clause_pair",base:"",fields:[{name:"id",type:"string"},{name:"body",type:"string"}]},{name:"error_message",base:"",fields:[{name:"error_code",type:"uint64"},{name:"error_msg",type:"string"}]},{name:"variant_def",base:"",fields:[{name:"name",type:"string"},{name:"types",type:"string[]"}]},{name:"abi_def",base:"",fields:[{name:"version",type:"string"},{name:"types",type:"type_def[]"},{name:"structs",type:"struct_def[]"},{name:"actions",type:"action_def[]"},{name:"tables",type:"table_def[]"},{name:"ricardian_clauses",type:"clause_pair[]"},{name:"error_messages",type:"error_message[]"},{name:"abi_extensions",type:"extensions_entry[]"},{name:"variants",type:"variant_def[]$"}]}]}},wh04:function(e,t,n){"use strict";n.d(t,"a",function(){return v});var a=n("dXij"),r=n.n(a),s=n("c/Tr"),o=n.n(s),i=n("lHA8"),c=n.n(i),u=n("Xxa5"),p=n.n(u),f=n("exGp"),l=n.n(f),d=n("Zrlr"),m=n.n(d),h=n("wxAW"),_=n.n(h),y=n("TsL6"),b=n("xhVP"),v=new(function(){function e(){m()(this,e),this.resetCache()}return _()(e,[{key:"resetCache",value:function(){this.cache={}}},{key:"resolve",value:function(){var e=l()(p.a.mark(function e(t,n){var a,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("197001"!=n){e.next=2;break}return e.abrupt("return",null);case 2:if(0!=(a=t).indexOf("https:")&&0!=a.indexOf("http:")){e.next=6;break}e.next=11;break;case 6:if(!(a.indexOf("/")>-1)){e.next=10;break}a="https://raw.githubusercontent.com/"+a+"/master",e.next=11;break;case 10:return e.abrupt("return",null);case 11:return e.prev=11,a=a+"/"+n+".json",e.t0=JSON,e.next=16,b.a.get(a);case 16:return e.t1=e.sent,r=e.t0.parse.call(e.t0,e.t1),e.abrupt("return",r);case 21:return e.prev=21,e.t2=e.catch(11),e.abrupt("return",null);case 24:case"end":return e.stop()}},e,this,[[11,21]])}));return function(t,n){return e.apply(this,arguments)}}()},{key:"dateToKey",value:function(e){return 100*e.getUTCFullYear()+(e.getUTCMonth()+1)}},{key:"getCacheSet",value:function(){var e=l()(p.a.mark(function e(t){var n,a,r,s,i,u,f,l,d,m,h,_,v;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=(new Date).getTime(),a=new Date(1e3*t),r=this.dateToKey(a);case 3:if(0!=(s=this.cache[r])){e.next=9;break}return e.next=7,b.a.sleep(5);case 7:e.next=10;break;case 9:return e.abrupt("break",12);case 10:e.next=3;break;case 12:if(!(null==s||n-s.last_updated>=6e5)){e.next=37;break}i=function(e,t){if(t)for(var n=0;n<t.length;n++)e.add(t[n])},this.cache[r]=0,s={last_updated:n,accounts:[],transactions:[],nsfw:[],pinned:[]},u=new c.a,f=new c.a,l=new c.a,d={},m=0;case 21:if(!(m<y.e.moderation.mods.length)){e.next=31;break}return e.next=24,this.resolve(y.e.moderation.mods[m],r);case 24:if(null!=(h=e.sent)){e.next=27;break}return e.abrupt("continue",28);case 27:try{if(i(u,h.account),i(f,h.transactions),i(l,h.nsfw),h.pinned)for(_ in h.pinned)(v=d[_])||(v=new c.a,d[_]=v),i(v,h.pinned[_])}catch(e){console.log("error with moderator "+y.e.moderation.mods[m]+" for "+r)}case 28:m++,e.next=21;break;case 31:for(_ in d)d[_]=o()(d[_]);s.account=o()(u),s.transactions=o()(f),s.nsfw=o()(l),s.pinned=d,this.cache[r]=s;case 37:return e.abrupt("return",s);case 38:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getCurrentSet",value:function(){var e=l()(p.a.mark(function e(){var t,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Date,e.next=3,this.getCacheSet(t.getTime()/1e3);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getBlockedAccounts",value:function(){var e=l()(p.a.mark(function e(){var t,n,a,r,s;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Date,e.next=3,this.getCurrentSet();case 3:return n=e.sent,e.next=6,this.getCacheSet((t.getTime()-26784e5)/1e3);case 6:for(a=e.sent,r=new c.a,s=0;s<n.accounts.length;s++)r.add(n.accounts[s]);for(s=0;s<a.accounts.length;s++)r.add(a.accounts[s]);for(s=0;s<y.e.moderation.accounts.length;s++)r.add(y.e.moderation.accounts[s]);return e.abrupt("return",o()(r));case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getPinned",value:function(){var e=l()(p.a.mark(function e(t){var n,a,s,o,i;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCurrentSet();case 2:return n=e.sent,a=[],(s=n.pinned.all)&&(a=r()(a,s)),0==t.indexOf("anon-")&&(o=n.pinned.anon)&&(a=r()(a,o)),"all"!=t&&(i=n.pinned[t])&&(a=r()(a,i)),e.abrupt("return",a);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"isNsfw",value:function(){var e=l()(p.a.mark(function e(t,n){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCacheSet(t);case 2:return a=e.sent,e.abrupt("return",a.nsfw.includes(n));case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"isBlocked",value:function(){var e=l()(p.a.mark(function e(t,n,a){var r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a||!y.e.moderation.accounts.includes(a)){e.next=2;break}return e.abrupt("return",!0);case 2:if(!n||!y.e.moderation.transactions.includes(n)){e.next=4;break}return e.abrupt("return",!0);case 4:if(t){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,this.getCacheSet(t);case 8:return r=e.sent,e.abrupt("return",a&&r.accounts.includes(a)||n&&r.transactions.includes(n));case 10:case"end":return e.stop()}},e,this)}));return function(t,n,a){return e.apply(this,arguments)}}()}]),e}())},xRnl:function(e,t){e.exports={version:"eosio::abi/1.0",types:[{new_type_name:"account_name",type:"name"},{new_type_name:"action_name",type:"name"},{new_type_name:"permission_name",type:"name"}],structs:[{name:"permission_level",base:"",fields:[{name:"actor",type:"account_name"},{name:"permission",type:"permission_name"}]},{name:"action",base:"",fields:[{name:"account",type:"account_name"},{name:"name",type:"action_name"},{name:"authorization",type:"permission_level[]"},{name:"data",type:"bytes"}]},{name:"extension",base:"",fields:[{name:"type",type:"uint16"},{name:"data",type:"bytes"}]},{name:"transaction_header",base:"",fields:[{name:"expiration",type:"time_point_sec"},{name:"ref_block_num",type:"uint16"},{name:"ref_block_prefix",type:"uint32"},{name:"max_net_usage_words",type:"varuint32"},{name:"max_cpu_usage_ms",type:"uint8"},{name:"delay_sec",type:"varuint32"}]},{name:"transaction",base:"transaction_header",fields:[{name:"context_free_actions",type:"action[]"},{name:"actions",type:"action[]"},{name:"transaction_extensions",type:"extension[]"}]}]}},xhVP:function(e,t,n){"use strict";var a=n("//Fk"),r=n.n(a),s=n("7t+N"),o=n.n(s);t.a={post:function(e,t){return new r.a(function(n,a){o.a.post(e,t,function(e){n(e)}).fail(function(e){a(e)})})},get:function(e,t){return new r.a(function(n,a){o.a.get(e,t,function(e){n(e)}).fail(function(e){a(e)})})},sleep:function(e){return new r.a(function(t){return setTimeout(t,e)})}}},zj2Q:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.91cafee14c567dd75e96.js.map